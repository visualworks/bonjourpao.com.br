function vc_toTitleCase(t){return t.replace(/\w\S*/g,function(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()})}function vc_convert_column_size(t){var n=t?t.split('/'):[1,1],o=_.range(1,13),l=!_.isUndefined(n[0])&&0<=_.indexOf(o,parseInt(n[0],10))&&parseInt(n[0],10),s=!_.isUndefined(n[1])&&0<=_.indexOf(o,parseInt(n[1],10))&&parseInt(n[1],10);return!1!==l&&!1!==s?'vc_col-sm-'+12*l/s:'vc_col-sm-12'}function vc_convert_column_span_size(t){return t=t.replace(/^vc_/,''),'span12'===t?'1/1':'span11'===t?'11/12':'span10'===t?'5/6':'span9'===t?'3/4':'span8'===t?'2/3':'span7'===t?'7/12':'span6'===t?'1/2':'span5'===t?'5/12':'span4'===t?'1/3':'span3'===t?'1/4':'span2'===t?'1/6':'span1'==t&&'1/12'}function vc_get_column_mask(t){var o=t.split('_'),l=o.length,s=0,n;for(n in o)if(!isNaN(parseFloat(o[n]))&&isFinite(o[n])){var r=o[n].match(/(\d{1,2})(\d{1,2})/);s=_.reduce(r.slice(1),function(d,u){return d+parseInt(u,10)},s)}return l+''+s}function vc_guid(){return VCS4()+VCS4()+'-'+VCS4()}function VCS4(){return(0|65536*(1+Math.random())).toString(16).substring(1)}function vc_button_param_target_callback(){var t=jQuery,n=this.$content.find('[name=target]').parents('[data-vc-ui-element="panel-shortcode-param"]:first'),o=t('.wpb-edit-form [name=href]'),l=_.debounce(function(){var s=t(this).val();0<s.length&&'http://'!==s&&'https://'!==s?n.show():n.hide()},300);o.keyup(l).trigger('keyup')}function vc_cta_button_param_target_callback(){var t=jQuery,n=this.$content.find('[name=target]').parents('[data-vc-ui-element="panel-shortcode-param"]:first'),o=t('.wpb-edit-form [name=href]'),l=_.debounce(function(){var s=t(this).val();0<s.length&&'http://'!==s&&'https://'!==s?n.show():n.hide()},300);o.keyup(l).trigger('keyup')}function vc_grid_exclude_dependency_callback(){var t=jQuery,n=t('.wpb_vc_param_value[name=exclude]',this.$content),o=n.data('vc-param-object');if(void 0===o)return!1;var l=t('select.wpb_vc_param_value[name="post_type"]',this.$content),s=l.val();o.source_data=function(r){return{query:{query:s,term:r.term}}},o.source_data_val=s,l.change(function(){s=t(this).val(),o.source_data_val!=s&&(o.source_data=function(r){return{query:{query:s,term:r.term}}},o.$el.data('uiAutocomplete').destroy(),o.$sortable_wrapper.find('.vc_data').remove(),o.render(),o.source_data_val=s)})}function vcGridFilterExcludeCallBack(){var s=jQuery,t,n,o,l;return(t=s('.wpb_vc_param_value[name=filter_source]',this.$content),l=t.val(),n=s('.wpb_vc_param_value[name=exclude_filter]',this.$content),void 0!==(o=n.data('vc-param-object')))&&void t.change(function(){var r=s(this);l!==r.val()&&o.clearValue(),o.source_data=function(){return{vc_filter_by:r.val()}}}).trigger('change')}function vcChartCustomColorDependency(){var t,n,o;t=jQuery,n=t('.wpb_vc_param_value[name=style]',this.$content),o=this.$content,n.on('change',function(){var l;l=t(this).val(),o.toggleClass('vc_chart-edit-form-custom-color','custom'===l)}),n.trigger('change')}function vc_wpnop(t){if(!t)return'';var l=!1,s=!1,n,o;return-1==t.indexOf('<pre')&&-1==t.indexOf('<script')||(l=!0,t=t.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(r){return r=r.replace(/<br ?\/?>(\r\n|\n)?/g,'<wp-temp-lb>'),r.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,'<wp-temp-lb>')})),-1!=t.indexOf('[caption')&&(s=!0,t=t.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(r){return r.replace(/<br([^>]*)>/g,'<wp-temp-br$1>').replace(/[\r\n\t]+/,'')})),n='blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|div|h[1-6]|p|fieldset',t=t.replace(new RegExp('\\s*</('+n+')>\\s*','g'),'</$1>\n'),t=t.replace(new RegExp('\\s*<((?:'+n+')(?: [^>]*)?)>','g'),'\n<$1>'),t=t.replace(/(<p [^>]+>.*?)<\/p>/g,'$1</p#>'),t=t.replace(/<div( [^>]*)?>\s*<p>/gi,'<div$1>\n\n'),t=t.replace(/\s*<p>/gi,''),t=t.replace(/\s*<\/p>\s*/gi,'\n\n'),t=t.replace(/\n[\s\u00a0]+\n/g,'\n\n'),t=t.replace(/\s*<br ?\/?>\s*/gi,'\n'),t=t.replace(/\s*<div/g,'\n<div'),t=t.replace(/<\/div>\s*/g,'</div>\n'),t=t.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,'\n\n[caption$1[/caption]\n\n'),t=t.replace(/caption\]\n\n+\[caption/g,'caption]\n\n[caption'),o='blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|pre|fieldset',t=t.replace(new RegExp('\\s*<((?:'+o+')(?: [^>]*)?)\\s*>','g'),'\n<$1>'),t=t.replace(new RegExp('\\s*</('+o+')>\\s*','g'),'</$1>\n'),t=t.replace(/<li([^>]*)>/g,'\t<li$1>'),-1!=t.indexOf('<hr')&&(t=t.replace(/\s*<hr( [^>]*)?>\s*/g,'\n\n<hr$1>\n\n')),-1!=t.indexOf('<object')&&(t=t.replace(/<object[\s\S]+?<\/object>/g,function(r){return r.replace(/[\r\n]+/g,'')})),t=t.replace(/<\/p#>/g,'</p>\n'),t=t.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,'\n$1'),t=t.replace(/^\s+/,''),t=t.replace(/[\s\u00a0]+$/,''),l&&(t=t.replace(/<wp-temp-lb>/g,'\n')),s&&(t=t.replace(/<wp-temp-br([^>]*)>/g,'<br$1>')),t}function vc_wpautop(t){var n=!1,o=!1;return-1!=t.indexOf('<object')&&(t=t.replace(/<object[\s\S]+?<\/object>/g,function(s){return s.replace(/[\r\n]+/g,'')})),t=t.replace(/<[^<>]+>/g,function(s){return s.replace(/[\r\n]+/g,' ')}),-1==t.indexOf('<pre')&&-1==t.indexOf('<script')||(n=!0,t=t.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(s){return s.replace(/(\r\n|\n)/g,'<wp-temp-lb>')})),-1!=t.indexOf('[caption')&&(o=!0,t=t.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(s){return s=s.replace(/<br([^>]*)>/g,'<wp-temp-br$1>'),s=s.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(r){return r.replace(/[\r\n\t]+/,' ')}),s.replace(/\s*\n\s*/g,'<wp-temp-br />')})),t+='\n\n',t=t.replace(/<br \/>\s*<br \/>/gi,'\n\n'),t=t.replace(/(<(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)(?: [^>]*)?>)/gi,'\n$1'),t=t.replace(/(<\/(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)>)/gi,'$1\n\n'),t=t.replace(/<hr( [^>]*)?>/gi,'<hr$1>\n\n'),t=t.replace(/\r\n|\r/g,'\n'),t=t.replace(/\n\s*\n+/g,'\n\n'),t=t.replace(/([\s\S]+?)\n\n/g,'<p>$1</p>\n'),t=t.replace(/<p>\s*?<\/p>/gi,''),t=t.replace(/<p>\s*(<\/?(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)(?: [^>]*)?>)\s*<\/p>/gi,'$1'),t=t.replace(/<p>(<li.+?)<\/p>/gi,'$1'),t=t.replace(/<p>\s*<blockquote([^>]*)>/gi,'<blockquote$1><p>'),t=t.replace(/<\/blockquote>\s*<\/p>/gi,'</p></blockquote>'),t=t.replace(/<p>\s*(<\/?(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)(?: [^>]*)?>)/gi,'$1'),t=t.replace(/(<\/?(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)(?: [^>]*)?>)\s*<\/p>/gi,'$1'),t=t.replace(/\s*\n/gi,'<br />\n'),t=t.replace(/(<\/?(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)[^>]*>)\s*<br \/>/gi,'$1'),t=t.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,'$1'),t=t.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,'[caption$1[/caption]'),t=t.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(s,r,d){return d.match(/<p( [^>]*)?>/)?s:r+'<p>'+d+'</p>'}),n&&(t=t.replace(/<wp-temp-lb>/g,'\n')),o&&(t=t.replace(/<wp-temp-br([^>]*)>/g,'<br$1>')),t}function vcAddShortcodeDefaultParams(t){var n=t.get('params'),o=t.get('preset');n=_.extend({},vc.getDefaults(t.get('shortcode')),n),o&&vc_all_presets[o]&&(n=vc_all_presets[o],void 0!==vc.frame_window&&vc_all_presets[o].css&&vc.frame_window.vc_iframe.setCustomShortcodeCss(vc_all_presets[o].css)),t.set({params:n},{silent:!0})}function vc_globalHashCode(t){return'string'!=typeof t&&(t=JSON.stringify(t)),t.length?t.split('').reduce(function(n,o){return(n=(n<<5)-n+o.charCodeAt(0))&n},0):0}function vcChartParamAfterAddCallback(t,n){if('new'!==n&&'clone'!==n||t.find('.vc_control.column_toggle').click(),'new'===n){var o,l,s,r,d,u;for(d=['white','black'],l=t.find('[name=values_color]'),s=l.find('option'),o=0;;){if(100<o++)break;if(r=Math.floor(Math.random()*s.length),-1===jQuery.inArray(s.eq(r).val(),d)){s.eq(r).prop('selected',!0),l.change();break}}u=['#5472d2','#00c1cf','#fe6c61','#8d6dc4','#4cadc9','#cec2ab','#50485b','#75d69c','#f7be68','#5aa1e3','#6dab3c','#f4524d','#f79468','#b97ebb','#ebebeb','#f7f7f7','#0088cc','#58b9da','#6ab165','#ff9900','#ff675b','#555555'],r=Math.floor(Math.random()*u.length),t.find('[name=values_custom_color]').val(u[r]).change()}}function vcEscapeHtml(t){var n={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'};return null===t||void 0===t?'':t.replace(/[&<>"']/g,function(o){return n[o]})}function vc_slugify(t){return t.toLowerCase().replace(/[^\w ]+/g,'').replace(/ +/g,'-')}if(!window.vc)var vc={};!function(){vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var t=/(.)^/,n={'\'':'\'','\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},o=/\\|'|\r|\n|\u2028|\u2029/g,l=function(s){return'\\'+n[s]};vc.template=function(s,r){r=_.defaults({},r,vc.templateOptions.default);var d=RegExp([(r.escape||t).source,(r.interpolate||t).source,(r.evaluate||t).source].join('|')+'|$','g'),u=0,g='__p+=\'';s.replace(d,function(w,k,C,S,T){return g+=s.slice(u,T).replace(o,l),u=T+w.length,k?g+='\'+\n((__t=('+k+'))==null?\'\':_.escape(__t))+\n\'':C?g+='\'+\n((__t=('+C+'))==null?\'\':__t)+\n\'':S&&(g+='\';\n'+S+'\n__p+=\''),w}),g+='\';\n',r.variable||(g='with(obj||{}){\n'+g+'}\n'),g='var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\n'+g+'return __p;\n';var h;try{h=new Function(r.variable||'obj','_',g)}catch(w){throw w.source=g,w}var f=function(w){return h.call(this,w,_)};return f.source='function('+(r.variable||'obj')+'){\n'+g+'}',f}}(),function(t){'use strict';_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:'wpb_csseditor',ace_enabled:!1,initialize:function(n){n&&0<n.length&&(this.sel=n),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(n){return this.aceEnabled()?this.setEditorAce(n):this.setEditorTextarea(n),this.$editor},focus:function(){if(this.aceEnabled()){this.$editor.focus();var n=this.$editor.session.getLength();this.$editor.gotoLine(n,this.$editor.session.getLine(n-1).length)}else this.$editor.focus()},setEditorAce:function(n){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode('ace/mode/css'),this.$editor.setTheme('ace/theme/chrome')),this.$editor.setValue(n),this.$editor.clearSelection(),this.$editor.focus();var o=this.$editor.getSession().getLength();return this.$editor.gotoLine(o,this.$editor.getSession().getLine(o-1).length),this.$editor},setEditorTextarea:function(n){return this.$editor||(this.$editor=t('<textarea></textarea>').css({width:'100%',height:'100%',minHeight:'300px'}),t('#'+this.sel).empty().append(this.$editor).css({overflowLeft:'hidden',width:'100%',height:'100%'})),this.$editor.val(n),this.$editor.focus(),this.$editor.parent().css({overflow:'auto'}),this.$editor},setSize:function(){var n=t(window).height()-380;this.aceEnabled()?t('#'+this.sel).css({height:n,minHeight:n}):(this.$editor.parent().css({height:n,minHeight:n}),this.$editor.css({height:'98%',width:'98%'}))},setSizeResizable:function(){var s=t('#'+this.sel),n,o,l;o=s.offset().top,l=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top,n=l-o-70,this.aceEnabled()?s.css({height:n,minHeight:n}):(this.$editor.parent().css({height:n,minHeight:n}),this.$editor.css({height:'98%',width:'98%'}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(t,n,o){'use strict';n.View.vcExtendUI=function(s){var r=this.extend(s);return r.prototype._vcUIEventsHooks||(r.prototype._vcUIEventsHooks=[]),s.uiEvents&&r.prototype._vcUIEventsHooks.push(s.uiEvents),r},o.View=n.View.extend({delegateEvents:function(){o.View.__super__.delegateEvents.call(this),this._vcUIEventsHooks&&this._vcUIEventsHooks.length&&t.each(this._vcUIEventsHooks,function(s){t.isObject(s)&&t.each(s,function(r,d){t.isString(r)&&t.each(r.split(/\s+/),function(u){this.on(d,this[u],this)},this)},this)},this)}})}(_,Backbone,vc),function(t){'use strict';_.isUndefined(window.vc)&&(window.vc={}),vc.showSpinner=function(){t('#vc_logo').addClass('vc_ui-wp-spinner')},vc.hideSpinner=function(){t('#vc_logo').removeClass('vc_ui-wp-spinner')},t(document).ajaxSend(function(n,o,l){l&&l.data&&'string'==typeof l.data&&l.data.match(/vc_inline=true/)&&vc.showSpinner()}).ajaxStop(function(){vc.hideSpinner()}),vc.active_panel=!1,vc.closeActivePanel=function(n){return!!this.active_panel&&void(n&&vc.active_panel.model&&vc.active_panel.model.get('id')===n.get('id')?(vc.active_panel.model=null,this.active_panel.hide()):n||(vc.active_panel.model=null,this.active_panel.hide()))},vc.activePanelName=function(){return this.active_panel&&this.active_panel.panelName?this.active_panel.panelName:null},vc.updateSettingsBadge=function(){var n=vc.$custom_css.val();n&&''!==n.trim()?t('#vc_post-css-badge').show():t('#vc_post-css-badge').hide()},vc.ModalView=Backbone.View.extend({message_box_timeout:!1,events:{'hidden.bs.modal':'hide','shown.bs.modal':'shown'},initialize:function(){_.bindAll(this,'setSize','hide')},setSize:function(){var n=t(window).height()-150;this.$content.css('maxHeight',n),this.trigger('setSize')},render:function(){return t(window).bind('resize.ModalView',this.setSize),this.setSize(),vc.closeActivePanel(),this.$el.modal('show'),this},showMessage:function(n,o){this.message_box_timeout&&this.$el.find('.vc_message').remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var l=t('<div class="vc_message type-'+o+'"></div>');this.$el.find('.vc_modal-body').prepend(l),l.text(n).fadeIn(),this.message_box_timeout=window.setTimeout(function(){l.remove()},6e3)},hide:function(){t(window).unbind('resize.ModalView')},shown:function(){}}),vc.element_start_index=0,vc.AddElementBlockView=vc.ModalView.extend({el:t('#vc_add-element-dialog'),prepend:!1,builder:'',events:{'click .vc_shortcode-link':'createElement','keyup #vc_elements_name_filter':'filterElements','hidden.bs.modal':'hide','show.bs.modal':'buildFiltering','click .wpb-content-layouts-container [data-filter]':'filterElements','shown.bs.modal':'shown'},buildFiltering:function(){this.do_render=!1;var n,o,l;n='[data-vc-ui-element="add-element-button"]',o=this.model?this.model.get('shortcode'):'vc_column',l=this._getNotIn(o),t('#vc_elements_name_filter').val(''),this.$content.addClass('vc_filter-all'),this.$content.attr('data-vc-ui-filter','*');var s=vc.getMapped(o),r=o&&!_.isUndefined(s.as_parent)&&s.as_parent;if(_.isObject(r)){var d=[];_.isString(r.only)&&d.push(_.reduce(r.only.replace(/\s/,'').split(','),function(u,g){return u+(_.isEmpty(u)?'':',')+'[data-element="'+g.trim()+'"]'},'')),_.isString(r.except)&&d.push(_.reduce(r.except.replace(/\s/,'').split(','),function(u,g){return u+':not([data-element="'+g.trim()+'"])'},'')),n+=d.join(',')}else l&&(n=l);o&&!_.isUndefined(s.allowed_container_element)&&(s.allowed_container_element?_.isString(s.allowed_container_element)&&(n+=':not([data-is-container=true]), [data-element='+s.allowed_container_element+']'):n+=':not([data-is-container=true])'),this.$buttons.removeClass('vc_visible').addClass('vc_inappropriate'),t(n,this.$content).removeClass('vc_inappropriate').addClass('vc_visible'),this.hideEmptyFilters()},hideEmptyFilters:function(){this.$el.find('.vc_filter-content-elements .active').removeClass('active'),this.$el.find('.vc_filter-content-elements > :first').addClass('active');var n=this;this.$el.find('[data-filter]').each(function(){t(t(this).data('filter')+'.vc_visible:not(.vc_inappropriate)',n.$content).length?t(this).parent().show():t(this).parent().hide()})},render:function(n,o){return this.builder=new vc.ShortcodesBuilder,this.prepend=!!_.isBoolean(o)&&o,this.place_after_id=!!_.isString(o)&&o,this.model=!!_.isObject(n)&&n,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=t('[data-vc-ui-element="add-element-button"]',this.$content),this.preventDoubleExecution=!1,vc.AddElementBlockView.__super__.render.call(this)},hide:function(){this.do_render&&(this.show_settings&&this.showEditForm(),this.exit())},showEditForm:function(){vc.edit_element_block_view.render(this.builder.last())},exit:function(){this.builder.render()},createElement:function(n){var o,l,s,r,d,u,g;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0,this.do_render=!0,n.preventDefault(),o=t(n.currentTarget),l=o.data('tag'),s={},d={},r={width:'1/1'},!1===this.model&&'vc_row'!==l?(this.builder.create({shortcode:'vc_row',params:s}).create({shortcode:'vc_column',parent_id:this.builder.lastID(),params:r}),this.model=this.builder.last()):!1!==this.model&&'vc_row'===l&&(l+='_inner');var h={shortcode:l,parent_id:!!this.model&&this.model.get('id'),params:'vc_row_inner'===l?d:{}};if(this.prepend){h.order=0;var f=vc.shortcodes.findWhere({parent_id:this.model.get('id')});f&&(h.order=f.get('order')-1),vc.activity='prepend'}else this.place_after_id&&(h.place_after_id=this.place_after_id);for(this.builder.create(h),g=this.builder.models.length-1;0<=g;g--)this.builder.models[g].get('shortcode');'vc_row'===l?this.builder.create({shortcode:'vc_column',parent_id:this.builder.lastID(),params:r}):'vc_row_inner'==l&&(r={width:'1/1'},this.builder.create({shortcode:'vc_column_inner',parent_id:this.builder.lastID(),params:r}));var w=vc.getMapped(l);if(_.isString(w.default_content)&&w.default_content.length){var k=this.builder.parse({},w.default_content,this.builder.last().toJSON());_.each(k,function(C){C.default_content=!0,this.builder.create(C)},this)}this.show_settings=!(_.isBoolean(w.show_settings_on_create)&&!1===w.show_settings_on_create),u=this,this.$el.one('hidden.bs.modal',function(){u.preventDoubleExecution=!1}).modal('hide')}},_getNotIn:_.memoize(function(n){return'[data-vc-ui-element="add-element-button"]:not('+_.reduce(vc.map,function(o,l){var s=_.isEmpty(o)?'':',';return _.isObject(l.as_child)?(_.isString(l.as_child.only)&&(_.contains(l.as_child.only.replace(/\s/,'').split(','),n)||(o+=s+'[data-element='+l.base+']')),_.isString(l.as_child.except)&&_.contains(l.as_child.except.replace(/\s/,'').split(','),n)&&(o+=s+'[data-element='+l.base+']')):!1===l.as_child&&(o+=s+'[data-element='+l.base+']'),o},'')+')'}),filterElements:function(n){n.stopPropagation(),n.preventDefault();var o=t(n.currentTarget),l='[data-vc-ui-element="add-element-button"]',s=t('#vc_elements_name_filter').val();if(this.$content.removeClass('vc_filter-all'),o.is('[data-filter]')){t('.wpb-content-layouts-container .isotope-filter .active',this.$content).removeClass('active'),o.parent().addClass('active');var r=o.data('filter');l+=r,'*'===r?this.$content.addClass('vc_filter-all'):this.$content.removeClass('vc_filter-all'),this.$content.attr('data-vc-ui-filter',r.replace('.js-category-','')),t('#vc_elements_name_filter').val('')}else 0<s.length?(l+=':containsi(\''+s+'\'):not(\'.vc_element-deprecated\')',t('.wpb-content-layouts-container .isotope-filter .active',this.$content).removeClass('active'),this.$content.attr('data-vc-ui-filter','name:'+s)):s.length||(t('.wpb-content-layouts-container .isotope-filter [data-filter="*"]').parent().addClass('active'),this.$content.attr('data-vc-ui-filter','*'),this.$content.addClass('vc_filter-all'));t('.vc_visible',this.$content).removeClass('vc_visible'),t(l,this.$content).addClass('vc_visible')},shown:function(){vc.is_mobile||t('#vc_elements_name_filter').focus()}}),vc.AddElementBlockViewBackendEditor=vc.AddElementBlockView.extend({render:function(n,o){return this.prepend=!!_.isBoolean(o)&&o,this.place_after_id=!!_.isString(o)&&o,this.model=!!_.isObject(n)&&n,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=t('[data-vc-ui-element="add-element-button"]',this.$content),vc.AddElementBlockView.__super__.render.call(this)},createElement:function(n){var o,l,s,r,d;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0;var u,g,h;_.isObject(n)&&n.preventDefault(),this.do_render=!0;var f=t(n.currentTarget).data('tag');l={},s={width:'1/1'},!1===this.model?(h=vc.shortcodes.create({shortcode:'vc_row',params:l}),g=vc.shortcodes.create({shortcode:'vc_column',params:s,parent_id:h.id,root_id:h.id}),u='vc_row'===f?h:vc.shortcodes.create({shortcode:f,parent_id:g.id,root_id:h.id})):'vc_row'===f?(r={},d={width:'1/1'},h=vc.shortcodes.create({shortcode:'vc_row_inner',params:r,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),u=vc.shortcodes.create({shortcode:'vc_column_inner',params:d,parent_id:h.id,root_id:h.id})):u=vc.shortcodes.create({shortcode:f,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get('root_id')}),this.show_settings=!(_.isBoolean(vc.getMapped(f).show_settings_on_create)&&!1===vc.getMapped(f).show_settings_on_create),this.model=u,this.model.get('shortcode'),o=this,this.$el.one('hidden.bs.modal',function(){o.preventDoubleExecution=!1}).modal('hide')}},showEditForm:function(){vc.edit_element_block_view.render(this.model)},exit:function(){},getFirstPositionIndex:function(){return vc.element_start_index-=1,vc.element_start_index}}),vc.PanelView=vc.View.extend({mediaSizeClassPrefix:'vc_media-',customMediaQuery:!0,panelName:'panel',draggable:!1,$body:!1,$tabs:!1,$content:!1,events:{'click [data-dismiss=panel]':'hide','mouseover [data-transparent=panel]':'addOpacity','click [data-transparent=panel]':'toggleOpacity','mouseout [data-transparent=panel]':'removeOpacity','click .vc_panel-tabs-link':'changeTab'},_vcUIEventsHooks:[{resize:'setResize'}],options:{startTab:0},clicked:!1,showMessageDisabled:!0,initialize:function(){this.clicked=!1,this.$el.removeClass('vc_panel-opacity'),this.$body=t('body'),this.$content=this.$el.find('.vc_panel-body'),_.bindAll(this,'setSize','fixElContainment','changeTab','setTabsSize'),this.on('show',this.setSize,this),this.on('setSize',this.setResize,this),this.on('render',this.resetMinimize,this)},toggleOpacity:function(){this.clicked=!this.clicked},addOpacity:function(){this.clicked||this.$el.addClass('vc_panel-opacity')},removeOpacity:function(){this.clicked||this.$el.removeClass('vc_panel-opacity')},message_box_timeout:!1,init:function(){},render:function(){return this.trigger('render'),this.trigger('afterRender'),this},show:function(){if(!this.$el.hasClass('vc_active')){vc.closeActivePanel(),this.init(),vc.active_panel=this,this.clicked=!1,this.$el.removeClass('vc_panel-opacity');var n=this.$el.find('.vc_panel-tabs');n.length&&(this.$tabs=n,this.setTabs()),this.$el.addClass('vc_active'),this.draggable?this.initDraggable():t(window).trigger('resize'),this.fixElContainment(),this.trigger('show')}},hide:function(n){n&&n.preventDefault(),this.model&&(this.model=null),vc.active_panel=!1,this.$el.removeClass('vc_active')},content:function(){return this.$el.find('.panel-body')},setResize:function(){this.customMediaQuery&&this.setMediaSizeClass()},setMediaSizeClass:function(){var n,o;n=this.$el.width(),o={xs:!0,sm:!1,md:!1,lg:!1},525<=n&&(o.sm=!0),745<=n&&(o.md=!0),945<=n&&(o.lg=!0),_.each(o,function(l,s){l?this.$el.addClass(this.mediaSizeClassPrefix+s):this.$el.removeClass(this.mediaSizeClassPrefix+s)},this)},fixElContainment:function(){this.$body||(this.$body=t('body'));var n=this.$el.width(),o=this.$body.width(),l=this.$body.height(),s=[20-n,0,o-20,l-30],r=this.$el.position(),d={};r.left<s[0]&&(d.left=s[0]),0>r.top&&(d.top=0),r.left>s[2]&&(d.left=s[2]),r.top>s[3]&&(d.top=s[3]),this.$el.css(d),this.trigger('fixElContainment'),this.setSize()},initDraggable:function(){this.$el.draggable({iframeFix:!0,handle:'.vc_panel-heading',start:this.fixElContainment,stop:this.fixElContainment}),this.draggable=!0},setSize:function(){this.trigger('setSize')},setTabs:function(){this.$tabs.length&&(this.$tabs.find('.vc_panel-tabs-control').removeClass('vc_active').eq(this.options.startTab).addClass('vc_active'),this.$tabs.find('.vc_panel-tab').removeClass('vc_active').eq(this.options.startTab).addClass('vc_active'),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabs&&this.$tabs.parents('.vc_with-tabs.vc_panel-body').css('margin-top',this.$tabs.find('.vc_panel-tabs-menu').outerHeight())},changeTab:function(n){if(n&&n.preventDefault&&n.preventDefault(),n.target&&this.$tabs){var o=t(n.target);this.$tabs.find('.vc_active').removeClass('vc_active'),o.parent().addClass('vc_active'),this.$el.find(o.data('target')).addClass('vc_active'),window.setTimeout(this.setTabsSize,100)}},showMessage:function(n,o){if(this.showMessageDisabled)return!1;this.message_box_timeout&&this.$el.find('.vc_panel-message').remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var l=t('<div class="vc_panel-message type-'+o+'"></div>').appendTo(this.$el.find('.vc_ui-panel-content-container'));l.text(n).fadeIn(),this.message_box_timeout=window.setTimeout(function(){l.remove()},6e3)},isVisible:function(){return this.$el.is(':visible')},resetMinimize:function(){this.$el.removeClass('vc_panel-opacity')}}),vc.PostSettingsPanelView=vc.PanelView.extend({events:{'click [data-save=true]':'save','click [data-dismiss=panel]':'hide','click [data-transparent=panel]':'toggleOpacity','mouseover [data-transparent=panel]':'addOpacity','mouseout [data-transparent=panel]':'removeOpacity'},saved_css_data:'',saved_title:'',$title:!1,editor:!1,post_settings_editor:!1,initialize:function(){vc.$custom_css=t('#vc_post-custom-css'),this.saved_css_data=vc.$custom_css.val(),this.saved_title=vc.title,this.initEditor(),this.$body=t('body'),_.bindAll(this,'setSize','fixElContainment'),this.on('show',this.setSize,this),this.on('setSize',this.setResize,this),this.on('render',this.resetMinimize,this)},initEditor:function(){this.editor=new Vc_postSettingsEditor},render:function(){return this.trigger('render'),this.$title=this.$el.find('#vc_page-title-field'),this.$title.val(vc.title),this.setEditor(),this.trigger('afterRender'),this},setEditor:function(){this.editor.setEditor(vc.$custom_css.val())},setSize:function(){this.editor.setSize(),this.trigger('setSize')},save:function(){if(this.$title){var n=this.$title.val();n!=vc.title&&vc.frame.setTitle(n)}this.setAlertOnDataChange(),vc.$custom_css.val(this.editor.getValue()),vc.frame_window&&vc.frame_window.vc_iframe.loadCustomCss(vc.$custom_css.val()),vc.updateSettingsBadge(),this.showMessage(window.i18nLocale.css_updated,'success'),this.trigger('save')},setAlertOnDataChange:function(){this.saved_css_data===this.editor.getValue()?this.$title&&this.saved_title!==this.$title.val()&&vc.setDataChanged():vc.setDataChanged()}}),vc.PostSettingsPanelViewBackendEditor=vc.PostSettingsPanelView.extend({render:function(){return this.trigger('render'),this.setEditor(),this.trigger('afterRender'),this},setAlertOnDataChange:function(){vc.saved_custom_css!==this.editor.getValue()&&window.tinymce&&(window.switchEditors.go('content','tmce'),window.setTimeout(function(){window.tinymce.get('content').isNotDirty=!1},1e3))},save:function(){vc.PostSettingsPanelViewBackendEditor.__super__.save.call(this),this.hide()}}),vc.TemplatesEditorPanelView=vc.PanelView.extend({events:{'click [data-dismiss=panel]':'hide','click [data-transparent=panel]':'toggleOpacity','mouseover [data-transparent=panel]':'addOpacity','mouseout [data-transparent=panel]':'removeOpacity','click .wpb_remove_template':'removeTemplate','click [data-template_id]':'loadTemplate','click [data-template_name]':'loadDefaultTemplate','click #vc_template-save':'saveTemplate'},render:function(){this.trigger('render'),this.$name=t('#vc_template-name'),this.$list=t('#vc_template-list');var n=t('#vc_tabs-templates');return n.find('.vc_edit-form-tab-control').removeClass('vc_active').eq(0).addClass('vc_active'),n.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass('vc_active').eq(0).addClass('vc_active'),n.find('.vc_edit-form-link').click(function(o){o.preventDefault();var l=t(this);n.find('.vc_active').removeClass('vc_active'),l.parent().addClass('vc_active'),t(l.attr('href')).addClass('vc_active')}),this.trigger('afterRender'),this},removeTemplate:function(n){n&&n.preventDefault();var o=t(n.currentTarget),l=o.closest('[data-vc-ui-element="template-title"]').text();confirm(window.i18nLocale.confirm_deleting_template.replace('{template_name}',l))&&(o.closest('[data-vc-ui-element="template"]').remove(),this.$list.html(window.i18nLocale.loading),t.ajax({type:'POST',url:window.ajaxurl,data:{action:'wpb_delete_template',template_id:o.attr('rel'),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(s){this.$list.html(s)}))},loadTemplate:function(n){n&&n.preventDefault();var o=t(n.currentTarget);t.ajax({type:'POST',url:vc.frame_window.location.href,data:{action:'vc_frontend_template',template_id:o.data('template_id'),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(l){var s,r;_.each(t(l),function(d){if('vc_template-data'===d.id)try{r=JSON.parse(d.innerHTML)}catch(u){vcConsoleLog(u,'catching template data error')}'vc_template-html'===d.id&&(s=d.innerHTML)}),s&&r&&vc.builder.buildFromTemplate(s,r),this.showMessage(window.i18nLocale.template_added,'success'),vc.closeActivePanel()})},ajaxData:function(n){return{action:'vc_frontend_default_template',template_name:n.data('template_name'),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadDefaultTemplate:function(n){n&&n.preventDefault();var o=t(n.currentTarget);t.ajax({type:'POST',url:vc.frame_window.location.href,data:this.ajaxData(o),context:this}).done(function(l){var s,r;_.each(t(l),function(d){if('vc_template-data'===d.id)try{r=JSON.parse(d.innerHTML)}catch(u){vcConsoleLog(u,'catching template data error')}'vc_template-html'===d.id&&(s=d.innerHTML)}),s&&r&&vc.builder.buildFromTemplate(s,r),this.showMessage(window.i18nLocale.template_added,'success')})},saveTemplate:function(n){n.preventDefault();var s=this.$name.val(),o,l;if(_.isString(s)&&s.length){if(l=this.getPostContent(),!l.trim().length)return this.showMessage(window.i18nLocale.template_is_empty,'error'),!1;o={action:'wpb_save_template',template:l,template_name:s,frontend:!0,vc_inline:!0,_vcnonce:window.vcAdminNonce},this.$name.val(''),this.showMessage(window.i18nLocale.template_save,'success'),this.reloadTemplateList(o)}else this.showMessage(window.i18nLocale.please_enter_templates_name,'error')},reloadTemplateList:function(n){this.$list.html(window.i18nLocale.loading).load(window.ajaxurl,n)},getPostContent:function(){return vc.builder.getContent()}}),vc.TemplatesEditorPanelViewBackendEditor=vc.TemplatesEditorPanelView.extend({ajaxData:function(n){return{action:'vc_backend_template',template_id:n.attr('data-template_id'),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadTemplate:function(n){n.preventDefault();var o=t(n.currentTarget);t.ajax({type:'POST',url:window.ajaxurl,data:this.ajaxData(o),context:this}).done(function(l){_.each(vc.filters.templates,function(s){l=s(l)}),vc.storage.append(l),vc.shortcodes.fetch({reset:!0}),vc.closeActivePanel()})},loadDefaultTemplate:function(n){n.preventDefault();var o=t(n.currentTarget);t.ajax({type:'POST',url:window.ajaxurl,data:{action:'vc_backend_default_template',template_name:o.attr('data-template_name'),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(l){_.each(vc.filters.templates,function(s){l=s(l)}),vc.storage.append(l),vc.shortcodes.fetch({reset:!0})})},getPostContent:function(){return vc.storage.getContent()}}),vc.TemplatesPanelViewBackend=vc.PanelView.extend({$name:!1,$list:!1,template_load_action:'vc_backend_load_template',templateLoadPreviewAction:'vc_load_template_preview',save_template_action:'vc_save_template',delete_template_action:'vc_delete_template',appendedTemplateType:'my_templates',appendedTemplateCategory:'my_templates',appendedCategory:'my_templates',appendedClass:'my_templates',loadUrl:window.ajaxurl,events:t.extend(vc.PanelView.prototype.events,{'click .vc_template-save-btn':'saveTemplate','click [data-template_id] [data-template-handler]':'loadTemplate','click .vc_template-delete-icon':'removeTemplate'}),initialize:function(){_.bindAll(this,'checkInput','saveTemplate'),vc.TemplatesPanelViewBackend.__super__.initialize.call(this)},render:function(){return this.$el.css('left',(t(window).width()-this.$el.width())/2),this.$name=this.$el.find('[data-js-element="vc-templates-input"]'),this.$name.off('keypress').on('keypress',this.checkInput),this.$list=this.$el.find('.vc_templates-list-my_templates'),vc.TemplatesPanelViewBackend.__super__.render.call(this)},saveTemplate:function(n){n&&n.preventDefault&&n.preventDefault();var s=this.$name.val(),r=this,o,l;return _.isString(s)&&s.length?(l=this.getPostContent(),l.trim().length?(o={action:this.save_template_action,template:l,template_name:s,vc_inline:!0,_vcnonce:window.vcAdminNonce},void this.setButtonMessage(void 0,void 0,!0).reloadTemplateList(o,function(){r.$name.val('').change()},function(){r.showMessage(window.i18nLocale.template_save_error,'error'),r.clearButtonMessage()})):(this.showMessage(window.i18nLocale.template_is_empty,'error'),!1)):(this.showMessage(window.i18nLocale.please_enter_templates_name,'error'),!1)},checkInput:function(n){if(13===n.which)return this.saveTemplate(),!1},removeTemplate:function(n){n&&n.preventDefault(),n.stopPropagation();var o=t(n.target),l=o.closest('[data-template_id]'),s=l.find('[data-vc-ui-element="template-title"]').text();if(confirm(window.i18nLocale.confirm_deleting_template.replace('{template_name}',s))){var r=l.data('template_id'),d=l.data('template_type'),u=l.data('template_action');l.remove(),t.ajax({type:'POST',url:window.ajaxurl,data:{action:u||this.delete_template_action,template_id:r,template_type:d,vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(){this.showMessage(window.i18nLocale.template_removed,'success'),vc.events.trigger('templates:delete',{id:r,type:d})})}},reloadTemplateList:function(n,o,l){var s=this;t.ajax({type:'POST',url:window.ajaxurl,data:n,context:this}).done(function(r){s.filter=!1,s.$list||(s.$list=s.$el.find('.vc_templates-list-my_templates')),s.$list.prepend(t(r)),'function'==typeof o&&o(r)}).error('function'==typeof l?l:function(){})},getPostContent:function(){return vc.shortcodes.stringify('template')},loadTemplate:function(n){n.preventDefault(),n.stopPropagation();var o=t(n.target).closest('[data-template_id][data-template_type]');t.ajax({type:'POST',url:this.loadUrl,data:{action:this.template_load_action,template_unique_id:o.data('template_id'),template_type:o.data('template_type'),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(this.renderTemplate)},renderTemplate:function(n){var o;_.each(vc.filters.templates,function(l){n=l(n)}),o=vc.storage.parseContent({},n),_.each(o,function(l){vc.shortcodes.create(l)}),vc.closeActivePanel()},buildTemplatePreview:function(n){n&&n.preventDefault&&n.preventDefault();try{var l=t(n.currentTarget),s=l.closest('[data-template_id]'),o;if(s.hasClass('vc_active')||s.hasClass('vc_loading'))l.vcAccordion('collapseTemplate');else{var r=s.find('[data-js-content]'),d=0<r.children().length;if(this.$content=r,this.$content.find('iframe').length)return l.vcAccordion('collapseTemplate'),!0;var u=this;l.vcAccordion('collapseTemplate',function(){var g=s.data('template_id'),h=s.data('template_type');if(g&&!d){var f='?';-1<window.ajaxurl.indexOf('?')&&(f='&'),o=window.ajaxurl+f+t.param({action:u.templateLoadPreviewAction,template_unique_id:g,template_type:h,vc_inline:!0,post_id:t('#post_ID').val(),_vcnonce:window.vcAdminNonce}),l.find('i').addClass('vc_ui-wp-spinner'),u.$content.html('<iframe style="width: 100%;" data-vc-template-preview-frame="'+g+'"></iframe>');var w=u.$content.find('[data-vc-template-preview-frame]');w.attr('src',o),s.addClass('vc_loading'),w.load(function(){s.removeClass('vc_loading'),l.find('i').removeClass('vc_ui-wp-spinner')})}})}}catch(g){window.console&&window.console.error&&window.console.error(g),this.showMessage('Failed to build preview','error')}},setTemplatePreviewSize:function(n){var o=this.$content.find('iframe');0<o.length&&(o=o[0],void 0===n&&(o.height=o.contentWindow.document.body.offsetHeight,n=o.contentWindow.document.body.scrollHeight),o.height=n+'px')}}),vc.TemplatesPanelViewFrontend=vc.TemplatesPanelViewBackend.extend({template_load_action:'vc_frontend_load_template',loadUrl:!1,initialize:function(){this.loadUrl=vc.$frame.attr('src'),vc.TemplatesPanelViewFrontend.__super__.initialize.call(this)},render:function(){return vc.TemplatesPanelViewFrontend.__super__.render.call(this)},renderTemplate:function(n){var o,l;_.each(t(n),function(s){if('vc_template-data'===s.id)try{l=JSON.parse(s.innerHTML)}catch(r){vcConsoleLog(r)}'vc_template-html'===s.id&&(o=s.innerHTML)}),o&&l&&vc.builder.buildFromTemplate(o,l)?this.showMessage(window.i18nLocale.template_added_with_id,'error'):this.showMessage(window.i18nLocale.template_added,'success'),vc.closeActivePanel()}}),vc.RowLayoutEditorPanelView=vc.PanelView.extend({events:{'click [data-dismiss=panel]':'hide','click [data-transparent=panel]':'toggleOpacity','mouseover [data-transparent=panel]':'addOpacity','mouseout [data-transparent=panel]':'removeOpacity','click .vc_layout-btn':'setLayout','click #vc_row-layout-update':'updateFromInput'},_builder:!1,render:function(n){return this.$input=t('#vc_row-layout'),n&&(this.model=n),this.addCurrentLayout(),this.resetMinimize(),vc.column_trig_changes=!0,this},builder:function(){return this._builder||(this._builder=new vc.ShortcodesBuilder),this._builder},addCurrentLayout:function(){vc.shortcodes.sort();var n=_.map(vc.shortcodes.where({parent_id:this.model.get('id')}),function(o){var l=o.getParam('width');return l||'1/1'},'',this).join(' + ');this.$input.val(n)},isBuildComplete:function(){return this.builder().isBuildComplete()},setLayout:function(n){if(n&&n.preventDefault(),!this.isBuildComplete())return!1;var o=t(n.currentTarget),l=o.attr('data-cells'),s=this.model.view.convertRowColumns(l,this.builder());this.$input.val(s.join(' + '))},updateFromInput:function(n){if(n&&n.preventDefault(),!this.isBuildComplete())return!1;var l=this.$input.val(),o;!1===(o=this.validateCellsList(l))?window.alert(window.i18nLocale.wrong_cells_layout):this.model.view.convertRowColumns(o,this.builder())},validateCellsList:function(n){var r=[],d=n.replace(/\s/g,'').split('+'),o,l,s;return!(1e3<=_.reduce(_.map(d,function(u){if(u.match(/^[vc\_]{0,1}span\d{1,2}$/)){var g=vc_convert_column_span_size(u);return!1===g?1e3:(o=g.split(/\//),r.push(o[0]+''+o[1]),12*parseInt(o[0],10)/parseInt(o[1],10))}return u.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(o=u.split(/\//),l=parseInt(o[0],10),0!=12%(s=parseInt(o[1],10))||l>s?1e3:(r.push(l+''+o[1]),12*l/s)):1e3}),function(u,g){return g+=u},0))&&r.join('_')}}),vc.RowLayoutEditorPanelViewBackend=vc.RowLayoutEditorPanelView.extend({builder:function(){return this.builder||(this.builder=vc.storage),this.builder},isBuildComplete:function(){return!0},setLayout:function(n){n&&n.preventDefault();var o=t(n.currentTarget),l=o.attr('data-cells'),s=this.model.view.convertRowColumns(l);this.$input.val(s.join(' + '))}}),t(window).on('orientationchange',function(){vc.active_panel&&vc.active_panel.$el.css({top:'',left:'auto',height:'auto',width:'auto'})}),t(window).bind('resize.fixElContainment',function(){vc.active_panel&&vc.active_panel.fixElContainment&&vc.active_panel.fixElContainment()}),t('body').on('keyup change input','[data-vc-disable-empty]',function(){var n=t(this),o=t(n.data('vcDisableEmpty'));n.val().length?o.removeProp('disabled'):o.prop('disabled',!0)})}(window.jQuery),function(t){'use strict';var n,o,l;n=function(s,r){var d=this;this.options=r,this.$element=t(s),this.$dropdownContainer=this.$element.find(this.options.dropdownContainerSelector),this.$dropdown=this.$dropdownContainer.find(this.options.dropdownSelector),this.options.delayInit?(d.$element.addClass(this.options.initializingClass),setTimeout(function(){d.options.autoRefresh||d.refresh(),d.moveTabs(),d.$element.removeClass(d.options.initializingClass)},d.options.delayInitTime)):(this.options.autoRefresh||this.refresh(),this.moveTabs()),t(window).on('resize',t.proxy(this.moveTabs,this)),this.$dropdownContainer.on('click.vc.tabsLine',t.proxy(this.checkDropdownContainerActive,this))},n.DEFAULTS={initializingClass:'vc_initializing',delayInit:!1,delayInitTime:1e3,activeClass:'vc_active',visibleClass:'vc_visible',dropdownContainerSelector:'[data-vc-ui-element="panel-tabs-line-toggle"]',dropdownSelector:'[data-vc-ui-element="panel-tabs-line-dropdown"]',tabSelector:'>li:not([data-vc-ui-element="panel-tabs-line-toggle"])',dropdownTabSelector:'li',freeSpaceOffset:5,autoRefresh:!1,showDevInfo:!1},n.prototype.refresh=function(){var r=this,s;return r.tabs=[],r.dropdownTabs=[],r.$element.find(r.options.tabSelector).each(function(){r.tabs.push({$tab:t(this),width:t(this).outerWidth()})}),r.$dropdown.find(r.options.dropdownTabSelector).each(function(){var d=t(this).clone().css({visibility:'hidden',position:'fixed'});d.appendTo(r.$element),r.dropdownTabs.push({$tab:t(this),width:d.outerWidth()}),d.remove(),t(this).on('click',r.options.onTabClick)}),'function'==typeof this.options.onTabClick&&(s=function(d){void 0===d.$tab.data('tabClickSet')&&(d.$tab.on('click',t.proxy(r.options.onTabClick,d.$tab)),d.$tab.data('tabClickSet',!0))},r.tabs.map(s),r.dropdownTabs.map(s)),this},n.prototype.moveLastToDropdown=function(){var s;return this.tabs.length&&(s=this.tabs.pop(),s.$tab.prependTo(this.$dropdown),this.dropdownTabs.unshift(s)),this.checkDropdownContainer(),this},n.prototype.moveFirstToContainer=function(){var s;return this.dropdownTabs.length&&(s=this.dropdownTabs.shift(),s.$tab.appendTo(this.$element),this.tabs.push(s)),this.checkDropdownContainer(),this},n.prototype.getTabsWidth=function(){var s=0;return this.tabs.forEach(function(r){s+=r.width}),s},n.prototype.isDropdownContainerVisible=function(){return this.$dropdownContainer.hasClass(this.options.visibleClass)},n.prototype.getFreeSpace=function(){var s=this.$element.width()-this.getTabsWidth()-this.options.freeSpaceOffset;return this.isDropdownContainerVisible()&&(s-=this.$dropdownContainer.outerWidth(),1===this.dropdownTabs.length&&0<=s-this.dropdownTabs[0].width+this.$dropdownContainer.outerWidth()&&(s+=this.$dropdownContainer.outerWidth())),s},n.prototype.moveTabsToDropdown=function(){for(var s=this.tabs.length,r=s-1;0<=r;r--){if(!(0>this.getFreeSpace()))return this;this.moveLastToDropdown()}return this},n.prototype.moveDropdownToTabs=function(){for(var s=this.dropdownTabs.length,r=0;r<s;r++){if(!(0<=this.getFreeSpace()-this.dropdownTabs[0].width))return this;this.moveFirstToContainer()}return this},n.prototype.showDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.visibleClass),this},n.prototype.hideDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.visibleClass),this},n.prototype.activateDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.activeClass),this},n.prototype.deactivateDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.activeClass),this},n.prototype.checkDropdownContainerActive=function(){return this.$dropdown.find('.'+this.options.activeClass+':first').length?this.activateDropdownContainer():this.deactivateDropdownContainer(),this},n.prototype.checkDropdownContainer=function(){return this.dropdownTabs.length?this.showDropdownContainer():this.hideDropdownContainer(),this.checkDropdownContainerActive(),this},n.prototype.moveTabs=function(){return this.options.autoRefresh&&this.refresh(),this.checkDropdownContainer(),this.moveTabsToDropdown(),this.moveDropdownToTabs(),this.options.showDevInfo&&this.showDevInfo(),this},n.prototype.showDevInfo=function(){var s=t('#vc-ui-tabs-line-dev-info');s.length&&(this.$devBlock=s),void 0===this.$devBlock&&(this.$devBlock=t('<div id="vc-ui-tabs-line-dev-info" />').css({position:'fixed',right:'40px',top:'40px',padding:'7px 12px',border:'1px solid rgba(0, 0, 0, .2)',background:'rgba(0, 0, 0, .7)',color:'#0a0','border-radius':'5px','font-family':'tahoma','font-size':'12px','z-index':1100}),this.$devBlock.appendTo('body')),void 0===this.$devInfo&&(this.$devInfo=t('<div />').css({'margin-bottom':'7px','padding-bottom':'7px','border-bottom':'1px dashed rgba(0, 200, 0, .35)'}),this.$devInfo.appendTo(this.$devBlock)),this.$devInfo.empty(),this.$devInfo.append(t('<div />').text('Tabs count: '+this.tabs.length)),this.$devInfo.append(t('<div />').text('Dropdown count: '+this.dropdownTabs.length)),this.$devInfo.append(t('<div />').text('El width: '+this.$element.width())),this.$devInfo.append(t('<div />').text('Tabs width: '+this.getTabsWidth())),this.$devInfo.append(t('<div />').text('Tabs width with dots: '+(this.getTabsWidth()+this.$dropdownContainer.outerWidth()))),this.$devInfo.append(t('<div />').text('Free space: '+this.getFreeSpace())),this.tabs.length&&this.$devInfo.append(t('<div />').text('Last tab width: '+this.tabs[this.tabs.length-1].width)),this.dropdownTabs.length&&this.$devInfo.append(t('<div />').text('First dropdown tab width: '+this.dropdownTabs[0].width))},o=function(s){return this.each(function(){var r=t(this),d=r.data('vcUiTabsLine'),u=r.data('vc.tabsLine'),g=t.extend(!0,{},n.DEFAULTS,r.data(),d,'object'==typeof s&&s),h='string'==typeof s?s:g.action;u||r.data('vc.tabsLine',u=new n(this,g)),h&&u[h]()})},l=t.fn.vcTabsLine,t.fn.vcTabsLine=o,t.fn.vcTabsLine.Constructor=n,t.fn.vcTabsLine.noConflict=function(){return t.fn.vcTabsLine=l,this},t(window).on('load',function(){t('[data-vc-ui-tabs-line]').each(function(){var s=t(this);o.call(s,s.data())})})}(window.jQuery),function(){'use strict';vc.HelperAjax={ajax:!1,checkAjax:function(){this.ajax&&this.ajax.abort()},resetAjax:function(){this.ajax=!1}}}(window.jQuery),function(){'use strict';vc.HelperPrompts={uiEvents:{render:'removeAllPrompts'},removeAllPrompts:function(){this.$el.find('.vc_ui-panel-content-container').removeClass('vc_ui-content-hidden'),this.$el.find('.vc_ui-prompt').remove()}}}(window.jQuery),function(){'use strict';vc.HelperPanelViewDraggable={draggable:!0,draggableOptions:{iframeFix:!0,handle:'[data-vc-ui-element="panel-heading"]'},uiEvents:{show:'initDraggable'},initDraggable:function(){this.$el.draggable(_.extend({},this.draggableOptions,{start:this.fixElContainment,stop:this.fixElContainment}))}}}(window.jQuery),function(t){'use strict';vc.HelperPanelViewResizable={sizeInitialized:!1,uiEvents:{show:'setSavedSize initResize',tabChange:'setDefaultHeightSettings',afterMinimize:'setupOnMinimize',afterUnminimize:'initResize',fixElContainment:'saveUIPanelSizes'},setDefaultHeightSettings:function(){this.$el.css('height','auto'),this.$el.css('maxHeight','75vh')},initResize:function(){var n=this;this.$el.data('uiResizable')&&this.$el.resizable('destroy'),this.$el.resizable({minHeight:240,minWidth:380,resize:function(){n.trigger('resize')},handles:'n, e, s, w, ne, se, sw, nw',start:function(o,l){n.trigger('beforeResizeStart'),n.$el.css('maxHeight','none'),n.$el.css('height',l.size.height),t('iframe').css('pointerEvents','none'),n.trigger('afterResizeStart')},stop:function(){n.trigger('beforeResizeStop'),t('iframe').css('pointerEvents',''),n.saveUIPanelSizes(),n.trigger('afterResizeStop')}}),this.content().addClass('vc_properties-list-init'),this.trigger('resize')},setSavedSize:function(){if(this.setDefaultHeightSettings(),vc.is_mobile)return!1;var n={width:getUserSetting(this.panelName+'_vcUIPanelWidth'),left:getUserSetting(this.panelName+'_vcUIPanelLeft').replace('minus','-'),top:getUserSetting(this.panelName+'_vcUIPanelTop').replace('minus','-')};_.isEmpty(n.width)||this.$el.width(n.width),_.isEmpty(n.left)||this.$el.css('left',n.left),_.isEmpty(n.top)||this.$el.css('top',n.top),this.sizeInitialized=!0},saveUIPanelSizes:function(){if(!1===this.sizeInitialized)return!1;var n={width:this.$el.width(),left:parseInt(this.$el.css('left'),10),top:parseInt(this.$el.css('top'),10)};setUserSetting(this.panelName+'_vcUIPanelWidth',n.width),setUserSetting(this.panelName+'_vcUIPanelLeft',n.left.toString().replace('-','minus')+'px'),setUserSetting(this.panelName+'_vcUIPanelTop',n.top.toString().replace('-','minus')+'px')},setupOnMinimize:function(){this.$el.data('uiResizable')&&this.$el.resizable('destroy'),this.$el.resizable({minWidth:380,handles:'w, e',start:function(){t('iframe').css('pointerEvents','none')},stop:function(){t('iframe').css('pointerEvents','')}})}}}(window.jQuery),function(t){'use strict';vc.HelperTemplatesPanelViewSearch={searchSelector:'[data-vc-templates-name-filter]',events:{'keyup [data-vc-templates-name-filter]':'searchTemplate','search [data-vc-templates-name-filter]':'searchTemplate'},uiEvents:{show:'focusToSearch'},focusToSearch:function(){vc.is_mobile||t(this.searchSelector,this.$el).focus()},searchTemplate:function(n){var o=t(n.currentTarget);o.val().length?this.searchByName(o.val()):this.clearSearch()},clearSearch:function(){this.$el.find('[data-vc-templates-name-filter]').val(''),this.$el.find('[data-template_name]').css('display','block'),this.$el.removeAttr('data-vc-template-search'),this.$el.find('.vc-search-result-empty').removeClass('vc-search-result-empty');var n=new jQuery.Event('click');n.isClearSearch=!0,this.$el.find('.vc_panel-tabs-control:first [data-vc-ui-element="panel-tab-control"]').trigger(n)},searchByName:function(n){this.$el.find('.vc_panel-tabs-control.vc_active').removeClass('vc_active'),this.$el.attr('data-vc-template-search','true'),this.$el.find('[data-template_name]').css('display','none'),this.$el.find('[data-template_name*="'+vc_slugify(n)+'"]').css('display','block'),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(){var o=t(this);o.removeClass('vc-search-result-empty'),o.find('[data-template_name]:visible').length||o.addClass('vc-search-result-empty')})}}}(window.jQuery),function(t){'use strict';vc.HelperPanelViewHeaderFooter={buttonMessageTimeout:!1,events:{'click [data-vc-ui-element="button-save"]':'save','click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="button-minimize"]':'toggleOpacity'},uiEvents:{save:'setButtonMessage',render:'clearButtonMessage'},resetMinimize:function(){this.$el.removeClass('vc_panel-opacity'),this.$el.removeClass('vc_minimized')},toggleOpacity:function(n){n.preventDefault();var o=this,l=this.$el,s=l.find(l.data('vcPanel')),r=s.closest(s.data('vcPanelContainer')),d=t(n.currentTarget);void 0===l.data('vcHasHeight')&&l.data('vcHasHeight',function(u){var h=u.attr('style'),f=!1;return h&&h.split(';').forEach(function(w){var k=w.split(':');'height'===t.trim(k[0])&&(f=!0)}),f}(l)),l.hasClass('vc_minimized')?(void 0===l.data('vcMinimizeHeight')&&l.data('vcMinimizeHeight',t(window).height()-0.2*t(window).height()),l.animate({height:l.data('vcMinimizeHeight')},{duration:400,start:function(){d.prop('disabled',!0),l.addClass('vc_animating'),o.tabsMenu&&o.tabsMenu()&&o.tabsMenu().vcTabsLine('moveTabs')},complete:function(){l.removeClass('vc_minimized'),l.removeClass('vc_animating'),l.data('vcHasHeight')||l.css({height:''}),o.trigger('afterUnminimize'),d.prop('disabled',!1)}})):(l.data('vcMinimizeHeight',l.height()),l.animate({height:s.outerHeight()+r.outerHeight()-r.height()},{duration:400,start:function(){d.prop('disabled',!0),l.addClass('vc_animating')},complete:function(){l.addClass('vc_minimized'),l.removeClass('vc_animating'),l.css({height:''}),o.trigger('afterMinimize'),d.prop('disabled',!1)}}))},setButtonMessage:function(n,o,l){var s,r;return void 0===l&&(l=!1),this.clearButtonMessage=_.bind(this.clearButtonMessage,this),(l||vc.frame_window)&&!this.buttonMessageTimeout?(void 0===n&&(n=window.i18nLocale.ui_saved),void 0===o&&(o='success'),r=this.$el.find('[data-vc-ui-element="button-save"]'),s=r.html(),r.addClass('vc_ui-button-'+o+' vc_ui-button-undisabled').removeClass('vc_ui-button-action').data('vcCurrentTextHtml',s).data('vcCurrentTextType',o).html(n),_.delay(this.clearButtonMessage,5e3),this.buttonMessageTimeout=!0,this):this},clearButtonMessage:function(){var n,o,l;this.buttonMessageTimeout&&(window.clearTimeout(this.buttonMessageTimeout),l=this.$el.find('[data-vc-ui-element="button-save"]'),o=l.data('vcCurrentTextHtml')||'Save',n=l.data('vcCurrentTextType'),l.html(o).removeClass('vc_ui-button-'+n+' vc_ui-button-undisabled').addClass('vc_ui-button-action'),this.buttonMessageTimeout=!1)}}}(window.jQuery),function(t){'use strict';vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:'template_window',showMessageDisabled:!1,initialize:function(){vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger('show',this.initTemplatesTabs,this)},show:function(){this.clearSearch(),vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this)},initTemplatesTabs:function(){this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine('moveTabs')},showMessage:function(n,o){var l;if(this.showMessageDisabled)return!1;l='vc_col-xs-12 wpb_element_wrapper',this.message_box_timeout&&this.$el.find('[data-vc-panel-message]').remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var r=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>'),s;'error'===o?s=t('<div class="'+l+'" data-vc-panel-message>').html(r({color:'danger',icon:'times',text:n})):'warning'===o?s=t('<div class="'+l+'" data-vc-panel-message>').html(r({color:'warning',icon:'exclamation-triangle',text:n})):'success'===o?s=t('<div class="'+l+'" data-vc-panel-message>').html(r({color:'success',icon:'check',text:n})):void 0;s.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),s.fadeIn(),this.message_box_timeout=window.setTimeout(function(){s.remove()},6e3)},changeTab:function(n){n.preventDefault(),n&&!n.isClearSearch&&this.clearSearch();var o=t(n.currentTarget);o.parent().hasClass('vc_active')||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass('vc_active'),o.parent().addClass('vc_active'),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass('vc_active'),this.$el.find(o.data('vcUiElementTarget')).addClass('vc_active'),this.$tabsMenu&&this.$tabsMenu.vcTabsLine('checkDropdownContainerActive'))},setPreviewFrameHeight:function(n,o){100>parseInt(o)&&(o=100),t('data-vc-template-preview-frame="'+n+'"').height(o)}}),vc.TemplateWindowUIPanelBackendEditor.prototype.events=t.extend(!0,vc.TemplateWindowUIPanelBackendEditor.prototype.events,{'click [data-vc-ui-element="button-save"]':'save','click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="button-minimize"]':'toggleOpacity','keyup [data-vc-templates-name-filter]':'searchTemplate','search [data-vc-templates-name-filter]':'searchTemplate','click .vc_template-save-btn':'saveTemplate','click [data-template_id] [data-template-handler]':'loadTemplate','click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':'buildTemplatePreview','click [data-vc-ui-delete="template-title"]':'removeTemplate','click [data-vc-ui-element="panel-tab-control"]':'changeTab'}),vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:'template_window',showMessageDisabled:!1,show:function(){this.clearSearch(),vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this)},showMessage:function(n,o){if(this.showMessageDisabled)return!1;this.message_box_timeout&&this.$el.find('[data-vc-panel-message]').remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var r=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>'),l,s;switch(s='vc_col-xs-12 wpb_element_wrapper',o){case'error':l=t('<div class="'+s+'" data-vc-panel-message>').html(r({color:'danger',icon:'times',text:n}));break;case'warning':l=t('<div class="'+s+'" data-vc-panel-message>').html(r({color:'warning',icon:'exclamation-triangle',text:n}));break;case'success':l=t('<div class="'+s+'" data-vc-panel-message>').html(r({color:'success',icon:'check',text:n}));}l.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),l.fadeIn(),this.message_box_timeout=window.setTimeout(function(){l.remove()},6e3)},changeTab:function(n){n.preventDefault(),n&&!n.isClearSearch&&this.clearSearch();var o=t(n.currentTarget);o.parent().hasClass('vc_active')||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass('vc_active'),o.parent().addClass('vc_active'),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass('vc_active'),this.$el.find(o.data('vcUiElementTarget')).addClass('vc_active'),this.$tabsMenu&&this.$tabsMenu.vcTabsLine('checkDropdownContainerActive'))}}),t.fn.vcAccordion.Constructor.prototype.collapseTemplate=function(n){var o,l,s,r;s=this.$element;var d;if(d=0,o=this.getContainer().find('[data-vc-preview-handler]').each(function(){var f,w;w=t(this),f=w.data('vc.accordion'),void 0===f&&(w.vcAccordion(),f=w.data('vc.accordion')),f&&f.setIndex&&f.setIndex(d++)}),l=o.filter(function(){var f,w;return f=t(this),w=f.data('vc.accordion'),w.getTarget().hasClass(w.activeClass)}),r=l.filter(function(){return s[0]!==this}),r.length&&t.fn.vcAccordion.call(r,'hide'),this.isActive())t.fn.vcAccordion.call(s,'hide');else{t.fn.vcAccordion.call(s,'show');var u=s.closest('.vc_ui-list-bar-item'),g=s.closest('[data-template_id]'),h=g.closest('[data-vc-ui-element=panel-content]').parent();setTimeout(function(){if(0>Math.round(g.offset().top-h.offset().top)){var f=Math.round(g.offset().top-h.offset().top+h.scrollTop()-u.height());h.animate({scrollTop:f},400)}'function'==typeof n&&n(g,h)},400)}}}(window.jQuery),function(t){'use strict';vc.element_start_index=0,vc.AddElementUIPanelBackendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({el:'#vc_ui-panel-add-element',searchSelector:'#vc_elements_name_filter',prepend:!1,builder:'',events:{'click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="panel-tab-control"]':'filterElements','click .vc_shortcode-link':'createElement','keyup #vc_elements_name_filter':'filterElements','search #vc_elements_name_filter':'filterElements','click [data-vc-manage-elements]':'openPresetWindow'},initialize:function(){vc.AddElementUIPanelBackendEditor.__super__.initialize.call(this),vc.events.on('shortcodes:add',this.addCustomCssStyleTag.bind(this)),vc.events.on('vc:savePreset',this.updateAddElementPopUp.bind(this)),vc.events.on('vc:deletePreset',this.removePresetFromAddElementPopUp.bind(this))},render:function(n,o){return _.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),this.$el.is(':hidden')&&vc.closeActivePanel(),vc.active_panel=this,this.prepend=!!_.isBoolean(o)&&o,this.place_after_id=!!_.isString(o)&&o,this.model=!!_.isObject(n)&&n,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=t('[data-vc-ui-element="add-element-button"]',this.$content),this.buildFiltering(),this.$el.find('[data-vc-ui-element="panel-tab-control"]').eq(0).click(),this.show(),this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine('moveTabs'),vc.is_mobile||t(this.searchSelector).focus(),vc.AddElementUIPanelBackendEditor.__super__.render.call(this)},buildFiltering:function(){var n,o,l,s,r;n='[data-vc-ui-element="add-element-button"]',l=this._getNotIn(this.model?this.model.get('shortcode'):''),t(this.searchSelector).val(''),this.$content.addClass('vc_filter-all'),this.$content.attr('data-vc-ui-filter','*'),o=this.model?this.model.get('shortcode'):'vc_column',s=o&&!_.isUndefined(vc.getMapped(o).as_parent)&&vc.getMapped(o).as_parent,_.isObject(s)?(r=[],_.isString(s.only)&&r.push(_.reduce(s.only.replace(/\s/,'').split(','),function(d,u){return d+(_.isEmpty(d)?'':',')+'[data-element="'+u.trim()+'"]'},'')),_.isString(s.except)&&r.push(_.reduce(s.except.replace(/\s/,'').split(','),function(d,u){return d+':not([data-element="'+u.trim()+'"])'},'')),n+=r.join(',')):l&&(n=l),!1===o||_.isUndefined(vc.getMapped(o).allowed_container_element)||(!1===vc.getMapped(o).allowed_container_element?n+=':not([data-is-container=true])':_.isString(vc.getMapped(o).allowed_container_element)&&(n+=':not([data-is-container=true]), [data-element='+vc.getMapped(o).allowed_container_element+']')),this.$buttons.removeClass('vc_visible').addClass('vc_inappropriate'),t(n,this.$content).removeClass('vc_inappropriate').addClass('vc_visible'),this.hideEmptyFilters()},hideEmptyFilters:function(){var n=this;this.$el.find('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass('vc_active'),this.$el.find('[data-vc-ui-element="panel-add-element-tab"]:first').addClass('vc_active'),this.$el.find('[data-filter]').each(function(){t(t(this).data('filter')+'.vc_visible:not(.vc_inappropriate)',n.$content).length?t(this).parent().show():t(this).parent().hide()})},_getNotIn:_.memoize(function(n){return'[data-vc-ui-element="add-element-button"]:not('+_.reduce(vc.map,function(o,l){var s;return s=_.isEmpty(o)?'':',',_.isObject(l.as_child)?(_.isString(l.as_child.only)&&(_.contains(l.as_child.only.replace(/\s/,'').split(','),n)||(o+=s+'[data-element='+l.base+']')),_.isString(l.as_child.except)&&_.contains(l.as_child.except.replace(/\s/,'').split(','),n)&&(o+=s+'[data-element='+l.base+']')):!1===l.as_child&&(o+=s+'[data-element='+l.base+']'),o},'')+')'}),filterElements:function(n){_.isObject(n)?n.preventDefault()&&n.stopPropagation():n=window.event;var s=t(n.currentTarget),r='[data-vc-ui-element="add-element-button"]',d=t(this.searchSelector).val(),o,l;this.$content.removeClass('vc_filter-all'),t('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass('vc_active'),s.is('[data-filter]')?(s.parent().addClass('vc_active'),o=s.data('filter'),r+=o,'*'===o?this.$content.addClass('vc_filter-all'):this.$content.removeClass('vc_filter-all'),this.$content.attr('data-vc-ui-filter',o.replace('.js-category-','')),t(this.searchSelector).val('')):d.length?(r+=':containsi(\''+d+'\'):not(\'.vc_element-deprecated\')',this.$content.attr('data-vc-ui-filter','name:'+d)):d.length||(t('[data-vc-ui-element="panel-tab-control"][data-filter="*"]').parent().addClass('vc_active'),this.$content.attr('data-vc-ui-filter','*').addClass('vc_filter-all')),t('.vc_visible',this.$content).removeClass('vc_visible'),t(r,this.$content).addClass('vc_visible'),d.length&&13===(n.keyCode||n.which)&&(l=t('.vc_visible:not(.vc_inappropriate)',this.$content),1===l.length&&l.find('[data-vc-clickable]').click())},createElement:function(n){n&&n.preventDefault&&n.preventDefault();var o,l,s,r,d,u,g,h,f,w,k,C,S;if(w=t(n.currentTarget),f=w.data('tag'),d={},g={width:'1/1'},S=w.closest('[data-preset]'),S&&(k=S.data('preset'),C=S.data('element')),!1===this.model){if(vc.storage.lock(),'vc_section'===f){var T={shortcode:f};k&&'vc_section'===C&&(T.preset=k),o=vc.shortcodes.create(T)}else{var P='vc_row'===f||'mk_page_section'===f?f:'vc_row',E={shortcode:P,params:d};k&&C===f&&(E.preset=k),s=vc.shortcodes.create(E);var j={shortcode:'vc_column',params:g,parent_id:s.id,root_id:s.id};if(k&&'vc_column'===C&&(j.preset=k),l=vc.shortcodes.create(j),o=s,P!==f){var D={shortcode:f,parent_id:l.id,root_id:s.id};k&&C===f&&(D.preset=k),o=vc.shortcodes.create(D)}}}else if('vc_row'===f)'vc_section'===this.model.get('shortcode')?(vc.storage.lock(),s=vc.shortcodes.create({shortcode:'vc_row',params:d,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),l=vc.shortcodes.create({shortcode:'vc_column',params:g,parent_id:s.id,root_id:s.id}),o=s):(u={},h={width:'1/1'},vc.storage.lock(),s=vc.shortcodes.create({shortcode:'vc_row_inner',params:u,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),l=vc.shortcodes.create({shortcode:'vc_column_inner',params:h,parent_id:s.id,root_id:s.id}),o=s);else{var D={shortcode:f,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get('root_id')};k&&C===f&&(D.preset=k),o=vc.shortcodes.create(D)}this.model=o,r=!(_.isBoolean(vc.getMapped(f).show_settings_on_create)&&!1===vc.getMapped(f).show_settings_on_create),this.model.get('shortcode'),this.hide(),r&&this.showEditForm()},getFirstPositionIndex:function(){return vc.element_start_index-=1,vc.element_start_index},show:function(){this.$el.addClass('vc_active'),this.trigger('show')},hide:function(){this.$el.removeClass('vc_active'),vc.active_panel=!1,this.trigger('hide')},showEditForm:function(){vc.edit_element_block_view.render(this.model)},addCustomCssStyleTag:function(n){if(n&&n.getParam){var o;o=n.getParam('css'),o&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(o)}},updateAddElementPopUp:function(n,o,l,s){var r=this.$el.find('[data-element="'+o+'"]:first'),d=r.clone(!0);vc_all_presets[n]=s,d.find('[data-vc-shortcode-name]').text(l),d.find('.vc_element-description').text(''),d.attr('data-preset',n),d.addClass('js-category-_my_elements_'),d.insertAfter(this.$el.find('[data-element="'+o+'"]:last')),this.$el.find('[data-filter="js-category-_my_elements_"]').show();var u=this.$body.find('[data-vc-ui-element="panel-preset"] [data-vc-presets-list-content] .vc_ui-template:first'),d=u.clone(!0);d.find('[data-vc-ui-element="template-title"]').attr('title',l).text(l),d.find('[data-vc-ui-delete="preset-title"]').attr('data-preset',n).attr('data-preset-parent',o),d.find('[data-vc-ui-add-preset]').attr('data-preset',n).attr('id',o).attr('data-tag',o),d.show(),d.insertAfter(this.$body.find('[data-vc-ui-element="panel-preset"] [data-vc-presets-list-content] .vc_ui-template:last'))},removePresetFromAddElementPopUp:function(n){this.$el.find('[data-preset="'+n+'"]').remove()},openPresetWindow:function(n){n&&n.preventDefault&&n.preventDefault(),vc.preset_panel_view.render().show()}}),vc.AddElementUIPanelFrontendEditor=vc.AddElementUIPanelBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({events:{'click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="panel-tab-control"]':'filterElements','click .vc_shortcode-link':'createElement','keyup #vc_elements_name_filter':'filterElements'},createElement:function(n){n&&n.preventDefault&&n.preventDefault();var o,l,s,r,d,u,g,h,f,w,k,C;if(h=t(n.currentTarget),f=h.data('tag'),d={},r={width:'1/1'},C=h.closest('[data-preset]'),C&&(w=C.data('preset'),k=C.data('element')),this.prepend&&(vc.activity='prepend'),0==this.model){if('vc_section'===f){var S={shortcode:f};w&&'vc_section'===k&&(S.preset=w),this.builder.create(S),this.model=this.builder.last()}else{var T={shortcode:'vc_row',params:d};w&&'vc_row'===k&&(T.preset=w),this.builder.create(T);var P={shortcode:'vc_column',parent_id:this.builder.lastID(),params:r};if(w&&'vc_column'===k&&(P.preset=w),this.builder.create(P),'vc_row'!==f){var E={shortcode:f,parent_id:this.builder.lastID()};w&&k===f&&(E.preset=w),this.builder.create(E)}this.model=this.builder.last()}}else if('vc_row'===f)'vc_section'===this.model.get('shortcode')?(this.builder.create({shortcode:'vc_row',params:d,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:'vc_column',params:r,parent_id:this.builder.lastID()}),this.model=this.builder.last()):(u={},g={width:'1/1'},this.builder.create({shortcode:'vc_row_inner',params:u,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:'vc_column_inner',params:g,parent_id:this.builder.lastID()}),this.model=this.builder.last());else{var E={shortcode:f,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()};w&&k===f&&(E.preset=w),this.builder.create(E),this.model=this.builder.last()}for(s=this.builder.models.length-1;0<=s;s--)this.builder.models[s].get('shortcode');_.isString(vc.getMapped(f).default_content)&&vc.getMapped(f).default_content.length&&(l=this.builder.parse({},vc.getMapped(f).default_content,this.builder.last().toJSON()),_.each(l,function(j){j.default_content=!0,this.builder.create(j)},this)),this.model=this.builder.last(),o=!(_.isBoolean(vc.getMapped(f).show_settings_on_create)&&!1===vc.getMapped(f).show_settings_on_create),this.hide(),o&&this.showEditForm(),this.builder.render()}})}(window.jQuery),function(t){'use strict';vc.ExtendPresets={settingsMenuSelector:'[data-vc-ui-element="settings-dropdown-list"]',settingsButtonSelector:'[data-vc-ui-element="settings-dropdown-button"]',settingsDropdownSelector:'[data-vc-ui-element="settings-dropdown"]',settingsPresetId:null,uiEvents:{init:'addEvents',render:'hideDropdown',afterRender:'afterRenderActions'},afterRenderActions:function(){this.untaintSettingsPresetData(),this.showDropdown()},hideDropdown:function(){this.$el.find('[data-vc-ui-element="settings-dropdown"]').hide()},showDropdown:function(){var n=this.model.get('shortcode');window.vc_settings_show&&'vc_column'!==n&&this.$el.find('[data-vc-ui-element="settings-dropdown"]').show()},showDropdownMenu:function(){var n=this.model.get('shortcode'),o=t(this);o.data('vcSettingsMenuLoaded')&&n===o.data('vcShortcodeName')||this.reloadSettingsMenuContent()},addEvents:function(){var n=this.$el.find('.vc_edit-form-tab.vc_active'),o=this.model.get('shortcode'),l=this;t(document).off('beforeMinimize.vc.paramWindow',this.minimizeButtonSelector).on('beforeMinimize.vc.paramWindow',this.minimizeButtonSelector,function(){n.find('.vc_ui-prompt-presets .vc_ui-prompt-close').trigger('click')}),t(document).off('close.vc.paramWindow',this.closeButtonSelector).on('beforeClose.vc.paramWindow',this.closeButtonSelector,function(){n.find('.vc_ui-prompt-presets .vc_ui-prompt-close').trigger('click')}),t(document).off('show.vc.accordion',this.settingsButtonSelector).on('show.vc.accordion',this.settingsButtonSelector,function(){var s=t(this);s.data('vcSettingsMenuLoaded')&&o===s.data('vcShortcodeName')||l.reloadSettingsMenuContent()})},saveSettingsAjaxData:function(n,o,l,s){return{action:'vc_action_save_settings_preset',shortcode_name:n,is_default:l?1:0,vc_inline:!0,title:o,data:s,_vcnonce:window.vcAdminNonce}},saveSettings:function(n,o){var l=this.model.get('shortcode'),s=JSON.stringify(this.getParamsForSettingsPreset());if(void 0!==n&&n.length)return void 0===o&&(o=!1),this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.saveSettingsAjaxData(l,n,o,s),context:this}).done(function(r){r.success&&(this.setSettingsMenuContent(r.html),this.settingsPresetId=r.id,this.untaintSettingsPresetData())}).always(this.resetAjax),this.ajax},fetchSaveSettingsDialogAjaxData:function(){return{action:'vc_action_render_settings_preset_title_prompt',vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveSettingsDialog:function(n){var o=this.$el.find('.vc_ui-panel-content-container');return o.find('.vc_ui-prompt-presets').length?void(void 0!==n&&n(!1)):void(this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.fetchSaveSettingsDialogAjaxData()}).done(function(l){l.success&&(o.prepend(l.html),void 0!==n&&n(!0))}).fail(function(){void 0!==n&&n(!1)}).always(this.resetAjax))},showSaveSettingsDialog:function(n){var o=this;this.isSettingsPresetDefault=!!n,this.fetchSaveSettingsDialog(function(l){var s=o.$el.find('.vc_ui-panel-content-container'),r=s.find('.vc_ui-prompt-presets'),d=r.find('.textfield');s.find('.vc_ui-prompt.vc_visible').removeClass('vc_visible');var u=r.find('[data-vc-view-settings-preset]');if('undefined'===window.vc_vendor_settings_presets[o.model.get('shortcode')]?u.attr('disabled','disabled'):u.removeAttr('disabled'),r.addClass('vc_visible'),d.focus(),s.addClass('vc_ui-content-hidden'),l){var g=r.find('#vc_ui-save-preset-btn'),h=0;r.on('submit',function(){var f=d.val();return!!f.length&&(o.saveSettings(f,o.isSettingsPresetDefault).done(function(w){var k=this.getParamsForSettingsPreset();d.val(''),o.setCustomButtonMessage(g,void 0,void 0,!0),vc.events.trigger('vc:savePreset',w.id,o.model.get('shortcode'),f,k),h=_.delay(function(){r.removeClass('vc_visible'),s.removeClass('vc_ui-content-hidden')},5e3)}).fail(function(){o.setCustomButtonMessage(g,window.i18nLocale.ui_danger,'danger',!0)}),!1)}),r.on('click','.vc_ui-prompt-close',function(){return o.checkAjax(),r.removeClass('vc_visible'),s.removeClass('vc_ui-content-hidden'),o.clearCustomButtonMessage.call(this,g),h&&(window.clearTimeout(h),h=0),!1})}})},loadSettingsAjaxData:function(n){return{action:'vc_action_get_settings_preset',vc_inline:!0,id:n,_vcnonce:window.vcAdminNonce}},loadSettings:function(n){return this.panelInit=!1,this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.loadSettingsAjaxData(n),context:this}).done(function(o){o.success&&(this.settingsPresetId=n,this.applySettingsPreset(o.data))}).always(this.resetAjax),this.ajax},saveAsDefaultSettingsAjaxData:function(n,o){return{action:'vc_action_set_as_default_settings_preset',shortcode_name:n,id:o,vc_inline:!0,_vcnonce:window.vcAdminNonce}},saveAsDefaultSettings:function(n,o){var l=this.model.get('shortcode'),s=n||this.settingsPresetId;s?(this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.saveAsDefaultSettingsAjaxData(l,s),context:this}).done(function(r){r.success&&(this.setSettingsMenuContent(r.html),this.untaintSettingsPresetData(),o&&o())}).always(this.resetAjax)):this.showSaveSettingsDialog(!0)},restoreDefaultSettingsAjaxData:function(n){return{action:'vc_action_restore_default_settings_preset',shortcode_name:n,vc_inline:!0,_vcnonce:window.vcAdminNonce}},restoreDefaultSettings:function(){var n=this.model.get('shortcode');this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.restoreDefaultSettingsAjaxData(n),context:this}).done(function(o){o.success&&this.setSettingsMenuContent(o.html)}).always(this.resetAjax)},setSettingsMenuContent:function(n){var o=this.$el.find(this.settingsButtonSelector),l=this.$el.find(this.settingsMenuSelector),s=this.model.get('shortcode'),r=this;o.data('vcShortcodeName',s),l.html(n),window.vc_presets_data&&0<window.vc_presets_data.presetsCount?l.find('[data-vc-view-settings-preset]').removeAttr('disabled'):l.find('[data-vc-view-settings-preset]').attr('disabled','disabled'),l.find('[data-vc-view-settings-preset]').on('click',function(){r.showViewSettingsList(),r.closeSettings()}),l.find('[data-vc-save-settings-preset]').on('click',function(){r.showSaveSettingsDialog(),r.closeSettings()}),l.find('[data-vc-save-template]').on('click',function(){r.showSaveTemplateDialog(),r.closeSettings()}),l.find('[data-vc-save-default-settings-preset]').on('click',function(){r.saveAsDefaultSettings(),r.closeSettings()}),l.find('[data-vc-restore-default-settings-preset]').on('click',function(){r.restoreDefaultSettings(),r.closeSettings()})},reloadSettingsMenuContentAjaxData:function(n){return{action:'vc_action_render_settings_preset_popup',shortcode_name:n,vc_inline:!0,_vcnonce:window.vcAdminNonce}},showViewSettingsList:function(){var n=this.$el.find('.vc_ui-panel-content-container');if(n.find('.vc_ui-prompt-view-presets:not(.vc_visible)').remove(),!n.find('.vc_ui-prompt-view-presets').length){n.find('.vc_ui-prompt.vc_visible').removeClass('vc_visible');var o=this,l=jQuery('<form class="vc_ui-prompt vc_ui-prompt-view-presets"><div class="vc_ui-prompt-controls"><button type="button" class="vc_general vc_ui-control-button vc_ui-prompt-close"><i class="vc-composer-icon vc-c-icon-close"></i></button></div><div class="vc_ui-prompt-title"><label for="prompt_title" class="wpb_element_label">Elements</label></div><div class="vc_ui-prompt-content"><div class="vc_ui-prompt-column"><div class="vc_ui-template-list vc_ui-list-bar" data-vc-action="collapseAll" style="margin-top: 20px;" data-vc-presets-list-content></div></div></div>');this.buildsettingsListContent(l),l.appendTo(n),l.addClass('vc_visible'),n.addClass('vc_ui-content-hidden');var s=function(){return l.remove(),n.removeClass('vc_ui-content-hidden'),!1};l.off('click.vc1').on('click.vc1','[data-vc-load-settings-preset]',function(r){o.loadSettings(t(r.currentTarget).data('vcLoadSettingsPreset')),s()}),l.off('click.vc4').on('click.vc4','[data-vc-set-default-settings-preset]',function(){o.saveAsDefaultSettings(t(this).data('vcSetDefaultSettingsPreset'),function(){o.buildsettingsListContent(l)})}),l.off('click.vc3').on('click.vc3','.vc_ui-prompt-close',function(){s(),o.checkAjax()})}},buildsettingsListContent:function(n){var o=vc.template('<div class="vc_ui-template"><div class="vc_ui-list-bar-item"><button class="vc_ui-list-bar-item-trigger" title="Apply Element" type="button" data-vc-load-settings-preset="<%- id %>"><%- title %></button><div class="vc_ui-list-bar-item-actions"><button class="vc_general vc_ui-control-button" title="Apply Element" type="button" data-vc-load-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-add"></i></button><button class="vc_general vc_ui-control-button" title="Delete Element" type="button" data-vc-delete-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-delete_empty"></i></button></div></div></div>'),l=n.find('[data-vc-presets-list-content]');l.empty(),_.each(window.vc_presets_data.presets[0],function(s,r){var d=s;0<window.vc_presets_data.defaultId&&parseInt(r)===window.vc_presets_data.defaultId&&(d=s+' (default)'),l.append(o({title:d,id:r}))}),_.each(window.vc_presets_data.presets[1],function(s,r){var d=s;0<window.vc_presets_data.defaultId&&parseInt(r)===window.vc_presets_data.defaultId&&(d=s+' (default)'),l.append(o({title:d,id:r}))})},reloadSettingsMenuContent:function(){var n=this.model.get('shortcode'),o=this.$el.find(this.settingsButtonSelector),l=!1;return this.setSettingsMenuContent(''),this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.reloadSettingsMenuContentAjaxData(n),context:this}).done(function(s){s.success&&(l=!0,this.setSettingsMenuContent(s.html),o.data('vcSettingsMenuLoaded',!0))}).always(function(){l||this.closeSettings(),this.resetAjax()}),this.ajax},closeSettings:function(n){void 0===n&&(n=!1);var o=this.$el.find(this.settingsMenuSelector),l=this.$el.find(this.settingsButtonSelector);n&&(l.data('vcSettingsMenuLoaded',!1),o.html('')),l.vcAccordion('hide')},isSettingsPresetDataTainted:function(){var n=JSON.stringify(this.getParamsForSettingsPreset());return n=n.replace(/vc_custom_\d+/,''),this.$el.data('vcSettingsPresetHash')!==vc_globalHashCode(n)},untaintSettingsPresetData:function(){var n=JSON.stringify(this.getParamsForSettingsPreset());n=n.replace(/vc_custom_\d+/,''),this.$el.data('vcSettingsPresetHash',vc_globalHashCode(n))},applySettingsPresetAjaxData:function(n){var o;return o=this.model.get('parent_id'),{action:'vc_edit_form',tag:this.model.get('shortcode'),parent_tag:o?vc.shortcodes.get(o).get('shortcode'):null,post_id:t('#post_ID').val(),params:n,_vcnonce:window.vcAdminNonce}},applySettingsPreset:function(n){return this.currentModelParams=n,vc.events.trigger('presets:apply',this.model,n),this._killEditor(),this.trigger('render'),this.show(),this.checkAjax(),this.ajax=t.ajax({type:'POST',url:window.ajaxurl,data:this.applySettingsPresetAjaxData(n),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},getParamsForSettingsPreset:function(){var n=this.model.get('shortcode'),o=this.getParams();return'vc_column'!==n&&'vc_column_inner'!==n||(delete o.width,delete o.offset),o}},vc.events.on('presets.apply',function(n,o){return'vc_tta_section'===n.get('shortcode')&&void 0!==o.tab_id&&(o.tab_id=vc_guid()+'-cl'),o})}(window.jQuery),function(t){'use strict';vc.ExtendTemplates={fetchSaveTemplateDialogAjaxData:function(){return{action:'vc_action_render_settings_templates_prompt',vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveTemplateDialog:function(n){var o=this.$el.find('.vc_ui-panel-content-container');return o.find('.vc_ui-prompt-templates').length?void(void 0!==n&&n(!1)):(this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.fetchSaveTemplateDialogAjaxData()}).done(function(l){l.success&&(o.prepend(l.html),void 0!==n&&n(!0))}).always(this.resetAjax),this.ajax)},showSaveTemplateDialog:function(){var n=this;this.fetchSaveTemplateDialog(function(o){var l=n.$el.find('.vc_ui-panel-content-container'),s=l.find('.vc_ui-prompt-templates'),r=s.find('.textfield');if(l.find('.vc_ui-prompt.vc_visible').removeClass('vc_visible'),s.addClass('vc_visible'),r.focus(),l.addClass('vc_ui-content-hidden'),o){var d=0,u=s.find('#vc_ui-save-templates-btn');s.on('submit',function(){var g=r.val();if(n.$el.find(n.settingsButtonSelector),!g.length)return!1;var h={action:vc.templates_panel_view.save_template_action,template:vc.shortcodes.singleStringify(n.model.get('id'),'template'),template_name:g,vc_inline:!0,_vcnonce:window.vcAdminNonce};return vc.templates_panel_view.reloadTemplateList(h,function(){r.val(''),n.setCustomButtonMessage(u,void 0,void 0,!0),d=_.delay(function(){s.removeClass('vc_visible'),l.removeClass('vc_ui-content-hidden')},5e3)},function(){n.setCustomButtonMessage(u,window.i18nLocale.ui_danger,'danger')}),!1}),s.on('click','.vc_ui-prompt-close',function(){return n.checkAjax(),s.removeClass('vc_visible'),l.removeClass('vc_ui-content-hidden'),n.clearCustomButtonMessage.call(this,u),d&&(window.clearTimeout(d),d=0),!1})}})}}}(window.jQuery),function(t){'use strict';vc.EditElementPanelView=vc.PanelView.vcExtendUI(vc.HelperAjax).vcExtendUI(vc.ExtendPresets).vcExtendUI(vc.ExtendTemplates).vcExtendUI(vc.HelperPrompts).extend({panelName:'edit_element',el:'#vc_properties-panel',contentSelector:'.vc_ui-panel-content.vc_properties-list',minimizeButtonSelector:'[data-vc-ui-element="button-minimize"]',closeButtonSelector:'[data-vc-ui-element="button-close"]',titleSelector:'.vc_panel-title',tabsInit:!1,doCheckTabs:!0,$tabsMenu:!1,dependent_elements:{},mapped_params:{},draggable:!1,panelInit:!1,$spinner:!1,active_tab_index:0,buttonMessageTimeout:!1,notRequestTemplate:!1,requiredParamsInitialized:!1,currentModelParams:!1,customButtonMessageTimeout:!1,events:{'click [data-save=true]':'save','click [data-dismiss=panel]':'hide','mouseover [data-transparent=panel]':'addOpacity','click [data-transparent=panel]':'toggleOpacity','mouseout [data-transparent=panel]':'removeOpacity'},initialize:function(){_.bindAll(this,'setSize','setTabsSize','fixElContainment','hookDependent','resetAjax','removeAllPrompts'),this.on('setSize',this.setResize,this),this.on('render',this.resetMinimize,this),this.on('render',this.setTitle,this),this.on('render',this.prepareContentBlock,this)},setCustomButtonMessage:function(n,o,l,s){var r;return void 0===n&&(n=this.$el.find('[data-vc-ui-element="button-save"]')),void 0===s&&(s=!1),this.clearCustomButtonMessage=_.bind(this.clearCustomButtonMessage,this),(s||vc.frame_window)&&!this.customButtonMessageTimeout?(void 0===o&&(o=window.i18nLocale.ui_saved),void 0===l&&(l='success'),r=n.html(),n.addClass('vc_ui-button-'+l+' vc_ui-button-undisabled').removeClass('vc_ui-button-action').data('vcCurrentTextHtml',r).data('vcCurrentTextType',l).html(o),_.delay(this.clearCustomButtonMessage.bind(this,n),5e3),this.customButtonMessageTimeout=!0,this):this},clearCustomButtonMessage:function(n){var o,l;this.customButtonMessageTimeout&&(window.clearTimeout(this.customButtonMessageTimeout),l=n.data('vcCurrentTextHtml')||'Save',o=n.data('vcCurrentTextType'),n.html(l).removeClass('vc_ui-button-'+o+' vc_ui-button-undisabled').addClass('vc_ui-button-action'),this.customButtonMessageTimeout=!1)},render:function(n,o){var l;return this.$el.is(':hidden')&&vc.closeActivePanel(),o&&(this.notRequestTemplate=!0),this.model=n,this.currentModelParams=this.model.get('params'),vc.active_panel=this,this.resetMinimize(),this.clicked=!1,this.$el.css('height','auto'),this.$el.css('maxHeight','75vh'),l=this.model.setting('params')||[],this.$el.attr('data-vc-shortcode',this.model.get('shortcode')),this.tabsInit=!1,this.panelInit=!1,this.active_tab_index=0,this.requiredParamsInitialized=!1,this.mapped_params={},this.dependent_elements={},_.each(l,function(s){this.mapped_params[s.param_name]=s},this),this.trigger('render'),this.show(),this.checkAjax(),this.ajax=t.ajax({type:'POST',url:window.ajaxurl,data:this.ajaxData(),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},prepareContentBlock:function(){this.$content=this.notRequestTemplate?this.$el:this.$el.find(this.contentSelector).removeClass('vc_with-tabs'),this.$content.empty(),this.$spinner=t('<span class="vc_ui-wp-spinner vc_ui-wp-spinner-lg"></span>'),this.$content.prepend(this.$spinner)},buildParamsContent:function(n){var o,l,s;o=t(n),l=o.find('[data-vc-ui-element="panel-tabs-controls"]'),l.find('.vc_edit-form-tab-control:first-child').addClass('vc_active'),s=this.$el.find('[data-vc-ui-element="panel-header-content"]'),l.prependTo(s),this.$content.html(o),this.$content.removeAttr('data-vc-param-initialized'),this.active_tab_index=0,this.tabsInit=!1,this.panelInit=!1,this.dependent_elements={},this.requiredParamsInitialized=!1,this.$content.find('[data-vc-param-initialized]').removeAttr('data-vc-param-initialized'),this.init(),this.$content.parent().scrollTop(1).scrollTop(0),this.$content.removeClass('vc_properties-list-init'),this.$el.trigger('vcPanel.shown'),this.trigger('afterRender')},resetMinimize:function(){this.$el.removeClass('vc_panel-opacity')},ajaxData:function(){var n,o,l,s;return o=this.model.get('parent_id'),n=o?this.model.collection.get(o).get('shortcode'):null,l=this.model.get('params'),s=vc.getMergedParams(this.model.get('shortcode'),_.extend({},vc.getDefaults(this.model.get('shortcode')),l)),_.isUndefined(l.content)||(s.content=l.content),{action:'vc_edit_form',tag:this.model.get('shortcode'),parent_tag:n,post_id:t('#post_ID').val(),params:s,_vcnonce:window.vcAdminNonce}},init:function(){vc.EditElementPanelView.__super__.init.call(this),this.initParams(),this.initDependency(),t('.wpb_edit_form_elements .textarea_html').each(function(){window.init_textarea_html(t(this))}),this.trigger('init'),this.panelInit=!0},initParams:function(){var n=this,o=this.content().find('#vc_edit-form-tabs [data-vc-ui-element="panel-edit-element-tab"]:eq('+this.active_tab_index+')');o.length||(o=this.content()),o.attr('data-vc-param-initialized')||(t('[data-vc-ui-element="panel-shortcode-param"]',o).each(function(){var l,s;l=t(this),l.data('vcInitParam')||(s=l.data('param_settings'),vc.atts.init.call(n,s,l),l.data('vcInitParam',!0))}),o.attr('data-vc-param-initialized',!0)),this.requiredParamsInitialized||_.isUndefined(vc.required_params_to_init)||(t('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each(function(){var l,s;l=t(this),!l.data('vcInitParam')&&-1<_.indexOf(vc.required_params_to_init,l.data('param_type'))&&(s=l.data('param_settings'),vc.atts.init.call(n,s,l),l.data('vcInitParam',!0))}),this.requiredParamsInitialized=!0)},initDependency:function(){var n={};_.each(this.mapped_params,function(o){if(_.isObject(o)&&_.isObject(o.dependency)){var l=o.dependency;if(_.isString(o.dependency.element)){var s,r;s=t('[name='+o.dependency.element+'].wpb_vc_param_value',this.$content),r=t('[name= '+o.param_name+'].wpb_vc_param_value',this.$content),_.each(s,function(d){var u,g;u=t(d),g=u.attr('name'),_.isArray(this.dependent_elements[u.attr('name')])||(this.dependent_elements[u.attr('name')]=[]),this.dependent_elements[u.attr('name')].push(r),!u.data('dependentSet')&&u.attr('data-dependent-set','true')&&u.bind('keyup change',this.hookDependent),n[g]||(n[g]=u)},this)}_.isString(l.callback)&&window[l.callback].call(this)}},this),this.doCheckTabs=!1,_.each(n,function(o){this.hookDependent({currentTarget:o})},this),this.doCheckTabs=!0,this.checkTabs(),n=null},hookDependent:function(n){var o,l,s,r,d,u;return o=t(n.currentTarget),l=o.closest('.vc_column'),r=this.dependent_elements[o.attr('name')],d=o.is(':checkbox')?_.map(this.$content.find('[name='+t(n.currentTarget).attr('name')+'].wpb_vc_param_value:checked'),function(g){return t(g).val()}):o.val(),u=this.doCheckTabs,this.doCheckTabs=!1,s=o.is(':checkbox')?!this.$content.find('[name='+o.attr('name')+'].wpb_vc_param_value:checked').length:!d.length,l.hasClass('vc_dependent-hidden')?_.each(r,function(g){var h=jQuery.Event('change');h.extra_type='vcHookDepended',g.closest('.vc_column').addClass('vc_dependent-hidden'),g.trigger(h)}):_.each(r,function(g){var h=g.attr('name'),f=_.isObject(this.mapped_params[h])&&_.isObject(this.mapped_params[h].dependency)?this.mapped_params[h].dependency:{},w=g.closest('.vc_column');_.isBoolean(f.not_empty)&&!0===f.not_empty&&!s?w.removeClass('vc_dependent-hidden'):_.isBoolean(f.is_empty)&&!0===f.is_empty&&s?w.removeClass('vc_dependent-hidden'):f.value&&_.intersection(_.isArray(f.value)?f.value:[f.value],_.isArray(d)?d:[d]).length?w.removeClass('vc_dependent-hidden'):f.value_not_equal_to&&!_.intersection(_.isArray(f.value_not_equal_to)?f.value_not_equal_to:[f.value_not_equal_to],_.isArray(d)?d:[d]).length?w.removeClass('vc_dependent-hidden'):w.addClass('vc_dependent-hidden');var k=jQuery.Event('change');k.extra_type='vcHookDepended',g.trigger(k)},this),u&&(this.checkTabs(),this.doCheckTabs=!0),this},checkTabs:function(){var n=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$content.hasClass('vc_with-tabs')&&(this.$tabsMenu=this.$content.find('.vc_edit-form-tabs-menu'))),this.$tabsMenu&&(this.$content.find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(o){var l=n.$tabsMenu.find('> [data-tab-index="'+o+'"]');t(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?l.hasClass('vc_dependent-hidden')&&(l.removeClass('vc_dependent-hidden').removeClass('vc_tab-color-animated').addClass('vc_tab-color-animated'),window.setTimeout(function(){l.removeClass('vc_tab-color-animated')},200)):l.addClass('vc_dependent-hidden')}),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabsMenu.parents('.vc_with-tabs.vc_panel-body').css('margin-top',this.$tabsMenu.outerHeight())},setActive:function(){this.$el.prev().addClass('active')},window:function(){return window},getParams:function(){var n;return n=this.mapped_params,this.params=_.extend({},this.model.get('params')),_.each(n,function(o){var l;l=vc.atts.parseFrame.call(this,o),this.params[o.param_name]=l},this),_.each(vc.edit_form_callbacks,function(o){o.call(this)},this),this.params},content:function(){return this.$content},save:function(){if(this.panelInit){var n=this.model.get('shortcode'),o=this.getParams(),l=_.extend({},vc.getDefaults(n),vc.getMergedParams(n,o));_.isUndefined(o.content)||(l.content=o.content),this.model.save({params:l}),this.showMessage(window.sprintf(window.i18nLocale.inline_element_saved,vc.getMapped(n).name),'success'),vc.frame_window||this.hide(),this.trigger('save')}},show:function(){this.$el.hasClass('vc_active')||(this.$el.addClass('vc_active'),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger('show'))},hide:function(n){n&&n.preventDefault(),this.checkAjax(),this.ajax=!1,this.model&&(this.model=null),vc.active_panel=!1,this.currentModelParams=!1,this._killEditor(),this.$el.removeClass('vc_active'),this.$el.find('.vc_properties-list').removeClass('vc_with-tabs').css('margin-top','auto'),this.$content.empty(),this.trigger('hide')},setTitle:function(){return this.$el.find(this.titleSelector).text(vc.getMapped(this.model.get('shortcode')).name+' '+window.i18nLocale.settings),this},_killEditor:function(){_.isUndefined(window.tinyMCE)||t('textarea.textarea_html',this.$el).each(function(){var n=t(this).attr('id');'4'===tinymce.majorVersion?window.tinyMCE.execCommand('mceRemoveEditor',!0,n):window.tinyMCE.execCommand('mceRemoveControl',!0,n)}),jQuery('body').off('click.wpcolorpicker')}}),vc.EditElementUIPanel=vc.EditElementPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({el:'#vc_ui-panel-edit-element',events:{'click [data-vc-ui-element="button-save"]':'save','click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="button-minimize"]':'toggleOpacity','click [data-vc-ui-element="panel-tab-control"]':'changeTab'},titleSelector:'[data-vc-ui-element="panel-title"]',initialize:function(){vc.EditElementUIPanel.__super__.initialize.call(this),this.on('afterResizeStart',function(){this.$el.css('maxHeight','none')})},show:function(){vc.EditElementUIPanel.__super__.show.call(this),t('[data-vc-ui-element="panel-tabs-controls"]',this.$el).remove(),this.$el.css('maxHeight','75vh')},tabsMenu:function(){if(!1===this.tabsInit){this.tabsInit=!0;var n=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]');n.length&&(this.$tabsMenu=n)}return this.$tabsMenu},buildTabs:function(){this.content().find('[data-vc-ui-element="panel-tabs-controls"]').prependTo('[data-vc-ui-element="panel-header-content"]')},changeTab:function(n){n.preventDefault();var o=t(n.currentTarget);o.parent().hasClass('vc_active')||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass('vc_active'),o.parent().addClass('vc_active'),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass('vc_active'),this.active_tab_index=this.$el.find(o.data('vcUiElementTarget')).addClass('vc_active').index(),this.initParams(),this.$tabsMenu&&this.$tabsMenu.vcTabsLine('checkDropdownContainerActive'),this.$content.parent().scrollTop(1).scrollTop(0),this.trigger('tabChange'))},checkTabs:function(){var n=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$tabsMenu=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]')),this.tabsMenu()&&(this.content().find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(o){var l=n.$tabsMenu.find('> [data-tab-index="'+o+'"]');t(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?l.hasClass('vc_dependent-hidden')&&(l.removeClass('vc_dependent-hidden'),window.setTimeout(function(){l.removeClass('vc_tab-color-animated')},200)):l.addClass('vc_dependent-hidden')}),this.$tabsMenu.vcTabsLine('refresh'),this.$tabsMenu.vcTabsLine('moveTabs'))}})}(window.jQuery),function(t){'use strict';vc.TemplateLibraryView=vc.PanelView.vcExtendUI(vc.HelperAjax).extend({myTemplates:[],$mainPopup:!1,$loadingPage:!1,$gridContainer:!1,$myTemplateContainer:!1,$popupItems:!1,$previewImage:!1,$previewTitle:!1,$previewUpdate:!1,$previewDownload:!1,$previewUpdateBtn:!1,$previewDownloadBtn:!1,$templatePreview:!1,$templatePage:!1,$downloadPage:!1,$updatePage:!1,$content:!1,$filter:!1,compiledGridTemplate:!1,compiledTemplate:!1,loaded:!1,data:!1,events:{'click [data-dismiss=panel]':'hide','click .vc_ui-panel-close-button':'closePopupButton','click .vc_ui-access-library-btn':'accessLibrary','click #vc_template-library-template-grid .vc_ui-panel-template-preview-button':'previewButton','click .vc_ui-panel-back-button':'backToTemplates','click .vc_ui-panel-template-download-button, #vc_template-library-download-btn':'downloadButton','click .vc_ui-panel-template-update-button, #vc_template-library-update-btn':'updateButton','keyup #vc_template_lib_name_filter':'filterTemplates','search #vc_template_lib_name_filter':'filterTemplates'},initialize:function(){_.bindAll(this,'loadLibrary','addTemplateStatus','loadMyTemplates','deleteTemplate'),this.$mainPopup=this.$el.find('.vc_ui-panel-popup'),this.$loadingPage=this.$el.find('.vc_ui-panel-loading'),this.$gridContainer=this.$el.find('#vc_template-library-template-grid'),this.$myTemplateContainer=this.$el.find('#vc_template-library-shared_templates'),this.$popupItems=this.$el.find('.vc_ui-panel-popup-item'),this.$previewImage=this.$el.find('.vc_ui-panel-preview-image'),this.$previewTitle=this.$el.find('.vc_ui-panel-template-preview .vc_ui-panel-title'),this.$previewUpdate=this.$el.find('#vc_template-library-update'),this.$previewDownload=this.$el.find('#vc_template-library-download'),this.$previewUpdateBtn=this.$previewUpdate.find('#vc_template-library-update-btn'),this.$previewDownloadBtn=this.$previewUpdate.find('#vc_template-library-download-btn'),this.$templatePreview=this.$el.find('.vc_ui-panel-template-preview'),this.$templatePage=this.$el.find('.vc_ui-panel-template-content'),this.$downloadPage=this.$el.find('.vc_ui-panel-download'),this.$updatePage=this.$el.find('.vc_ui-panel-update'),this.$filter=this.$el.find('#vc_template_lib_name_filter'),this.$content=this.$el.find('.vc_ui-templates-content');var n=t('#vc_template-grid-item').html();this.compiledGridTemplate=vc.template(n);var o=t('#vc_template-item').html();this.compiledTemplate=vc.template(o),vc.events.on('templates:delete',this.deleteTemplate)},getLibrary:function(){if(this.loaded)return void this.showLibrary();this.checkAjax();var n=this.getStorage('templates'),o=this;n&&'object'==typeof n&&!_.isEmpty(n)?(this.loaded=!0,this.loadLibrary(n),this.showLibrary()):this.ajax=t.getJSON('//vc-cc-templates.wpbakery.com/templates.json').done(function(l){o.setStorage('templates',l),o.loaded=!0,o.loadLibrary(l),o.showLibrary()}).always(this.resetAjax)},removeStorage:function(n){try{localStorage.removeItem('vc4-'+n),localStorage.removeItem('vc4-'+n+'_expiresIn')}catch(o){return!1}return!0},getStorage:function(n){var o=Date.now(),l=localStorage.getItem('vc4-'+n+'_expiresIn');if(void 0!==l&&null!==l||(l=0),l<o)return this.removeStorage(n),null;try{return JSON.parse(localStorage.getItem('vc4-'+n))}catch(s){return null}},setStorage:function(n,o,l){l=void 0===l||null===l?86400:Math.abs(l);var s=Date.now(),r=s+1e3*l;try{localStorage.setItem('vc4-'+n,JSON.stringify(o)),localStorage.setItem('vc4-'+n+'_expiresIn',r)}catch(d){return!1}return!0},loadLibrary:function(n){if(n){var o='',l=this;this.loaded=!0,this.data=n,this.$filter.val(''),n.forEach(function(s){s=l.addTemplateStatus(s),o+=l.compiledGridTemplate({id:s.id,title:s.title,thumbnailUrl:s.thumbnailUrl,previewUrl:s.previewUrl,status:s.status,downloaded:_.find(l.myTemplates,{id:s.id}),version:s.version})}),this.$gridContainer.html(o)}},showLibrary:function(){this.$loadingPage.addClass('vc_ui-hidden'),this.$mainPopup.removeClass('vc_ui-hidden'),this.$templatePage.removeClass('vc_ui-hidden')},addTemplateStatus:function(n){var o='',l=_.find(this.myTemplates,{id:n.id});if(l){var s=window.i18nLocale.ui_template_downloaded;n.version>l.version&&(s=window.i18nLocale.ui_template_fupdate),o='<span class="vc_ui-panel-template-item-info"><span>'+s+'</span></span>'}return n.status=o,n},loadMyTemplates:function(){var n='',o=this;this.myTemplates.forEach(function(l){n+=o.compiledTemplate({post_id:l.post_id,title:l.title})}),this.$myTemplateContainer.html(n)},closePopupButton:function(n){n&&n.preventDefault&&n.preventDefault(),this.$mainPopup.toggleClass('vc_ui-hidden'),this.$popupItems.addClass('vc_ui-hidden'),this.$content.removeClass('vc_ui-hidden')},accessLibrary:function(){this.$loadingPage.removeClass('vc_ui-hidden'),this.$content.addClass('vc_ui-hidden'),this.getLibrary()},previewButton:function(n){var o=t(n.currentTarget),l=o.data('preview-url'),s=o.data('title'),r=o.data('template-id'),d=o.data('template-version');this.$previewImage.attr('src',l),this.$previewTitle.text(s);var u=_.find(this.myTemplates,{id:r});this.$previewUpdate.toggleClass('vc_ui-hidden',!(u&&u.version<d)),this.$previewDownload.toggleClass('vc_ui-hidden',!!u),this.$previewUpdateBtn.data('template-id',r),this.$previewDownloadBtn.data('template-id',r),this.$popupItems.addClass('vc_ui-hidden'),this.$templatePreview.removeClass('vc_ui-hidden'),this.$templatePreview.attr('data-template-id',r)},backToTemplates:function(){this.$popupItems.addClass('vc_ui-hidden'),this.$templatePage.removeClass('vc_ui-hidden')},deleteTemplate:function(n){if('shared_templates'===n.type){var o=_.findIndex(this.myTemplates,{post_id:n.id});-1!==o&&(this.myTemplates.splice(o,1),this.loaded&&this.loadLibrary(this.data))}},downloadButton:function(n){n&&n.preventDefault&&n.preventDefault();var o=jQuery(n.currentTarget).closest('[data-template-id]').data('templateId');o&&(this.showDownloadOverlay(),this.downloadTemplate(o))},updateButton:function(n){n&&n.preventDefault&&n.preventDefault(),jQuery(n.currentTarget).closest('[data-template-id]').data('templateId')&&this.showUpdateOverlay()},showDownloadOverlay:function(){this.$popupItems.addClass('vc_ui-hidden'),this.$downloadPage.removeClass('vc_ui-hidden')},hideDownloadOverlay:function(n){n&&alert(n),this.$downloadPage.addClass('vc_ui-hidden'),this.$templatePage.removeClass('vc_ui-hidden')},showUpdateOverlay:function(){this.$popupItems.addClass('vc_ui-hidden'),this.$updatePage.removeClass('vc_ui-hidden')},hideUpdateOverlay:function(){this.$updatePage.addClass('vc_ui-hidden'),this.$templatePage.removeClass('vc_ui-hidden')},downloadTemplate:function(n){this.checkAjax();var o=!0;this.ajax=t.ajax({type:'POST',url:window.ajaxurl,data:{action:'vc_shared_templates_download',id:n,_vcnonce:window.vcAdminNonce},dataType:'json',context:this}).done(function(l){if(l&&l.success){var s=_.find(this.data,{id:n});s&&(o=!1,s.post_id=l.data.post_id,this.myTemplates.unshift(s),this.loadMyTemplates(),this.loadLibrary(this.data),this.showLibrary())}}).always(function(l,s){var r='';('success'!==s||o)&&(r=window.i18nLocale.ui_templates_failed_to_download),this.hideDownloadOverlay(r),this.resetAjax()})},filterTemplates:function(){var n=this.$filter.val();t('.vc_ui-panel-template-item.vc_ui-visible',this.$gridContainer).removeClass('vc_ui-visible'),t('.vc_ui-panel-template-item .vc_ui-panel-template-item-name:containsi(\''+n+'\')',this.$gridContainer).closest('.vc_ui-panel-template-item').addClass('vc_ui-visible')}}),t(function(){window.vcTemplatesLibraryData&&(vc.templatesLibrary=new vc.TemplateLibraryView({el:'[data-vc-ui-element="panel-edit-element-tab"][data-tab="shared_templates"]'}),vc.templatesLibrary.myTemplates=window.vcTemplatesLibraryData.templates||[],vc.templatesLibrary.loadMyTemplates())})}(window.jQuery),function(t){'use strict';vc.PostSettingsUIPanelFrontendEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:'post_settings',uiEvents:{setSize:'setEditorSize',show:'setEditorSize'},setSize:function(){this.trigger('setSize')},setDefaultHeightSettings:function(){this.$el.css('height','75vh')},setEditorSize:function(){this.editor.setSizeResizable()}}),vc.PostSettingsUIPanelBackendEditor=vc.PostSettingsPanelViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({uiEvents:{setSize:'setEditorSize',show:'setEditorSize',render:'removeChangeTitleField'},setSize:function(){this.trigger('setSize')},setEditorSize:function(){this.editor.setSizeResizable()},setDefaultHeightSettings:function(){this.$el.css('height','75vh')},removeChangeTitleField:function(){t('#vc_settings-title-container').remove()}})}(window.jQuery),function(){'use strict';var n={'click [data-vc-ui-element="button-save"]':'save','click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="button-minimize"]':'toggleOpacity','click [data-vc-ui-element="button-layout"]':'setLayout','click [data-vc-ui-element="button-update-layout"]':'updateFromInput'};vc.RowLayoutUIPanelFrontendEditor=vc.RowLayoutEditorPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:'rowLayouts',events:n}),vc.RowLayoutUIPanelBackendEditor=vc.RowLayoutEditorPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:'rowLayouts',events:n})}(window.jQuery),function(t){'use strict';vc.PresetSettingsUIPanelFrontendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperAjax).vcExtendUI({panelName:'preset_settings',showMessageDisabled:!1,events:{'click [data-vc-ui-delete="preset-title"]':'removePreset','click [data-vc-ui-element="button-close"]':'hide','click [data-vc-ui-element="button-minimize"]':'toggleOpacity','click [data-vc-ui-add-preset]':'createPreset'},initialize:function(n){this.frontEnd=n&&n.frontEnd},createPreset:function(n){var o,l,s,r,d,u,g,h,f,w;if(_.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),o=t(n.currentTarget),l=o.data('preset'),s=o.data('tag'),g={},h={width:'1/1'},f={shortcode:'vc_row',params:g},!0===this.frontEnd){this.builder.create(f);var k={shortcode:'vc_column',params:h,parent_id:this.builder.lastID()};this.builder.create(k);var C={shortcode:s,parent_id:this.builder.lastID()};l&&(C.preset=l),vc.closeActivePanel(),this.builder.create(C),this.model=this.builder.last(),this.builder.render()}else{r=vc.shortcodes.create(f);var k={shortcode:'vc_column',params:h,parent_id:r.id,root_id:r.id};d=vc.shortcodes.create(k),u=r;var C={shortcode:s,parent_id:d.id,root_id:r.id};l&&(C.preset=l),u=vc.shortcodes.create(C),vc.closeActivePanel(),this.model=u}(w=!(_.isBoolean(vc.getMapped(s).show_settings_on_create)&&!1===vc.getMapped(s).show_settings_on_create))&&this.showEditForm()},showEditForm:function(){vc.edit_element_block_view.render(this.model)},render:function(){return this.$el.css('left',(t(window).width()-this.$el.width())/2),this},removePreset:function(n){n&&n.preventDefault();var o=jQuery(n.currentTarget).closest('[data-vc-ui-delete="preset-title"]'),l=o.data('preset'),s=o.data('preset-parent');this.deleteSettings(l,s,n)},deleteSettings:function(n,o){var l=this;return!!confirm(window.i18nLocale.delete_preset_confirmation)&&(this.checkAjax(),this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:this.deleteSettingsAjaxData(o,n),context:this}).done(function(s){s&&s.success&&(this.showMessage(window.i18nLocale.preset_removed,'success'),l.$el.find('[data-preset="'+n+'"]').closest('.vc_ui-template').remove(),vc.events.trigger('vc:deletePreset',n))}).always(this.resetAjax),this.ajax)},deleteSettingsAjaxData:function(n,o){return{action:'vc_action_delete_settings_preset',shortcode_name:n,vc_inline:!0,id:o,_vcnonce:window.vcAdminNonce}},showMessage:function(n,o){var l;if(this.showMessageDisabled)return!1;l='vc_col-xs-12 wpb_element_wrapper',this.message_box_timeout&&this.$el.find('[data-vc-panel-message]').remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var r=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>'),s;'error'===o?s=t('<div class="'+l+'" data-vc-panel-message>').html(r({color:'danger',icon:'times',text:n})):'warning'===o?s=t('<div class="'+l+'" data-vc-panel-message>').html(r({color:'warning',icon:'exclamation-triangle',text:n})):'success'===o?s=t('<div class="'+l+'" data-vc-panel-message>').html(r({color:'success',icon:'check',text:n})):void 0;s.prependTo(this.$el.find('.vc_properties-list')),s.fadeIn(),this.message_box_timeout=window.setTimeout(function(){s.remove()},6e3)}})}(window.jQuery),_.isUndefined(window.vc)&&(window.vc={}),void 0===window.setCookie&&(window.setCookie=function(t,n,o){var l=new Date;l.setDate(l.getDate()+o);var s=encodeURIComponent(n)+(null===o?'':'; expires='+l.toUTCString());document.cookie=t+'='+s}),void 0===window.getCookie&&(window.getCookie=function(t){var s=document.cookie.split(';'),n,o,l;for(n=0;n<s.length;n++)if(o=s[n].substr(0,s[n].indexOf('=')),l=s[n].substr(s[n].indexOf('=')+1),(o=o.replace(/^\s+|\s+$/g,''))==t)return decodeURIComponent(l)}),function(t){t.expr[':'].containsi=function(n,o,l){return 0<=jQuery(n).text().toUpperCase().indexOf(l[3].toUpperCase())}}(window.jQuery);var vc_regexp_shortcode=_.memoize(function(){return /\[(\[?)([\w|-]+\b)(?![\w-])([^\]\/]*(?:\/(?!\])[^\]\/]*)*?)(?:(\/)\]|\](?:([^\[]*(?:\[(?!\/\2\])[^\[]*)*)(\[\/\2\]))?)(\]?)/});if(vc.memoizeWrapper=function(t,n){var o={};return function(){var l=n?n.apply(this,arguments):arguments[0];return _.hasOwnProperty.call(o,l)||(o[l]=t.apply(this,arguments)),_.isObject(o[l])?jQuery.fn.extend(!0,{},o[l]):o[l]}},vc.events.on('shortcodes:vc_row:add:param:name:parallax shortcodes:vc_row:update:param:name:parallax',function(t,n){if(n){var o=t.get('params');o&&o.css&&(o.css=o.css.replace(/(background(\-position)?\s*\:\s*[\S]+(\s*[^\!\s]+)?)[\s*\!important]*/g,'$1'),t.set('params',o,{silent:!0}))}}),vc.events.on('shortcodes:vc_single_image:sync shortcodes:vc_single_image:add',function(t){var n=t.get('params');n.link&&!n.onclick&&(n.onclick='custom_link',t.save({params:n}))}),window.vcConsoleLog=function(){vcConsoleLog.history=vcConsoleLog.history||[],vcConsoleLog.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))},_.isUndefined(window.vc))var vc={};window.vc.filters={templates:[]},window.vc.addTemplateFilter=function(t){_.isFunction(t)&&this.filters.templates.push(t)},function(t){function n(C){return encodeURIComponent(C).replace(/[!'()*]/g,escape)}function o(C,S){this.el=C,this.$el=t(this.el),this.$el_wrap='',this.$block='',this.suggester='',this.selected_items=[],this.options=_.isObject(S)?S:{},_.defaults(this.options,{css_class:'vc_suggester',limit:!1,source:{},predefined:[],locked:!1,select_callback:function(){},remove_callback:function(){},update_callback:function(){},check_locked_callback:function(){return!1}}),this.init()}function l(C){this.el=C,this.$el=t(this.el),this.$data_field=this.$el.find('.wpb_vc_param_value'),this.$toolbar=this.$el.find('.vc_sorted-list-toolbar'),this.$current_control=this.$el.find('.vc_sorted-list-container'),_.defaults(this.options,{}),this.init()}var s;window.init_textarea_html=function(C){var S,T,P,E;S=t('#wp-link'),S.parent().hasClass('wp-dialog')&&S.wpdialog('destroy'),T=C.attr('id'),P=C.closest('.edit_form_line'),E=P.find('.vc_textarea_html_content');try{_.isUndefined(tinyMCEPreInit.qtInit[T])&&(window.tinyMCEPreInit.qtInit[T]=_.extend({},window.tinyMCEPreInit.qtInit[window.wpActiveEditor],{id:T})),window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit[window.wpActiveEditor]&&(window.tinyMCEPreInit.mceInit[T]=_.extend({},window.tinyMCEPreInit.mceInit[window.wpActiveEditor],{resize:'vertical',height:200,id:T,setup:function(j){void 0===j.on?j.onInit.add(function(){window.wpActiveEditor=T}):j.on('init',function(){window.wpActiveEditor=T})}}),window.tinyMCEPreInit.mceInit[T].plugins=window.tinyMCEPreInit.mceInit[T].plugins.replace(/,?wpfullscreen/,''),window.tinyMCEPreInit.mceInit[T].wp_autoresize_on=!1),vc.edit_element_block_view&&vc.edit_element_block_view.currentModelParams?C.val(vc_wpautop(vc.edit_element_block_view.currentModelParams[E.attr('name')]||'')):C.val(E.val()),quicktags(window.tinyMCEPreInit.qtInit[T]),QTags._buttonsInit(),window.tinymce&&(window.switchEditors&&window.switchEditors.go(T,'tmce'),'4'===tinymce.majorVersion&&tinymce.execCommand('mceAddEditor',!0,T)),s=T,window.wpActiveEditor=T}catch(j){C.data('vcTinyMceDisabled',!0).appendTo(P),t('#wp-'+T+'-wrap').remove(),console&&console.error&&(console.error('VC: Tinymce error! Compatibility problem with other plugins.'),console.error(j))}},Color.prototype.toString=function(){if(1>this._alpha)return this.toCSS('rgba',this._alpha).replace(/\s+/g,'');var C=parseInt(this._color,10).toString(16);if(this.error)return'';if(6>C.length)for(var S=6-C.length-1;0<=S;S--)C='0'+C;return'#'+C},vc.loop_partial=function(C,S,T,P){var E=_.isObject(T)&&!_.isUndefined(T[S])?T[S]:'';return vc.template(t('#_vcl-'+C).html(),vc.templateOptions.custom)({name:S,data:E,settings:P})},vc.loop_field_not_hidden=function(C,S){return!(_.isObject(S[C])&&_.isBoolean(S[C].hidden)&&!0===S[C].hidden)},vc.is_locked=function(C){return _.isObject(C)&&_.isBoolean(C.locked)&&!0===C.locked},o.prototype={constructor:o,init:function(){_.bindAll(this,'buildSource','itemSelected','labelClick','setFocus','resize'),this.$el.wrap('<ul class="'+this.options.css_class+'"><li class="input"/></ul>'),this.$el_wrap=this.$el.parent(),this.$block=this.$el_wrap.closest('ul').append(t('<li class="clear"/>')),this.$el.focus(this.resize).blur(function(){t(this).parent().width(170),t(this).val('')}),this.$block.click(this.setFocus),this.suggester=this.$el.data('suggest'),this.$el.autocomplete({source:this.buildSource,select:this.itemSelected,minLength:2,focus:function(){return!1}}).data('ui-autocomplete')._renderItem=function(C,S){return t('<li data-value="'+S.value+'">').append('<a>'+S.name+'</a>').appendTo(C)},this.$el.autocomplete('widget').addClass('vc_ui-front'),_.isArray(this.options.predefined)&&_.each(this.options.predefined,function(C){this.create(C)},this)},resize:function(){var C=this.$el_wrap.position(),S=this.$block.position();this.$el_wrap.width(parseFloat(this.$block.width())-(parseFloat(C.left)-parseFloat(S.left)+4))},setFocus:function(C){C.preventDefault(),t(C.target).hasClass(this.options.css_class)&&this.$el.trigger('focus')},itemSelected:function(C,S){return this.$el.blur(),this.create(S.item),this.$el.focus(),!1},create:function(C){var P=this.selected_items.push(C)-1,E=!0===this.options.check_locked_callback(this.$el,C)?'':' <a class="remove">&times;</a>',S,T;_.isUndefined(this.selected_items[P].action)&&(this.selected_items[P].action='+'),T='-'===this.selected_items[P].action?' exclude':' include',S=t('<li class="vc_suggest-label'+T+'" data-index="'+P+'" data-value="'+C.value+'"><span class="label">'+C.name+'</span>'+E+'</li>'),S.insertBefore(this.$el_wrap),_.isEmpty(E)||S.click(this.labelClick),this.options.select_callback(S,this.selected_items)},labelClick:function(C){C.preventDefault();var S=t(C.currentTarget),T=parseInt(S.data('index'),10);return t(C.target).is('.remove')?(this.selected_items.splice(T,1),this.options.remove_callback(S,this.selected_items),S.remove(),!1):void(this.selected_items[T].action='+'===this.selected_items[T].action?'-':'+','+'===this.selected_items[T].action?S.removeClass('exclude').addClass('include'):S.removeClass('include').addClass('exclude'),this.options.update_callback(S,this.selected_items))},buildSource:function(C,S){this.ajax&&(this.ajax.abort(),S([]),this.ajax=!1);var T=_.filter(_.map(this.selected_items,function(P){return P?P.value:void 0})).join(',');this.ajax=t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:{action:'wpb_get_loop_suggestion',field:this.suggester,exclude:T,query:C.term,_vcnonce:window.vcAdminNonce}}).done(function(P){S(P)})}},t.fn.suggester=function(C){return this.each(function(){var S=t(this),T=S.data('suggester');T||S.data('suggester',T=new o(this,C)),'string'==typeof C&&T[C]()})};var r=Backbone.View.extend({className:'loop_params_holder',events:{'click input, select':'save','change input, select':'save','change :checkbox[data-input]':'updateCheckbox'},query_options:{},return_array:{},controller:'',initialize:function(){_.bindAll(this,'save','updateSuggestion','suggestionLocked')},render:function(C){var S=vc.template(t('#vcl-loop-frame').html(),_.extend({},vc.templateOptions.custom,{variable:'loop'}));return this.controller=C,this.$el.html(S(this.model)),this.controller.$el.append(this.$el),_.each(t('[data-suggest]'),function(T){var P=t(T),E=window.decodeURIComponent(t('[data-suggest-prefill='+P.data('suggest')+']').val());P.suggester({predefined:t.parseJSON(E),select_callback:this.updateSuggestion,update_callback:this.updateSuggestion,remove_callback:this.updateSuggestion,check_locked_callback:this.suggestionLocked})},this),this},show:function(){this.$el.slideDown()},save:function(){this.return_array={},_.each(this.model,function(S,T){var S=this.getValue(T,S);_.isString(S)&&!_.isEmpty(S)&&(this.return_array[T]=S)},this),this.controller.setInputValue(this.return_array)},getValue:function(C){return t('[name='+C+']',this.$el).val()},hide:function(){this.$el.slideUp()},toggle:function(){this.$el.is(':animated')||this.$el.slideToggle()},updateCheckbox:function(C){var S=t(C.currentTarget),T=S.data('input'),P=t('[data-name='+T+']',this.$el),E=[];t('[data-input='+T+']:checked').each(function(){E.push(t(this).val())}),P.val(E),this.save()},updateSuggestion:function(C,S){var P=C.closest('[data-block=suggestion]'),T;T=_.reduce(S,function(E,j){return _.isEmpty(j)?'':E+(_.isEmpty(E)?'':',')+('-'===j.action?'-':'')+j.value},'').trim(),P.find('[data-suggest-value]').val(T).trigger('change')},suggestionLocked:function(C,S){var T=S.value,P=C.closest('[data-block=suggestion]').find('[data-suggest-value]').data('suggest-value');return this.controller.settings&&this.controller.settings[P]&&_.isBoolean(this.controller.settings[P].locked)&&1==this.controller.settings[P].locked&&_.isString(this.controller.settings[P].value)&&0<=_.indexOf(this.controller.settings[P].value.replace('-','').split(/\,/),''+T)}}),d=Backbone.View.extend({events:{'click .vc_loop-build':'showEditor'},initialize:function(){_.bindAll(this,'createEditor'),this.$input=t('.wpb_vc_param_value',this.$el),this.$button=this.$el.find('.vc_loop-build'),this.data=this.$input.val(),this.settings=t.parseJSON(window.decodeURIComponent(this.$button.data('settings')))},render:function(){return this},showEditor:function(C){return(C.preventDefault(),_.isObject(this.loop_editor_view))?(this.loop_editor_view.toggle(),!1):void t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:{action:'wpb_get_loop_settings',value:this.data,settings:this.settings,post_id:vc.post_id,_vcnonce:window.vcAdminNonce}}).done(this.createEditor)},createEditor:function(C){this.loop_editor_view=new r({model:_.isEmpty(C)?{}:C}),this.loop_editor_view.render(this).show()},setInputValue:function(C){this.$input.val(_.map(C,function(S,T){return T+':'+S}).join('|'))}}),u=Backbone.View.extend({events:{'click .vc_options-edit':'showEditor','click .vc_close-button':'showEditor','click input, select':'save','change input, select':'save','keyup input':'save'},data:{},fields:{},initialize:function(){this.$button=this.$el.find('.vc_options-edit'),this.$form=this.$el.find('.vc_options-fields'),this.$input=this.$el.find('.wpb_vc_param_value'),this.settings=this.$form.data('settings'),this.parseData(),this.render()},render:function(){var C='';return _.each(this.settings,function(S){_.isUndefined(this.data[S.name])?_.isUndefined(S.value)||(S.value=S.value.toString().split(','),this.data[S.name]=S.value):S.value=this.data[S.name],this.fields[S.name]=S;var T=t('#vcl-options-field-'+S.type);if(T.is('script')){var P=vc.template(T.html(),vc.templateOptions.custom);C+=P(_.extend({},{name:'',label:'',value:[],options:'',description:''},S))}},this),this.$form.html(C+this.$form.html()),this},parseData:function(){_.each(this.$input.val().split('|'),function(C){if(C.match(/\:/)){var S=C.split(':'),T=S[0],P=S[1];this.data[T]=_.map(P.split(','),function(E){return window.decodeURIComponent(E)})}},this)},saveData:function(){var C=_.map(this.data,function(S,T){return T+':'+_.map(S,function(P){return window.encodeURIComponent(P)}).join(',')}).join('|');this.$input.val(C)},showEditor:function(){this.$form.slideToggle()},save:function(C){var S=t(C.currentTarget);if(S.is(':checkbox')){var T=[];this.$el.find('input[name='+S.attr('name')+']').each(function(){this.checked&&T.push(t(this).val())}),this.data[S.attr('name')]=T}else this.data[S.attr('name')]=[S.val()];this.saveData()}});l.prototype={constructor:l,init:function(){_.bindAll(this,'controlEvent','save'),this.$toolbar.on('change','input',this.controlEvent);var C=this.$data_field.val().split(',');for(var S in C){var T=C[S].split('|'),P=!!T.length&&this.$toolbar.find('[data-element='+decodeURIComponent(T[0])+']');!1!==P&&P.is('input')&&(P.prop('checked',!0),this.createControl({value:P.val(),label:P.parent().text(),sub:P.data('subcontrol'),sub_value:_.map(T.slice(1),function(E){return window.decodeURIComponent(E)})}))}this.$current_control.sortable({stop:this.save}).on('change','select',this.save)},createControl:function(C){var S='',T=_.isUndefined(C.sub_value)?[]:C.sub_value;_.isArray(C.sub)&&_.each(C.sub,function(P,E){S+=' <select>',_.each(P,function(j){S+='<option value="'+j[0]+'"'+(_.isString(T[E])&&T[E]===j[0]?' selected="true"':'')+'>'+j[1]+'</option>'}),S+='</select>'},this),this.$current_control.append('<li class="vc_control-'+C.value+'" data-name="'+C.value+'">'+C.label+S+'</li>')},controlEvent:function(C){var S=t(C.currentTarget);S[0].checked?this.createControl({value:S.val(),label:S.parent().text(),sub:S.data('subcontrol')}):this.$current_control.find('.vc_control-'+S.val()).remove(),this.save()},save:function(){var C=_.map(this.$current_control.find('[data-name]'),function(S){var T=encodeURIComponent(t(S).data('name'));return t(S).find('select').each(function(){var P=t(this);P.is('select')&&''!==P.val()&&(T+='|'+encodeURIComponent(P.val()))}),T}).join(',');this.$data_field.val(C)}},t.fn.VcSortedList=function(C){return this.each(function(){var S=t(this),T=S.data('vc_sorted_list');_.isObject(C),T||S.data('vc_sorted_list',T=new l(this,C)),'string'==typeof C&&T[C]()})};var g=Backbone.View.extend({preview_el:'.vc_google_fonts_form_field-preview-container > span',font_family_dropdown_el:'.vc_google_fonts_form_field-font_family-container > select',font_style_dropdown_el:'.vc_google_fonts_form_field-font_style-container > select',font_style_dropdown_el_container:'.vc_google_fonts_form_field-font_style-container',status_el:'.vc_google_fonts_form_field-status-container > span',events:{'change .vc_google_fonts_form_field-font_family-container > select':'fontFamilyDropdownChange','change .vc_google_fonts_form_field-font_style-container > select':'fontStyleDropdownChange'},initialize:function(){_.bindAll(this,'previewElementInactive','previewElementActive','previewElementLoading'),this.$preview_el=t(this.preview_el,this.$el),this.$font_family_dropdown_el=t(this.font_family_dropdown_el,this.$el),this.$font_style_dropdown_el=t(this.font_style_dropdown_el,this.$el),this.$font_style_dropdown_el_container=t(this.font_style_dropdown_el_container,this.$el),this.$status_el=t(this.status_el,this.$el),this.fontFamilyDropdownRender()},render:function(){return this},previewElementRender:function(){return this.$preview_el.css({'font-family':this.font_family,'font-style':this.font_style,'font-weight':this.font_weight}),this},previewElementInactive:function(){this.$status_el.text(window.i18nLocale.gfonts_loading_google_font_failed||'Loading google font failed.').css('color','#FF0000')},previewElementActive:function(){this.$preview_el.text('Grumpy wizards make toxic brew for the evil Queen and Jack.').css('color','inherit'),this.fontStyleDropdownRender()},previewElementLoading:function(){this.$preview_el.text(window.i18nLocale.gfonts_loading_google_font||'Loading Font...')},fontFamilyDropdownRender:function(){return this.fontFamilyDropdownChange(),this},fontFamilyDropdownChange:function(){var C=this.$font_family_dropdown_el.find(':selected');return this.font_family_url=C.val(),this.font_family=C.attr('data[font_family]'),this.font_types=C.attr('data[font_types]'),this.$font_style_dropdown_el_container.parent().hide(),this.font_family_url&&0<this.font_family_url.length&&WebFont.load({google:{families:[this.font_family_url]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading}),this},fontStyleDropdownRender:function(){var C=this.font_types,S=C.split(','),T='',P=this.$font_family_dropdown_el.attr('default[font_style]');for(var E in S){var j=S[E].split(':'),D='';_.isString(P)&&0<P.length&&S[E]==P&&(D='selected'),T=T+'<option '+D+' value="'+S[E]+'" data[font_weight]="'+j[1]+'" data[font_style]="'+j[2]+'" class="'+j[2]+'_'+j[1]+'" >'+j[0]+'</option>'}return this.$font_style_dropdown_el.html(T),this.$font_style_dropdown_el_container.parent().show(),this.fontStyleDropdownChange(),this},fontStyleDropdownChange:function(){var C=this.$font_style_dropdown_el.find(':selected');return this.font_weight=C.attr('data[font_weight]'),this.font_style=C.attr('data[font_style]'),this.previewElementRender(),this}}),h=Backbone.View.extend({min_length:2,delay:500,auto_focus:!0,ajax_url:window.ajaxurl,source_data:function(){return{}},replace_values_on_select:!1,initialize:function(C){_.bindAll(this,'sortableChange','resize','labelRemoveHook','updateItems','sortableCreate','sortableUpdate','source','select','labelRemoveClick','createBox','focus','response','change','close','open','create','search','_renderItem','_renderMenu','_renderItemData','_resizeMenu'),C=t.extend({min_length:this.min_length,delay:this.delay,auto_focus:this.auto_focus,replace_values_on_select:this.replace_values_on_select},C),this.options=C,this.param_name=this.options.param_name,this.$el=this.options.$el,this.$el_wrap=this.$el.parent(),this.$sortable_wrapper=this.$el_wrap.parent(),this.$input_param=this.options.$param_input,this.selected_items=[],this.isMultiple=!1,this.render()},resize:function(){var C=this.$el_wrap.position(),S=this.$block.position();this.$el.autocomplete('widget').width(parseFloat(this.$block.width())-(parseFloat(C.left)-parseFloat(S.left)+4)+11)},enableMultiple:function(){this.isMultiple=!0,this.$el.show(),this.$el.focus()},enableSortable:function(){this.sortable=this.$sortable_wrapper.sortable({items:'.vc_data',axis:'y',change:this.sortableChange,create:this.sortableCreate,update:this.sortableUpdate})},updateItems:function(){this.selected_items.length?this.$input_param.val(this.getSelectedItems().join(', ')):this.$input_param.val('')},sortableChange:function(){},itemsCreate:function(){var C=[];this.$block.find('.vc_data').each(function(S,T){C.push({label:T.dataset.label,value:T.dataset.value})}),this.selected_items=C},sortableCreate:function(){},sortableUpdate:function(){var T=this.$sortable_wrapper.sortable('toArray',{attribute:'data-index'}),P=[];_.each(T,function(j){P.push(this.selected_items[j])},this);var E=0;t('li.vc_data',this.$sortable_wrapper).each(function(){t(this).attr('data-index',E++)}),this.selected_items=P,this.updateItems()},getWidget:function(){return this.$el.autocomplete('widget')},render:function(){if(this.$el.focus(this.resize),this.data=this.$el.autocomplete({source:this.source,minLength:this.options.min_length,delay:this.options.delay,autoFocus:this.options.auto_focus,select:this.select,focus:this.focus,response:this.response,change:this.change,close:this.close,open:this.open,create:this.create,search:this.search}),this.data.data('ui-autocomplete')._renderItem=this._renderItem,this.data.data('ui-autocomplete')._renderMenu=this._renderMenu,this.data.data('ui-autocomplete')._resizeMenu=this._resizeMenu,0<this.$input_param.val().length){this.isMultiple?this.$el.focus():this.$el.hide();var C=this;t('.vc_autocomplete-label.vc_data',this.$sortable_wrapper).each(function(){C.labelRemoveHook(t(this))})}return this.getWidget().addClass('vc_ui-front').addClass('vc_ui-auotocomplete'),this.$block=this.$el_wrap.closest('ul').append(t('<li class="clear"/>')),this.itemsCreate(),this},close:function(){this.selected&&this.options.no_hide&&(this.getWidget().show(),2<++this.selected&&(this.selected=void 0))},open:function(){var T=this.getWidget().menu(),P=T.position();T.css('left',P.left-6),T.css('top',P.top+2)},focus:function(C){if(!this.options.replace_values_on_select)return C.preventDefault(),!1},create:function(){},change:function(){},response:function(){},search:function(){},select:function(C,S){if(this.selected=1,S.item){if(this.options.unique_values){var T=this.getWidget().data('uiMenu').active;if(this.options.groups){var P=T.prev(),E=T.next();P.hasClass('vc_autocomplete-group')&&!E.hasClass('vc_autocomplete-item')&&P.remove()}T.remove();var j=this;t('li.ui-menu-item',this.getWidget()).length||(j.selected=void 0)}this.createBox(S.item),this.isMultiple?this.$el.focus():this.$el.hide()}return!1},createBox:function(C){var T=this.selected_items.push(C)-1,S;this.updateItems(),S=t('<li class="vc_autocomplete-label vc_data" data-index="'+T+'" data-value="'+C.value+'" data-label="'+C.label+'"><span class="vc_autocomplete-label"><a>'+C.label+'</a></span><a class="vc_autocomplete-remove">&times;</a></li>'),S.insertBefore(this.$el_wrap),this.labelRemoveHook(S)},labelRemoveHook:function(C){this.$el.blur(),this.$el.val(''),C.click(this.labelRemoveClick)},labelRemoveClick:function(C){C.preventDefault();var T=t(C.currentTarget);if(t(C.target).is('.vc_autocomplete-remove'))return this.selected_items.splice(T.index(),1),T.remove(),this.updateItems(),this.$el.show(),!1},getSelectedItems:function(){if(this.selected_items.length){var C=[];return _.each(this.selected_items,function(S){C.push(S.value)}),C}return!1},_renderMenu:function(C,S){var T=this,P=null;this.options.groups&&S.sort(function(E,j){return E.group>j.group}),t.each(S,function(E,j){T.options.groups&&j.group!=P&&(P=j.group,C.append('<li class=\'ui-autocomplete-group vc_autocomplete-group\' aria-label=\''+P+'\'>'+P+'</li>')),T._renderItemData(C,j)})},_renderItem:function(C,S){return t('<li data-value="'+S.value+'" class="vc_autocomplete-item">').append('<a>'+S.label+'</a>').appendTo(C)},_renderItemData:function(C,S){return this._renderItem(C,S).data('ui-autocomplete-item',S)},_resizeMenu:function(){},clearValue:function(){this.selected_items=[],this.updateItems(),t('.vc_autocomplete-label.vc_data',this.$sortable_wrapper).remove()},source:function(C,S){var T=this;this.options.values&&0<this.options.values.length?S(this.options.unique_values?t.ui.autocomplete.filter(_.difference(this.options.values,this.selected_items),C.term):t.ui.autocomplete.filter(this.options.values,C.term)):t.ajax({type:'POST',dataType:'json',url:this.ajax_url,data:t.extend({action:'vc_get_autocomplete_suggestion',shortcode:vc.active_panel.model.get('shortcode'),param:this.param_name,query:C.term,_vcnonce:window.vcAdminNonce},this.source_data(C,S))}).done(function(P){S(T.options.unique_values?_.filter(P,function(E){return!_.findWhere(T.selected_items,E)}):P)})}}),f=Backbone.View.extend({$content:{},initialize:function(){_.bindAll(this,'content'),this.$content=this.$el,this.model=vc.active_panel.model},setContent:function(C){this.$content=C},content:function(){return this.$content},render:function(){var C;return C=this,t('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each(function(){var S=t(this),T=S.data('param_settings');vc.atts.init.call(C,T,S),S.data('vcInitParam',!0)}),this}}),w=Backbone.View.extend({options:{max_items:0,sortable:!0,deletable:!0,collapsible:!0},items:0,$ul:!1,initializer:{},mappedParams:{},adminLabelParams:[],groupParamName:'',events:{'click > .edit_form_line > .vc_param_group-list > .vc_param_group-add_content':'addNew'},initialize:function(C){var S,T,P;this.$ul=this.$el.find('> .edit_form_line > .vc_param_group-list'),S=t('> .wpb_vc_row',this.$ul),this.initializer=new f({el:this.$el}),this.model=vc.active_panel.model,T=this.$ul.data('settings'),this.mappedParams={},this.adminLabelParams=[],this.options=_.defaults({},_.isObject(C.settings)?C.settings:{},T,this.options),this.groupParamName=this.options.param.param_name,_.isObject(this.options.param)&&_.isArray(this.options.param.params)&&_.each(this.options.param.params,function(E){var j;j=this.groupParamName+'_'+E.param_name,this.mappedParams[j]=E,_.isObject(E)&&!0===E.admin_label&&this.adminLabelParams.push(j)},this),this.items=0,P=this,S.length&&S.each(function(){S.data('vc-param-group-param',new k({el:t(this),parent:P})),P.items++,P.afterAdd(t(this),'init')}),this.options.sortable&&this.$ul.sortable({handle:'.vc_control.column_move',items:'> .wpb_vc_row:not(vc_param_group-add_content-wrapper)',placeholder:'vc_placeholder'})},addNew:function(C){if(C.preventDefault(),this.addAllowed()){var S,T;if(void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.before_add&&'function'==typeof(T=window[this.options.param.callbacks.before_add])&&!T())return;S=t(JSON.parse(this.$ul.next('.vc_param_group-template').html())),S.removeClass('vc_param_group-add_content-wrapper'),S.insertBefore(C.currentTarget),S.show(),this.initializer.setContent(S.find('> .wpb_element_wrapper')),this.initializer.render(),this.items++,S.data('vc-param-group-param',new k({el:S,parent:this})),this.afterAdd(S,'new'),vc.events.trigger('vc-param-group-add-new',C,S,this)}},addAllowed:function(){return 0<this.options.max_items&&this.items+1<=this.options.max_items||0>=this.options.max_items},afterAdd:function(C,S){var T;this.addAllowed()||(this.$ul.find('> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone').hide(),this.$ul.find('> .vc_param_group-add_content').hide()),this.options.sortable||this.$ul.find('> .wpb_vc_row > .vc_param_group-controls > .vc_control.column_move').hide(),this.options.deletable||this.$ul.find('> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_delete').hide(),this.options.collapsible||this.$ul.find('> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_toggle').hide(),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_add&&'function'==typeof(T=window[this.options.param.callbacks.after_add])&&T(C,S)},afterDelete:function(){var C;this.addAllowed()&&(this.$ul.find('> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone').show(),this.$ul.find('> .vc_param_group-add_content').show()),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_delete&&'function'==typeof(C=window[this.options.param.callbacks.after_delete])&&C()}}),k=Backbone.View.extend({dependentElements:!1,mappedParams:!1,groupParamName:'',adminLabelParams:[],events:{'click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_toggle':'toggle','click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_delete':'deleteParam','click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_clone':'clone'},initialize:function(C){this.options=C,this.$content=this.options.parent.$ul,this.model=vc.active_panel.model,this.mappedParams=this.options.parent.mappedParams,this.groupParamName=this.options.parent.groupParamName,this.adminLabelParams=this.options.parent.adminLabelParams,this.dependentElements={},_.bindAll(this,'hookDependent'),this.initializeDependency(),_.bindAll(this,'hookAdminLabel'),this.initializeAdminLabels()},initializeAdminLabels:function(){var C,S,T;for(T=this.hookAdminLabel,C=0;C<this.adminLabelParams.length;C++)S=t('[name='+this.adminLabelParams[C]+'].wpb_vc_param_value',this.$el),S.each(function(){var P=t(this);P.data('vc_admin_labels')||(P.data('vc_admin_labels',!0),P.bind('keyup change',T),T({currentTarget:this}))})},hookAdminLabel:function(C){var S,T,P,E,j,D,A,I,V;for(j='',D='',A=[],I=t(C.currentTarget),V=I.closest('.vc_param_group-wrapper'),T=I.closest('.vc_param').find('.vc_param-group-admin-labels'),S=0;S<this.adminLabelParams.length;S++){var O;P=this.adminLabelParams[S],I=V.find('[name='+P+']'),O=I.closest('[data-vc-ui-element="panel-shortcode-param"]'),void 0!==this.mappedParams[P]&&(j=this.mappedParams[P].heading),D=I.is('select')?I.find('option:selected').text():I.is('input:checkbox')?I[0].checked?I.val():'':I.val(),E={type:O.data('param_type'),param_name:O.data('param_name')},_.isObject(vc.atts[E.type])&&_.isFunction(vc.atts[E.type].render)&&(D=vc.atts[E.type].render.call(this,E,D)),''!==D&&A.push('<label>'+j+'</label>: '+D)}T.html(A.join(', ')).toggleClass('vc_hidden-label',!A.length)},initializeDependency:function(){var C;C={},_.each(this.mappedParams,function(S,T){if(_.isObject(S)&&_.isObject(S.dependency)&&_.isString(S.dependency.element)){var P,E;P=t('[name='+this.groupParamName+'_'+S.dependency.element+'].wpb_vc_param_value',this.$el),E=t('[name='+T+'].wpb_vc_param_value',this.$el),E.length&&_.each(P,function(j){var D=t(j);var A,I;A=D.attr('name'),I=S.dependency,_.isArray(this.dependentElements[A])||(this.dependentElements[A]=[]),this.dependentElements[A].push(E),D.data('dependentSet')||(D.attr('data-dependent-set','true'),D.bind('keyup change',this.hookDependent)),C[A]||(C[A]=D),_.isString(I.callback)&&window[I.callback].call(this)},this)}},this),_.each(C,function(S){this.hookDependent({currentTarget:S})},this)},hookDependent:function(C){var S,T,P,E,j;return S=t(C.currentTarget),T=S.closest('.vc_column'),E=this.dependentElements[S.attr('name')],j=S.is(':checkbox')?_.map(this.$el.find('[name='+S.attr('name')+'].wpb_vc_param_value:checked'),function(D){return t(D).val()}):S.val(),P=S.is(':checkbox')?!this.$el.find('[name='+S.attr('name')+'].wpb_vc_param_value:checked').length:!j.length,T.hasClass('vc_dependent-hidden')?_.each(E,function(D){var A=t.Event('change');A.extra_type='vcHookDependedParamGroup',D.closest('.vc_column').addClass('vc_dependent-hidden'),D.trigger(A)}):_.each(E,function(D){var A,I,V,O;I=D.attr('name'),V=_.isObject(this.mappedParams[I])&&_.isObject(this.mappedParams[I].dependency)?this.mappedParams[I].dependency:{},O=D.closest('.vc_column'),_.isBoolean(V.not_empty)&&!0===V.not_empty&&!P?O.removeClass('vc_dependent-hidden'):_.isBoolean(V.is_empty)&&!0===V.is_empty&&P?O.removeClass('vc_dependent-hidden'):V.value&&_.intersection(_.isArray(V.value)?V.value:[V.value],_.isArray(j)?j:[j]).length?O.removeClass('vc_dependent-hidden'):V.value_not_equal_to&&!_.intersection(_.isArray(V.value_not_equal_to)?V.value_not_equal_to:[V.value_not_equal_to],_.isArray(j)?j:[j]).length?O.removeClass('vc_dependent-hidden'):O.addClass('vc_dependent-hidden'),A=t.Event('change'),A.extra_type='vcHookDependedParamGroup',D.trigger(A)},this),this},deleteParam:function(C){_.isObject(C)&&C.preventDefault&&C.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(this.options.parent.items--,this.options.parent.afterDelete(),this.$el.remove(),this.unbind(),this.remove())},content:function(){return this.$content},clone:function(C){if(C.preventDefault(),this.options.parent.addAllowed()){var S=this.options.parent.$ul.data('settings'),T=this.$content;this.$content=this.$el;var P=vc.atts.param_group.parseOne.call(this,S);t.ajax({type:'POST',url:window.ajaxurl,data:{action:'vc_param_group_clone',param:n(JSON.stringify(S)),shortcode:vc.active_panel.model.get('shortcode'),value:P,vc_inline:!0,_vcnonce:window.vcAdminNonce},dataType:'html',context:this}).done(function(E){var j;j=t(E),j.insertAfter(this.$el),this.$content=T,this.options.parent.initializer.$content=t('> .wpb_element_wrapper',j),this.options.parent.initializer.render(),j.data('vc-param-group-param',new k({el:j,parent:this.options.parent})),this.options.parent.items++,this.options.parent.afterAdd(j,'clone')})}},toggle:function(C){C.preventDefault();var S=this.$el;S.find('> .wpb_element_wrapper').slideToggle(),S.toggleClass('vc_param_group-collapsed').siblings(':not(.vc_param_group-collapsed)').addClass('vc_param_group-collapsed').find('> .wpb_element_wrapper').slideUp()}});window.i18nLocale,vc.edit_form_callbacks=[],vc.atts={parse:function(C){var S,T,P,E;return(E=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),P=E.closest('[data-vc-ui-element="panel-shortcode-param"]'),_.isUndefined(vc.atts[C.type])||_.isUndefined(vc.atts[C.type].parse)?S=E.length?E.val():null:P.data('vcInitParam')?S=vc.atts[C.type].parse.call(this,C):(T=this.model.get('params'),S=_.isUndefined(T[C.param_name])?E.length?E.val():null:T[C.param_name]),void 0!==E.data('js-function')&&void 0!==window[E.data('js-function')])&&(0,window[E.data('js-function')])(this.$el,this,C),S},parseFrame:function(C){return vc.atts.parse.call(this,C)},init:function(C,S){_.isUndefined(vc.atts[C.type])||_.isUndefined(vc.atts[C.type].init)||vc.atts[C.type].init.call(this,C,S)}},vc.atts.textarea_html={parse:function(C){var S=this.window(),T=this.content().find('.textarea_html.'+C.param_name);try{S.tinyMCE&&_.isArray(S.tinyMCE.editors)&&_.each(S.tinyMCE.editors,function(P){'wpb_tinymce_content'===P.id&&P.save()})}catch(P){console&&console.error&&console.error(P)}return T.val()},render:function(C,S){return _.isUndefined(S)?S:vc_wpautop(S)}},vc.atts.textarea_safe={parse:function(C){var S=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),T=S.val();return T.match(/"|(http)/)?'#E-8_'+base64_encode(rawurlencode(T)):T},render:function(C,S){return S&&S.match(/^#E\-8_/)?t('<div/>').text(rawurldecode(base64_decode(S.replace(/^#E\-8_/,'')))).html():S}},vc.atts.checkbox={parse:function(C){var S,T;return S=[],T='',t('input[name='+C.param_name+']',this.content()).each(function(){var P;P=t(this),this.checked&&S.push(P.attr('value'))}),0<S.length&&(T=S.join(',')),T},defaults:function(){return''}},vc.atts.el_id={clone:function(C,S,T){var P;P=C.get('params'),P[T.param_name]=_.isUndefined(T)||_.isUndefined(T.settings)||_.isUndefined(T.settings.auto_generate)||!0!==T.settings.auto_generate?'':Date.now()+'-'+vc_guid(),C.set({params:P},{silent:!0})},create:function(C,S,T){if(C.get('cloned'))return vc.atts.el_id.clone(C,S,T);if(_.isEmpty(S)&&!_.isUndefined(T)&&!_.isUndefined(T.settings)&&!_.isUndefined(T.settings.auto_generate)&&1==T.settings.auto_generate){var P;P=C.get('params'),P[T.param_name]=Date.now()+'-'+vc_guid(),C.set({params:P},{silent:!0})}}},vc.events.on('shortcodes:add:param:type:el_id',vc.atts.el_id.create),vc.atts.posttypes={parse:function(C){var S=[],T='';return t('input[name='+C.param_name+']',this.content()).each(function(){var P=t(this);this.checked&&S.push(P.attr('value'))}),0<S.length&&(T=S.join(',')),T}},vc.atts.taxonomies={parse:function(C){var S=[],T='';return t('input[name='+C.param_name+']',this.content()).each(function(){var P=t(this);this.checked&&S.push(P.attr('value'))}),0<S.length&&(T=S.join(',')),T}},vc.atts.exploded_textarea={parse:function(C){return this.content().find('.wpb_vc_param_value[name='+C.param_name+']').val().replace(/\n/g,',')}},vc.atts.exploded_textarea_safe={parse:function(C){var S,T;return S=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),T=S.val(),T=T.replace(/\n/g,','),T.match(/"|(http)/)?'#E-8_'+base64_encode(rawurlencode(T)):T},render:function(C,S){return S&&S.match(/^#E\-8_/)?t('<div/>').text(rawurldecode(base64_decode(S.replace(/^#E\-8_/,'')))).html():S}},vc.atts.textarea_raw_html={parse:function(C){var S=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),T=S.val();return base64_encode(rawurlencode(T))},render:function(C,S){return S?t('<div/>').text(rawurldecode(base64_decode(S.trim()))).html():''}},vc.atts.dropdown={render:function(C,S){return S},init:function(C,S){t('.wpb_vc_param_value.dropdown',S).change(function(){var T=t(this),P=T.find(':selected'),E=T.data('option'),j=P.length?P.attr('class').replace(/\s/g,'_'):'';j=j.replace('#','hash-'),void 0!==E&&T.removeClass(E),void 0!==j&&T.data('option',j)&&T.addClass(j)})},defaults:function(C){var S;return _.isArray(C.value)||_.isString(C.value)?_.isArray(C.value)?(S=C.value[0],_.isArray(S)&&S.length?S[0]:S):'':(S=_.values(C.value)[0],S.label?S.value:S)}},vc.atts.attach_images={parse:function(C){var S=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),T='';return S.parent().find('li.added').each(function(){T+='<li><img src="'+t(this).find('img').attr('src')+'" alt=""></li>'}),t('[data-model-id='+this.model.id+']').data('field-'+C.param_name+'-attach-images',T),S.length?S.val():null},render:function(C,S){var T=this.$el.find('.attachment-thumbnails[data-name='+C.param_name+']');return'external_link'===this.model.getParam('source')&&(S=this.model.getParam('custom_srcs')),_.isEmpty(S)?(this.$el.removeData('field-'+C.param_name+'-attach-images'),vc.atts.attach_images.updateImages(T,'')):t.ajax({type:'POST',url:window.ajaxurl,data:{action:'wpb_gallery_html',content:S,_vcnonce:window.vcAdminNonce},dataType:'html',context:this}).done(function(P){vc.atts.attach_images.updateImages(T,P)}),S},updateImages:function(C,S){C.html(S),S.length?C.removeClass('image-exists').next().addClass('image-exists'):C.addClass('image-exists').next().removeClass('image-exists')}},vc.atts.href={parse:function(C){var S=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),T='';return S.length&&'http://'!==S.val()&&(T=S.val()),T}},vc.atts.attach_image={parse:function(C){var S=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),T='';return S.parent().find('li.added').length&&(T=S.parent().find('li.added img').attr('src')),t('[data-model-id='+this.model.id+']').data('field-'+C.param_name+'-attach-image',T),S.length?S.val():null},render:function(C,S){var T=t('[data-model-id='+this.model.id+']'),P=T.data('field-'+C.param_name+'-attach-image'),E=this.$el.find('.attachment-thumbnail[data-name='+C.param_name+']'),j=t('#post_ID'),D=j.length?j.val():0;if('image'===C.param_name)switch(this.model.getParam('source')){case'external_link':vc.atts.attach_image.updateImage(E,this.model.getParam('custom_src'));break;default:_.isEmpty(S)&&'featured_image'!==this.model.getParam('source')?_.isUndefined(P)||(T.removeData('field-'+C.param_name+'-attach-image'),vc.atts.attach_image.updateImage(E,P)):t.ajax({type:'POST',url:window.ajaxurl,data:{action:'wpb_single_image_src',content:S,params:this.model.get('params'),post_id:D,_vcnonce:window.vcAdminNonce},dataType:'html',context:this}).done(function(A){var I=A.length||'featured_image'===this.model.getParam('source');vc.atts.attach_image.updateImage(E,A,I)});}return S},updateImage:function(C,S,T){C.length&&(void 0===T&&(T=!1),T||!_.isEmpty(S)?(C.attr('src',S),_.isEmpty(S)?(C.hide(),C.next().removeClass('image-exists').next().addClass('image-exists')):(C.show(),C.next().addClass('image-exists').next().addClass('image-exists'))):C.attr('src','').hide().next().removeClass('image-exists').next().removeClass('image-exists'))}},vc.atts.google_fonts={parse:function(C){var T=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),P=T.parent(),E={},S;return E.font_family=P.find('.vc_google_fonts_form_field-font_family-select > option:selected').val(),E.font_style=P.find('.vc_google_fonts_form_field-font_style-select > option:selected').val(),S=_.map(E,function(j,D){if(_.isString(j)&&0<j.length)return D+':'+encodeURIComponent(j)}),t.grep(S,function(j){return _.isString(j)&&0<j.length}).join('|')},init:function(C,S){var T=S;T.length&&('undefined'==typeof WebFont?T.find('> .edit_form_line').html(window.i18nLocale.gfonts_unable_to_load_google_fonts||'Unable to load Google Fonts'):S.data('vc-param-object',new g({el:T})))}},vc.atts.font_container={parse:function(C){var T=this.content().find('.wpb_vc_param_value[name='+C.param_name+']'),P=T.parent(),E={},S;return E.tag=P.find('.vc_font_container_form_field-tag-select > option:selected').val(),E.font_size=P.find('.vc_font_container_form_field-font_size-input').val(),E.text_align=P.find('.vc_font_container_form_field-text_align-select > option:selected').val(),E.font_family=P.find('.vc_font_container_form_field-font_family-select > option:selected').val(),E.color=P.find('.vc_font_container_form_field-color-input').val(),E.line_height=P.find('.vc_font_container_form_field-line_height-input').val(),E.font_style_italic=P.find('.vc_font_container_form_field-font_style-checkbox.italic').prop('checked')?'1':'',E.font_style_bold=P.find('.vc_font_container_form_field-font_style-checkbox.bold').prop('checked')?'1':'',S=_.map(E,function(j,D){if(_.isString(j)&&0<j.length)return D+':'+encodeURIComponent(j)}),t.grep(S,function(j){return _.isString(j)&&0<j.length}).join('|')},init:function(C,S){vc.atts.colorpicker.init.call(this,C,S)}},vc.atts.param_group={parse:function(C){var S,T,P,E;return T=this.content(),P=T.find('.wpb_el_type_param_group[data-vc-ui-element="panel-shortcode-param"][data-vc-shortcode-param-name="'+C.param_name+'"]'),E=P.find('> .edit_form_line > .vc_param_group-list'),S=vc.atts.param_group.extractValues.call(this,C,t('>.wpb_vc_row:not(".vc_param_group-add_content-wrapper")',E)),this.$content=T,encodeURIComponent(JSON.stringify(S))},extractValues:function(C,S){var T,P;return T=[],P=this,S.each(function(){var E;E={},P.$content=t(this),_.each(C.params,function(j){var D,A,I;D=t.extend({},j),A=D.param_name,D.param_name=C.param_name+'_'+A,I=vc.atts.parse.call(P,D),(I.length||D.save_always)&&(E[A]=I)}),T.push(E)}),T},parseOne:function(C){var S,T;return S=this.content(),T=vc.atts.param_group.extractValues.call(this,C,S),this.$content=S,n(JSON.stringify(T))},init:function(C,S){S.data('vc-param-object',new w({el:S,settings:{param:C}}))}},vc.atts.colorpicker={init:function(C,S){t('.vc_color-control',S).each(function(){var j=t(this),D=j.val().replace(/\s+/g,''),A=100,T,P,E;D.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)&&(A=100*parseFloat(D.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1])),j.wpColorPicker({clear:function(){T.val(100),P.val('100%')},change:_.debounce(function(){t(this).trigger('change')},500)}),E=j.closest('.wp-picker-container'),t('<div class="vc_alpha-container"><label>Alpha: <output class="rangevalue">'+A+'%</output></label><input type="range" min="1" max="100" value="'+A+'" name="alpha" class="vc_alpha-field"></div>').appendTo(E.addClass('vc_color-picker').find('.iris-picker')),T=E.find('.vc_alpha-field'),P=E.find('.vc_alpha-container output'),T.bind('change keyup',function(){var I=parseFloat(T.val()),V=j.data('a8c-iris'),O=j.data('wp-wpColorPicker');P.val(T.val()+'%'),V._color._alpha=I/100,j.val(V._color.toString()),O.toggler.css({backgroundColor:j.val()})}).val(A).trigger('change')})}},vc.atts.autocomplete={init:function(C,S){var T=S;T.length&&T.each(function(){var j=t('.wpb_vc_param_value',this),D=j.attr('name'),A=t('.vc_auto_complete_param',this),P,E;P=t.extend({$param_input:j,param_name:D,$el:A},j.data('settings')),E=new h(P),P.multiple&&E.enableMultiple(),P.sortable&&E.enableSortable(),j.data('vc-param-object',E)})}},vc.atts.loop={init:function(C,S){S.data('vc-param-object',new d({el:S}))}},vc.atts.vc_link={init:function(C,S){t('.vc_link-build',S).click(function(T){var P,E,j,D,A,I,V,O,M;T.preventDefault(),P=t(this).closest('.vc_link'),E=P.find('.wpb_vc_param_value'),j=P.find('.url-label'),D=P.find('.title-label'),A=E.data('json'),I=t('#wp-link-submit'),V=t('<input type="submit" name="vc_link-submit" id="vc_link-submit" class="button-primary" value="Set Link">'),I.hide(),t('#vc_link-submit').remove(),V.insertBefore(I),O=t('<div class="link-target vc-link-nofollow"><label><span></span> <input type="checkbox" id="vc-link-nofollow"> Add nofollow option to link</label></div>'),t('#link-options .vc-link-nofollow').remove(),O.insertAfter(t('#link-options .link-target')),setTimeout(function(){var U=t('#most-recent-results').css('top');t('#most-recent-results').css('top',parseInt(U)+O.height())},200),M=!window.wpLink&&t.fn.wpdialog&&t('#wp-link').length?{$link:!1,open:function(){this.$link=t('#wp-link').wpdialog({title:wpLinkL10n.title,width:480,height:'auto',modal:!0,dialogClass:'wp-dialog',zIndex:3e5}),this.$link.addClass('vc-link-wrapper')},close:function(){this.$link&&(this.$link.wpdialog('close'),this.$link.removeClass('vc-link-wrapper'))}}:window.wpLink;var z=function(U,L){jQuery(L).addClass('vc-link-wrapper')},B=function(U,L){jQuery(L).removeClass('vc-link-wrapper'),jQuery(document).off('wplink-open',z),jQuery(document).off('wplink-close',B)};jQuery(document).off('wplink-open',z).on('wplink-open',z),jQuery(document).off('wplink-close',B).on('wplink-close',B),M.open('content'),_.isString(A.url)&&(t('#wp-link-url').length?t('#wp-link-url').val(A.url):t('#url-field').val(A.url)),_.isString(A.title)&&(t('#wp-link-text').length?t('#wp-link-text').val(A.title):t('#link-title-field').val(A.title)),t('#wp-link-target').length?t('#wp-link-target').prop('checked',!_.isEmpty(A.target)):t('#link-target-checkbox').prop('checked',!_.isEmpty(A.target)),t('#vc-link-nofollow').length&&t('#vc-link-nofollow').prop('checked',!_.isEmpty(A.rel)),V.unbind('click.vcLink').bind('click.vcLink',function(U){U.preventDefault(),U.stopImmediatePropagation();var N={},L;N.url=t('#wp-link-url').length?t('#wp-link-url').val():t('#url-field').val(),N.title=t('#wp-link-text').length?t('#wp-link-text').val():t('#link-title-field').val();var F=t(t('#wp-link-target').length?'#wp-link-target':'#link-target-checkbox');return N.target=F[0].checked?' _blank':'',N.rel=t('#vc-link-nofollow')[0].checked?'nofollow':'',L=_.map(N,function(H,R){if(_.isString(H)&&0<H.length)return R+':'+encodeURIComponent(H)}).join('|'),E.val(L),E.data('json',N),j.html(N.url+N.target),D.html(N.title),M.close(),I.show(),V.unbind('click.vcLink'),V.remove(),t('#wp-link-cancel').unbind('click.vcLink'),window.wpLink.textarea='',F.attr('checked',!1),t('#most-recent-results').css('top',''),t('#vc-link-nofollow').attr('checked',!1),!1}),t('#wp-link-cancel').unbind('click.vcLink').bind('click.vcLink',function(U){U.preventDefault(),M.close(),V.unbind('click.vcLink'),V.remove(),t('#wp-link-cancel').unbind('click.vcLink'),window.wpLink.textarea=''})})}},vc.atts.sorted_list={init:function(C,S){t('.vc_sorted-list',S).VcSortedList()}},vc.atts.options={init:function(C,S){S.data('vc-param-object',new u({el:S}))}},vc.atts.iconpicker={change:function(C,S){var T=S.find('.vc-iconpicker');T.val(this.value),T.data('vc-no-check',!0),T.find('[value="'+this.value+'"]').attr('selected','selected'),T.data('vcFontIconPicker').loadIcons()},parse:function(C){return this.content().find('.wpb_vc_param_value[name='+C.param_name+']').parent().find('.vc-iconpicker').val()},init:function(C,S){var T=S.find('.wpb_vc_param_value'),P=t.extend({iconsPerPage:100,iconDownClass:'fip-fa fa fa-arrow-down',iconUpClass:'fip-fa fa fa-arrow-up',iconLeftClass:'fip-fa fa fa-arrow-left',iconRightClass:'fip-fa fa fa-arrow-right',iconSearchClass:'fip-fa fa fa-search',iconCancelClass:'fip-fa fa fa-remove',iconBlockClass:'fip-fa'},T.data('settings'));S.find('.vc-iconpicker').vcFontIconPicker(P).on('change',function(){var j=t(this);j.data('vc-no-check')||T.data('vc-no-check',!0).val(this.value).trigger('change'),j.data('vc-no-check',!1)}),T.on('change',function(){T.data('vc-no-check')||vc.atts.iconpicker.change.call(this,C,S),T.data('vc-no-check',!1)})}},vc.atts.animation_style={init:function(C,S){function T(j,D){t(j).removeClass().addClass(D+' animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){t(this).removeClass().addClass('vc_param-animation-style-preview')})}var P=S,E=t('.wpb_vc_param_value[name='+C.param_name+']',P);t('option[value="'+E.val()+'"]',P).attr('selected',!0),t('.vc_param-animation-style-trigger',P).click(function(j){j.preventDefault();var D=t('.vc_param-animation-style',P).val();'none'!==D&&T(this.parentNode,'vc_param-animation-style-preview '+D)}),t('.vc_param-animation-style',P).change(function(){var j=t(this).val();(E.val(j),'none'!==j)&&T(t('.vc_param-animation-style-preview',P),'vc_param-animation-style-preview '+j)})}},vc.atts.vc_grid_id={parse:function(){return'vc_gid:'+Date.now()+'-'+this.model.get('id')+'-'+Math.floor(11*Math.random())}},vc.atts.addShortcodeIdParam=function(C){var P=!1,S,T;S=C.get('params'),T=vc.map[C.get('shortcode')],_.isArray(T.params)&&_.each(T.params,function(E){E&&!_.isUndefined(E.type)&&('tab_id'===E.type&&_.isEmpty(S[E.param_name])?(P=!0,S[E.param_name]=vc_guid()+'-'+Math.floor(11*Math.random())):'vc_grid_id'===E.type&&(P=!0,S[E.param_name]=vc.atts.vc_grid_id.parse.call({model:C})))}),P&&C.save('params',S,{silent:!0})},vc.getMapped=vc.memoizeWrapper(function(C){return vc.map[C]||{}})}(window.jQuery),function(t){vc.debug=!1,vc.map=_.isUndefined(window.vc_mapper)?{}:window.vc_mapper,vc.roles=_.isUndefined(window.vc_roles)?{}:window.vc_roles,vc.Storage=function(){this.data={}},vc.Storage.prototype={url:window.ajaxurl,checksum:!1,locked:!1,create:function(n){return n.id||(n.id=n.attributes.id=vc_guid()),this.data[n.id]=n.toJSON(),this.setModelRoot(n.id),this.save(),n},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setModelRoot:function(n){var o=this.data[n];_.isString(o.parent_id)&&_.isObject(this.data[o.parent_id])&&(o.root_id=this.data[o.parent_id].root_id),_.isObject(this.data[o.root_id])&&(this.data[o.root_id].html=!1)},update:function(n){return this.data[n.id]=n.toJSON(),this.setModelRoot(n.id),this.save(),n},destroy:function(n){return _.isUndefined(this.data[n.id])||_.isUndefined(this.data[n.id].root_id)||!_.isObject(this.data[this.data[n.id].root_id])||(this.data[this.data[n.id].root_id].html=!1),_.isUndefined(this.data[n.id])||delete this.data[n.id],this.save(),n},find:function(n){return this.data[n]},findAll:function(){return this.fetch(),_.values(this.data)},findAllRootSorted:function(){var n=_.filter(_.values(this.data),function(o){return!1===o.parent_id});return _.sortBy(n,function(o){return o.order})},escapeParam:function(n){return _.isUndefined(n)||_.isNull(n)||!n.toString?'':n.toString().replace(/"/g,'``').replace(/\[/g,'`{`').replace(/\]/g,'`}`')},unescapeParam:function(n){return n.replace(/\`{\`/g,'[').replace(/\`}\`/g,']').replace(/(\`{2})/g,'"')},storageCreateShortcodeString:function(n){var o,l,s,r,d,u,g,h;return s=n.get('shortcode'),r=_.extend({},n.get('params')),u={},g=vc.getMergedParams(s,r),_.each(g,function(f,w){u[w]=this.escapeParam(f)},this),o=vc.getMapped(s),h=_.isObject(o)&&(_.isBoolean(o.is_container)&&!0===o.is_container||!_.isEmpty(o.as_parent)),d=this._storageGetShortcodeContent(n),l={tag:s,attrs:u,content:d,type:_.isUndefined(vc.getParamSettings(s,'content'))&&!h?'single':''},n.trigger('stringify',n,l),wp.shortcode.string(l)},save:function(){if(this.locked)return this.locked=!1,!1;var n=_.reduce(this.findAllRootSorted(),function(o,l){var s=vc.shortcodes.get(l);return o+this.storageCreateShortcodeString(s)},'',this);return this.setContent(n),this.checksum=vc_globalHashCode(n),this},_storageGetShortcodeContent:function(n){var o,l;return o=_.sortBy(_.filter(this.data,function(s){return s.parent_id===n.get('id')}),function(s){return s.order}),o.length?_.reduce(o,function(s,r){var d=vc.shortcodes.get(r);return s+this.storageCreateShortcodeString(d)},'',this):(l=_.extend({},n.get('params')),_.isUndefined(l.content)?'':l.content)},getContent:function(){return _.isObject(window.tinymce)&&tinymce.editors.content&&tinymce.editors.content.save(),window.vc_wpnop(t('#content').val()||'')},setContent:function(n){var o=window.tinyMCE&&window.tinyMCE.get&&window.tinyMCE.get('content');n=vc_wpautop(n),t('#content').val(n),o&&o.setContent(n)&&o.fire('change')},parseContent:function(n,o,l){var s=_.keys(vc.map).join('|'),r=window.wp.shortcode.regexp(s),d=o.trim().match(r);return _.isNull(d)?n:(_.each(d,function(u){var f=u.match(this.regexp(s)),w=f[5],k=new RegExp('^[\\s]*\\[\\[?('+_.keys(vc.map).join('|')+')(?![\\w-])'),C=window.vc_guid(),S=window.wp.shortcode.attrs(f[3]),T={},g,h;_.each(S.named,function(P,E){T[E]=this.unescapeParam(P)},this),g={id:C,shortcode:f[2],order:this.order,params:_.extend({},T),parent_id:!!_.isObject(l)&&l.id,root_id:_.isObject(l)?l.root_id:C},h=vc.map[g.shortcode],this.order+=1,n[C]=g,C==g.root_id&&(n[C].html=u),_.isString(w)&&w.match(k)&&(_.isBoolean(h.is_container)&&!0===h.is_container||!_.isEmpty(h.as_parent)&&!1!==h.as_parent)?n=this.parseContent(n,w,n[C]):_.isString(w)&&w.length&&'vc_row'===f[2]?n=this.parseContent(n,'[vc_column width="1/1"][vc_column_text]'+w+'[/vc_column_text][/vc_column]',n[C]):_.isString(w)&&w.length&&'vc_column'===f[2]?n=this.parseContent(n,'[vc_column_text]'+w+'[/vc_column_text]',n[C]):_.isString(w)&&(n[C].params.content=w)},this),n)},isContentChanged:function(){return!1===this.checksum||this.checksum!==vc_globalHashCode(this.getContent())},wrapData:function(n){var o=_.keys(vc.map).join('|'),l=this.regexp_split('vc_row'),s=new RegExp('^\\[(\\[?)('+o+')','g'),r=this,d={},u=0;n=wp.shortcode.replace('vc_section',n,function(h){var f={attrs:h.attrs.named,content:r.wrapData(h.content)};u++;var w='vc_pseudo_section_'+u+'_'+VCS4()+VCS4();return d[w]={tag:w,data:f},'[vc_row][vc_pseudo_section id="'+w+'"][/vc_pseudo_section][/vc_row]'});var g=_.filter(n.trim().split(l),function(h){if(!_.isEmpty(h))return h});return n=_.reduce(g,function(h,f){-1!==f.trim().indexOf('vc_pseudo_section_')||f.trim().match(s)||(f='[vc_row][vc_column][vc_column_text]'+f+'[/vc_column_text][/vc_column][/vc_row]');var w=f.match(vc_regexp_shortcode());return!_.isArray(w)||_.isUndefined(w[2])||-1!==w[2].indexOf('vc_pseudo_section_')||_.isUndefined(vc.map[w[2]])||!_.isUndefined(vc.map[w[2]].is_container)&&vc.map[w[2]].is_container||!_.isEmpty(vc.map[w[2]].as_parent)||(f='[vc_row][vc_column]'+f+'[/vc_column][/vc_row]'),h+f},''),0<Object.keys(d).length&&(n=n.replace(/\[vc_row\]\[vc_pseudo_section/g,'[vc_pseudo_section'),n=n.replace(/\[\/vc_pseudo_section\]\[\/vc_row\]/g,'[/vc_pseudo_section]'),n=wp.shortcode.replace('vc_pseudo_section',n,function(h){var f=d[h.attrs.named.id];return wp.shortcode.string({tag:'vc_section',attrs:f.data.attrs,content:f.data.content})})),n},fetch:function(){if(!this.isContentChanged())return this;this.order=0;var n=this.getContent();this.checksum=vc_globalHashCode(n),n=this.wrapData(n),this.data=this.parseContent({},n)},append:function(n){this.data={},this.order=0;try{var o=this.getContent();this.setContent(o+''+n)}catch(l){window.console&&window.console.error&&window.console.error(l)}},regexp_split:_.memoize(function(n){return new RegExp('(\\[(\\[?)['+n+']+(?![\\w-])[^\\]\\/]*[\\/(?!\\])[^\\]\\/]*]?(?:\\/]\\]|\\](?:[^\\[]*(?:\\[(?!\\/'+n+'\\])[^\\[]*)*\\[\\/'+n+'\\])?)\\]?)','g')}),regexp:_.memoize(function(n){return new RegExp('\\[(\\[?)('+n+')(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)')})},vc.storage=new vc.Storage}(window.jQuery),function(){var n=vc.storage;vc.shortcode=Backbone.Model.extend({settings:!1,defaults:function(){var o=window.vc_guid();return{id:o,shortcode:'vc_text_block',order:vc.shortcodes.getNextOrder(),params:{},parent_id:!1,root_id:o,cloned:!1,html:!1,view:!1}},initialize:function(){this.bind('remove',this.removeChildren,this),this.bind('remove',this.removeEvents,this)},removeEvents:function(o){vc.events.triggerShortcodeEvents('destroy',o)},sync:function(o,l,s){if(s&&s.silent)return s.success(l);var r;'read'===o?r=l.id?n.find(l):n.findAll():'create'===o?r=n.create(l):'update'===o?r=n.update(l):'delete'===o?r=n.destroy(l):void 0;r?s.success(r):s.error('Record not found')},getParam:function(o){return _.isObject(this.get('params'))&&!_.isUndefined(this.get('params')[o])?this.get('params')[o]:''},removeChildren:function(o){var l=vc.shortcodes.where({parent_id:o.id});_.each(l,function(s){vc.storage.lock(),s.destroy(),this.removeChildren(s)},this),l.length&&vc.storage.save()},setting:function(o){return!1===this.settings&&(this.settings=vc.getMapped(this.get('shortcode'))||{}),this.settings[o]}}),vc.shortcodes_collection=Backbone.Collection.extend({model:vc.shortcode,last_index:0,getNextOrder:function(){return this.last_index++},comparator:function(o){return o.get('order')},initialize:function(){},createFromString:function(o,l){var s;s=vc.storage.parseContent({},o,!!_.isObject(l)&&l.toJSON()),_.each(_.values(s),function(r){vc.shortcodes.create(r)},this)},sync:function(o,l,s){var r;'read'===o?r=l.id?n.find(l):n.findAll():'create'===o?r=n.create(l):'update'===o?r=n.update(l):'delete'===o?r=n.destroy(l):void 0;r?s.success(r):s.error('Record not found')},stringify:function(o){var l=_.sortBy(vc.shortcodes.where({parent_id:!1}),function(s){return s.get('order')});return this.modelsToString(l,o)},singleStringify:function(o,l){return this.modelsToString([vc.shortcodes.get(o)],l)},createShortcodeString:function(o,l){var s,r,d,u,g,h,f,w;return d=o.get('shortcode'),u=_.extend({},o.get('params')),h={},f=vc.getMergedParams(d,u),_.each(f,function(k,C){h[C]=vc.storage.escapeParam(k)},this),s=vc.getMapped(d),w=_.isObject(s)&&(_.isBoolean(s.is_container)&&!0===s.is_container||!_.isEmpty(s.as_parent)),g=this._getShortcodeContent(o,l),r={tag:d,attrs:h,content:g,type:_.isUndefined(vc.getParamSettings(d,'content'))&&!w?'single':''},_.isUndefined(l)?o.trigger('stringify',o,r):o.trigger('stringify:'+l,o,r),r.remove?'':wp.shortcode.string(r)},modelsToString:function(o,l){return _.reduce(o,function(s,r){return s+this.createShortcodeString(r,l)},'',this)},_getShortcodeContent:function(o,l){var s,r;return s=_.sortBy(vc.shortcodes.where({parent_id:o.get('id')}),function(d){return d.get('order')}),s.length?_.reduce(s,function(d,u){return d+this.createShortcodeString(u,l)},'',this):(r=_.extend({},o.get('params')),_.isUndefined(r.content)?'':r.content)}}),vc.shortcodes=new vc.shortcodes_collection,vc.getDefaults=vc.memoizeWrapper(function(o){var l,s;return l={},s=_.isObject(vc.map[o])&&_.isArray(vc.map[o].params)?vc.map[o].params:[],_.each(s,function(r){_.isObject(r)&&(_.isUndefined(r.std)?vc.atts[r.type]&&vc.atts[r.type].defaults?l[r.param_name]=vc.atts[r.type].defaults(r):_.isUndefined(r.value)||(_.isObject(r.value)?l[r.param_name]=_.values(r.value)[0]:_.isArray(r.value)?l[r.param_name]=r.value[0]:l[r.param_name]=r.value):l[r.param_name]=r.std)}),l}),vc.getDefaultsAndDependencyMap=vc.memoizeWrapper(function(o){var l,s,r;return s={},l={},r=_.isObject(vc.map[o])&&_.isArray(vc.map[o].params)?vc.map[o].params:[],_.each(r,function(d){_.isObject(d)&&'content'!==d.param_name&&(_.isUndefined(d.std)?_.isUndefined(d.value)||(vc.atts[d.type]&&vc.atts[d.type].defaults?l[d.param_name]=vc.atts[d.type].defaults(d):_.isObject(d.value)?l[d.param_name]=_.values(d.value)[0]:_.isArray(d.value)?l[d.param_name]=d.value[0]:l[d.param_name]=d.value):l[d.param_name]=d.std,_.isUndefined(d.dependency)||_.isUndefined(d.dependency.element)||(s[d.param_name]=d.dependency))}),{defaults:l,dependencyMap:s}}),vc.getMergedParams=function(o,l){var s,r,d;return s=vc.getDefaultsAndDependencyMap(o),r={},l=_.extend({},s.defaults,l),d=_.extend({},s.dependencyMap),_.each(l,function(u,g){if('content'!==g){var h;if(!_.isUndefined(d[g])){if(!_.isUndefined(d[d[g].element])&&_.isBoolean(d[d[g].element].failed)&&!0===d[d[g].element].failed)return void(d[g].failed=!0);var f,w,k,C;k=d[g].element,C=l[k],w=_.isEmpty(C);var S=!1;if('string'==typeof C&&(S=l[k].split(',').map(function(T){return T.trim()}).filter(function(T){return T})),f=_.omit(d[g],'element'),_.isBoolean(f.not_empty)&&!0===f.not_empty&&w||_.isBoolean(f.is_empty)&&!0===f.is_empty&&!w||f.value&&!_.intersection(_.isArray(f.value)?f.value:[f.value],_.isArray(C)?C:[C]).length&&S&&f.value&&!_.intersection(_.isArray(f.value)?f.value:[f.value],_.isArray(S)?S:[S]).length||f.value_not_equal_to&&_.intersection(_.isArray(f.value_not_equal_to)?f.value_not_equal_to:[f.value_not_equal_to],_.isArray(C)?C:[C]).length&&S&&f.value_not_equal_to&&_.intersection(_.isArray(f.value_not_equal_to)?f.value_not_equal_to:[f.value_not_equal_to],_.isArray(S)?S:[S]).length)return void(d[g].failed=!0)}h=vc.getParamSettings(o,g),_.isUndefined(h)?r[g]=u:(!_.isUndefined(s.defaults[g])&&s.defaults[g]!==u||_.isUndefined(s.defaults[g])&&''!==u||!_.isUndefined(h.save_always)&&!0===h.save_always)&&(r[g]=u)}}),r},vc.getParamSettings=vc.memoizeWrapper(function(o,l){var s;return s=_.isObject(vc.map[o])&&_.isArray(vc.map[o].params)?vc.map[o].params:[],_.find(s,function(r){return _.isObject(r)&&r.param_name===l},this)},function(){return arguments[0]+','+arguments[1]}),vc.getParamSettingsByType=vc.memoizeWrapper(function(o,l){var s;return s=_.isObject(vc.map[o])&&_.isArray(vc.map[o].params)?vc.map[o].params:[],_.find(s,function(r){return _.isObject(r)&&r.type===l},this)},function(){return arguments[0]+','+arguments[1]}),vc.shortcodeHasIdParam=vc.memoizeWrapper(function(o){return vc.getParamSettingsByType(o,'el_id')})}(window.jQuery),function(t){vc.clone_index=1,vc.shortcode_view=Backbone.View.extend({tagName:'div',$content:'',use_default_content:!1,params:{},events:{'click .column_delete,.vc_control-btn-delete':'deleteShortcode','click .column_add,.vc_control-btn-prepend':'addElement','click .column_edit,.vc_control-btn-edit, .column_edit_trigger':'editElement','click .column_clone,.vc_control-btn-clone':'clone',mousemove:'checkControlsPosition'},removeView:function(){vc.closeActivePanel(this.model),this.remove()},checkControlsPosition:function(){if(this.$controls_buttons){var s=this.$el.height(),n,o,l;s>t(window).height()&&(n=t(window).scrollTop(),o=this.$el.offset().top,l=n-o+t(window).height()/2,40<l&&l<s?this.$controls_buttons.css('top',l):l>s?this.$controls_buttons.css('top',s-40):this.$controls_buttons.css('top',40))}},initialize:function(){this.model.bind('destroy',this.removeView,this),this.model.bind('change:params',this.changeShortcodeParams,this),this.model.bind('change_parent_id',this.changeShortcodeParent,this),this.createParams()},hasUserAccess:function(){var n;return n=this.model.get('shortcode'),-1<_.indexOf(['vc_row','vc_column','vc_row_inner','vc_column_inner'],n)||!!_.every(vc.roles.current_user,function(o){return _.isUndefined(vc.roles[o])||_.isUndefined(vc.roles[o].shortcodes)||!_.isUndefined(vc.roles[o].shortcodes[n])})},canCurrentUser:function(n){var o;return o=this.model.get('shortcode'),void 0===n||'all'===n?vc_user_access().shortcodeAll(o):vc_user_access().shortcodeEdit(o)},createParams:function(){var n,o;n=this.model.get('shortcode'),o=_.isObject(vc.map[n])&&_.isArray(vc.map[n].params)?vc.map[n].params:[],this.model.get('params'),this.params={},_.each(o,function(l){this.params[l.param_name]=l},this)},setContent:function(){this.$content=this.$el.find('> .wpb_element_wrapper > .vc_container_for_children, > .vc_element-wrapper > .vc_container_for_children')},setEmpty:function(){},unsetEmpty:function(){},checkIsEmpty:function(){this.model.get('parent_id')&&vc.app.views[this.model.get('parent_id')].checkIsEmpty()},html2element:function(n){var l={},s=vc.template(n),o;o=t(s(this.model.toJSON()).trim()),_.each(o.get(0).attributes,function(r){l[r.name]=r.value}),this.$el.attr(l).html(o.html()),this.setContent(),this.renderContent()},render:function(){var n=t('#vc_shortcode-template-'+this.model.get('shortcode'));return n.is('script')&&this.html2element(n.html()),this.model.view=this,this.$controls_buttons=this.$el.find('.vc_controls > :first'),this},renderContent:function(){return this.$el.attr('data-model-id',this.model.get('id')),this.$el.data('model',this.model),this},changedContent:function(){},_loadDefaults:function(){var n,o;n=this.model.get('shortcode'),!(o=!!vc.shortcodes.where({parent_id:this.model.get('id')}).length)&&!0===this.use_default_content&&_.isObject(vc.map[n])&&_.isString(vc.map[n].default_content)&&vc.map[n].default_content.length&&(this.use_default_content=!1,vc.shortcodes.createFromString(vc.map[n].default_content,this.model))},_callJsCallback:function(){var n=this.model.get('shortcode');if(_.isObject(vc.map[n])&&_.isObject(vc.map[n].js_callback)&&!_.isUndefined(vc.map[n].js_callback.init)){var o=vc.map[n].js_callback.init;window[o](this.$el)}},ready:function(){return this._loadDefaults(),this._callJsCallback(),this.model.get('parent_id')&&_.isObject(vc.app.views[this.model.get('parent_id')])&&vc.app.views[this.model.get('parent_id')].changedContent(this),_.defer(_.bind(function(){vc.events.trigger('shortcodeView:ready',this),vc.events.trigger('shortcodeView:ready:'+this.model.get('shortcode'),this)},this)),this},addShortcode:function(n,o){var l;l=_.last(vc.shortcodes.filter(function(s){return s.get('parent_id')===this.get('parent_id')&&parseFloat(s.get('order'))<parseFloat(this.get('order'))},n.model)),l?n.render().$el.insertAfter('[data-model-id='+l.id+']'):'append'===o?this.$content.append(n.render().el):this.$content.prepend(n.render().el)},changeShortcodeParams:function(n){var o,l,s,r;o=n.get('shortcode'),l=n.get('params'),s=vc.map[o],_.defer(function(){vc.events.trigger('backend.shortcodeViewChangeParams:'+o)}),(_.isArray(s.params)||_.isObject(s.params))&&_.each(s.params,function(d){var u,g,h,f,w;if(u=d.param_name,g=l[u],h=this.$el.find('> .wpb_element_wrapper, > .vc_element-wrapper'),f=g,w=h.children('.admin_label_'+u),_.isObject(vc.atts[d.type])&&_.isFunction(vc.atts[d.type].render)&&(g=vc.atts[d.type].render.call(this,d,g)),h.children('.'+d.param_name).is('input,textarea,select'))h.children('[name='+d.param_name+']').val(g);else if(h.children('.'+d.param_name).is('iframe'))h.children('[name='+d.param_name+']').attr('src',g);else if(h.children('.'+d.param_name).is('img')){var k;k=h.children('[name='+d.param_name+']'),g&&g.match(/^\d+$/)?t.ajax({type:'POST',url:window.ajaxurl,data:{action:'wpb_single_image_src',content:g,size:'thumbnail',_vcnonce:window.vcAdminNonce},dataType:'html',context:this}).done(function(S){k.attr('src',S)}):g&&k.attr('src',g)}else h.children('[name='+d.param_name+']').html(g||'');if(w.length){var C;''===g||_.isUndefined(g)?w.hide().addClass('hidden-label'):(_.isObject(d.value)&&!_.isArray(d.value)&&'checkbox'===d.type?(C=_.invert(d.value),f=_.map(g.split(/[\s]*\,[\s]*/),function(S){return _.isString(C[S])?C[S]:S}).join(', ')):_.isObject(d.value)&&!_.isArray(d.value)&&(C=_.invert(d.value),f=_.isString(C[g])?C[g]:g),w.html('<label>'+w.find('label').text()+'</label>: '+f),w.show().removeClass('hidden-label'))}},this),r=vc.app.views[n.get('parent_id')],!1!==n.get('parent_id')&&_.isObject(r)&&r.checkIsEmpty()},changeShortcodeParent:function(n){if(!1===this.model.get('parent_id'))return n;var o=t('[data-model-id='+this.model.get('parent_id')+']'),l=vc.app.views[this.model.get('parent_id')];this.$el.appendTo(o.find('> .wpb_element_wrapper > .wpb_column_container, > .vc_element-wrapper > .wpb_column_container')),l.checkIsEmpty()},deleteShortcode:function(n){_.isObject(n)&&n.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&this.model.destroy()},addElement:function(n){_.isObject(n)&&n.preventDefault(),vc.add_element_block_view.render(this.model,!_.isObject(n)||!t(n.currentTarget).closest('.bottom-controls').hasClass('bottom-controls'))},editElement:function(n){_.isObject(n)&&n.preventDefault(),vc.active_panel&&vc.active_panel.model&&this.model&&(!vc.active_panel.model||!this.model||vc.active_panel.model.get('id')==this.model.get('id'))||(vc.closeActivePanel(),vc.edit_element_block_view.render(this.model))},clone:function(n){return _.isObject(n)&&n.preventDefault(),vc.clone_index/=10,this.cloneModel(this.model,this.model.get('parent_id'))},cloneModel:function(n,o,l){var s,r,d,u;return s=_.isBoolean(l)&&!0===l?n.get('order'):parseFloat(n.get('order'))+vc.clone_index,d=_.extend({},n.get('params')),u=n.get('shortcode'),r=vc.shortcodes.create({shortcode:u,id:window.vc_guid(),parent_id:o,order:s,cloned:!0,cloned_from:n.toJSON(),params:d}),_.each(vc.shortcodes.where({parent_id:n.id}),function(g){this.cloneModel(g,r.get('id'),!0)},this),r},remove:function(){this.$content&&this.$content.data('uiSortable')&&this.$content.sortable('destroy'),this.$content&&this.$content.data('uiDroppable')&&this.$content.droppable('destroy'),delete vc.app.views[this.model.id],window.vc.shortcode_view.__super__.remove.call(this)}}),vc.shortcodes.on('sync',function(n){_.isObject(n)&&!_.isEmpty(n.models)&&_.each(n.models,function(o){vc.events.triggerShortcodeEvents('sync',o)})}),vc.shortcodes.on('add',function(n){_.isObject(n)&&vc.events.triggerShortcodeEvents('add',n)})}(window.jQuery),function(t){vc.saved_custom_css=!1,vc.visualComposerView=Backbone.View.extend({el:t('#wpb_visual_composer'),views:{},disableFixedNav:!1,events:{'click #wpb-add-new-row':'createRow','click #vc_post-settings-button':'editSettings','click #vc_add-new-element, [data-vc-element="add-element-action"]':'addElement','click #vc_fullscreen-button':'enterFullscreen','click #vc_windowed-button':'leaveFullscreen','click [data-vc-element="add-text-block-action"]':'addTextBlock','click .wpb_switch-to-composer':'switchComposer','click #vc_templates-editor-button':'openTemplatesWindow','click #vc_templates-more-layouts':'openTemplatesWindow','click .vc_template[data-template_id] > .wpb_wrapper':'loadDefaultTemplate','click #wpb-save-post':'save','click .vc_control-preview':'preview'},initializeAccessPolicy:function(){this.accessPolicy={be_editor:vc_user_access().editor('backend_editor'),fe_editor:vc_frontend_enabled&&vc_user_access().editor('frontend_editor'),classic_editor:!vc_user_access().check('backend_editor','disabled_ce_editor',void 0,!0)}},accessPolicyActions:function(){var n='',o='';if(this.accessPolicy.fe_editor&&(n='<a class="wpb_switch-to-front-composer" href="'+t('#wpb-edit-inline').attr('href')+'">'+window.i18nLocale.main_button_title_frontend_editor+'</a>'),this.accessPolicy.classic_editor)this.accessPolicy.be_editor&&(o='<a class="wpb_switch-to-composer" href="#">'+window.i18nLocale.main_button_title_backend_editor+'</a>');else if(t('#postdivrich').addClass('vc-disable-editor'),this.accessPolicy.be_editor){var l=this;_.defer(function(){l.show(),l.status='shown'})}(n||o)&&(this.$buttonsContainer=t('<div class="composer-switch"><span class="logo-icon"></span>'+o+n+'</div>').insertAfter('div#titlediv'),this.accessPolicy.classic_editor&&(this.$switchButton=this.$buttonsContainer.find('.wpb_switch-to-composer'),this.$switchButton.click(this.switchComposer)))},initialize:function(){var n=this;_.bindAll(this,'switchComposer','dropButton','processScroll','updateRowsSorting','updateElementsSorting'),this.accessPolicy=vc.accessPolicy,this.buildRelevance(),vc.events.on('shortcodes:add',vcAddShortcodeDefaultParams,this),vc.events.on('shortcodes:add',vc.atts.addShortcodeIdParam,this),vc.events.on('shortcodes:sync',vc.atts.addShortcodeIdParam,this),vc.events.on('shortcodes:add',this.addShortcode,this),vc.events.on('shortcodes:destroy',this.checkEmpty,this),vc.shortcodes.on('change:params',this.changeParamsEvents,this),vc.shortcodes.on('reset',this.addAll,this),t(document).on('wp-collapse-menu',function(o,l){'open'===l.state&&n.leaveFullscreen()}),this.render()},changeParamsEvents:function(n){vc.events.triggerShortcodeEvents('update',n)},render:function(){return this.$buttonsContainer=t('.composer-switch'),this.$switchButton=this.$buttonsContainer.find('.wpb_switch-to-composer'),this.$vcStatus=t('#wpb_vc_js_status'),this.$metablock_content=t('.metabox-composer-content'),this.$content=t('#visual_composer_content'),this.$post=t('#postdivrich'),this.$loading_block=t('#vc_logo'),vc.add_element_block_view=new vc.AddElementUIPanelBackendEditor({el:'#vc_ui-panel-add-element'}),vc.edit_element_block_view=new vc.EditElementUIPanel({el:'#vc_ui-panel-edit-element'}),vc.templates_panel_view=new vc.TemplateWindowUIPanelBackendEditor({el:'#vc_ui-panel-templates'}),vc.post_settings_view=new vc.PostSettingsUIPanelBackendEditor({el:'#vc_ui-panel-post-settings'}),vc.preset_panel_view=new vc.PresetSettingsUIPanelFrontendEditor({el:'#vc_ui-panel-preset'}),this.setSortable(),vc.is_mobile=0<t('body.mobile').length,vc.saved_custom_css=t('#wpb_custom_post_css_field').val(),vc.updateSettingsBadge(),_.defer(function(){vc.events.trigger('app.render')}),this},addAll:function(){this.views={},this.$content.removeClass('loading').empty(),this.addChild(!1),this.checkEmpty(),this.$loading_block.removeClass('vc_ui-wp-spinner'),this.$metablock_content.removeClass('vc_loading-shortcodes'),_.defer(function(){vc.events.trigger('app.addAll')})},addChild:function(n){_.each(vc.shortcodes.where({parent_id:n}),function(o){this.appendShortcode(o),this.addChild(o.get('id'))},this),this.setSortable()},getView:function(n){var o;return o=_.isObject(vc.map[n.get('shortcode')])&&_.isString(vc.map[n.get('shortcode')].js_view)&&vc.map[n.get('shortcode')].js_view.length&&!_.isUndefined(window[window.vc.map[n.get('shortcode')].js_view])?new window[window.vc.map[n.get('shortcode')].js_view]({model:n}):new vc.shortcode_view({model:n}),n.set({view:o}),o},setDraggable:function(){t('#wpb-add-new-element, #wpb-add-new-row').draggable({helper:function(){return t('<div id="drag_placeholder"></div>').appendTo('body')},zIndex:99999,cursor:'move',revert:'invalid',start:function(){t('#drag_placeholder').addClass('column_placeholder').html(window.i18nLocale.drag_drop_me_in_column)}})},setDropable:function(){this.$content.droppable({greedy:!0,accept:'.dropable_el,.dropable_row',hoverClass:'wpb_ui-state-active',drop:this.dropButton})},dropButton:function(n,o){o.draggable.is('#wpb-add-new-element')?this.addElement():o.draggable.is('#wpb-add-new-row')&&this.createRow()},appendShortcode:function(n){var o,l,s;if(o=this.getView(n),s=_.extend(vc.getDefaults(n.get('shortcode')),n.get('params')),n.set('params',s,{silent:!0}),l=!1!==n.get('parent_id')&&this.views[n.get('parent_id')],this.views[n.id]=o,n.get('parent_id')){var r;r=this.views[n.get('parent_id')],r.unsetEmpty()}l?l.addShortcode(o,'append'):this.$content.append(o.render().el),o.ready(),o.changeShortcodeParams(n),o.checkIsEmpty(),this.setNotEmpty()},addShortcode:function(n){var o,l,s;if(s=_.extend(vc.getDefaults(n.get('shortcode')),n.get('params')),n.set('params',s,{silent:!0}),o=this.getView(n),l=!1!==n.get('parent_id')&&this.views[n.get('parent_id')],o.use_default_content=!0!==n.get('cloned'),this.views[n.id]=o,l){l.addShortcode(o),l.checkIsEmpty();var r;r=this,_.defer(function(){o.changeShortcodeParams&&o.changeShortcodeParams(n),o.ready(),o.checkIsEmpty(),r.setSortable(),r.setNotEmpty()})}else this.addRow(o),_.defer(function(){o.changeShortcodeParams&&o.changeShortcodeParams(n),o.ready(),o.checkIsEmpty()})},addRow:function(n){var o;o=_.last(vc.shortcodes.filter(function(l){return!1===l.get('parent_id')&&parseFloat(l.get('order'))<parseFloat(this.get('order'))},n.model)),o?n.render().$el.insertAfter('[data-model-id='+o.id+']'):this.$content.append(n.render().el)},addTextBlock:function(n){var o,l,s,r,d;return n.preventDefault(),r={},o=vc.shortcodes.create({shortcode:'vc_row',params:r}),d={width:'1/1'},l=vc.shortcodes.create({shortcode:'vc_column',params:d,parent_id:o.id,root_id:o.id}),s=vc.getDefaults('vc_column_text'),vc.shortcodes.create({shortcode:'vc_column_text',parent_id:l.id,root_id:o.id,params:s})},createRow:function(){var n,o,l;return o={},n=vc.shortcodes.create({shortcode:'vc_row',params:o}),l={width:'1/1'},vc.shortcodes.create({shortcode:'vc_column',params:l,parent_id:n.id,root_id:n.id}),n},addElement:function(n){_.isObject(n)&&n.preventDefault(),vc.add_element_block_view.render(!1)},openTemplatesWindow:function(n){n&&n.preventDefault(),t(n.currentTarget).is('#vc_templates-more-layouts')&&vc.templates_panel_view.once('show',function(){t('[data-vc-ui-element-target="[data-tab=default_templates]"]').click()}),vc.templates_panel_view.render().show()},loadDefaultTemplate:function(n){n&&n.preventDefault(),vc.templates_panel_view.loadTemplate(n)},editSettings:function(n){n&&n.preventDefault(),vc.post_settings_view.render().show()},enterFullscreen:function(){var n=t('body');n.hasClass('folded')?(n.data('vcKeepMenuFolded',!0),n.addClass('vc_fullscreen')):n.addClass('vc_fullscreen folded')},leaveFullscreen:function(){var n=t('body');n.hasClass('vc_fullscreen')&&(n.data('vcKeepMenuFolded')?(n.removeClass('vc_fullscreen'),n.removeData('vcKeepMenuFolded')):n.removeClass('vc_fullscreen folded'))},sortingStarted:function(){t('#visual_composer_content').addClass('vc_sorting-started')},sortingStopped:function(n,o){var l=o.item.data('element_type'),s=o.placeholder.closest('[data-element_type]').data('element_type')||'';vc.check_relevance(s,l)&&s!=l||(o.placeholder.addClass('vc_hidden-placeholder'),t(n.target).sortable('cancel')),t('#visual_composer_content').removeClass('vc_sorting-started')},updateElementsSorting:function(n,o){_.defer(function(l){var s=o.item.parent().closest('[data-model-id]'),r=s.data('model'),d=o.item.data('model'),u=l.views[r.id].$content.find('> [data-model-id]'),g=0;if(!_.isNull(o.sender)){var h=d.get('parent_id');vc.storage.lock(),d.save({parent_id:r.id}),h&&l.views[h].checkIsEmpty(),l.views[r.id].checkIsEmpty()}u.each(function(){var f=t(this).data('model');vc.storage.lock(),f.save({order:g++})}),d.save()},this)},updateRowsSorting:function(n,o){_.defer(function(l){var s=o.item.parent(),r=s.closest('[data-model-id]'),d=!!r.length&&r.data('model').get('id'),u=o.item.data('model'),g=o.item.data('element_type'),h=o.item.parent().closest('[data-element_type]').data('element_type')||'';if(!vc.check_relevance(h,g)||h==g)return void t(n.target).sortable('cancel');var f=u.get('parent_id');s.find(l.rowSortableSelector).each(function(){var w=t(this).index();vc.storage.lock(),t(this).data('model').save({order:w})}),u.save({parent_id:d}),f&&l.views[f].checkIsEmpty(),d&&l.views[d].checkIsEmpty()},this)},renderPlaceholder:function(n,o){var l=t(o).data('element_type'),s=_.isObject(vc.map[l])&&(_.isBoolean(vc.map[l].is_container)&&!0===vc.map[l].is_container||!_.isEmpty(vc.map[l].as_parent));return t('<div class="vc_helper vc_helper-'+l+'"><i class="vc_general vc_element-icon'+(vc.map[l].icon?' '+vc.map[l].icon:'')+'"'+(s?' data-is-container="true"':'')+'></i> '+vc.map[l].name+'</div>').prependTo('body')},rowSortableSelector:'> .wpb_vc_row, > .vc_main-sortable-element',setSortable:function(){if(vc_user_access().partAccess('dragndrop'))return t('.wpb_main_sortable').sortable({forcePlaceholderSize:!0,placeholder:'widgets-placeholder',cursor:'move',connectWith:'.vc_section_container',items:this.rowSortableSelector,handle:'.vc_column-move',cancel:'.vc-non-draggable-row',distance:0.5,start:this.sortingStarted,stop:this.sortingStopped,update:this.updateRowsSorting,tolerance:'intersect',over:function(n,o){var l=o.item.data('element_type'),s=o.placeholder.closest('[data-element_type]').data('element_type')||'';return vc.check_relevance(s,l)&&s!=l?void o.placeholder.css({maxWidth:o.placeholder.parent().width()}):(o.placeholder.addClass('vc_hidden-placeholder'),!1)},out:function(n,o){o.placeholder.removeClass('vc_hidden-placeholder'),o.placeholder.css({maxWidth:o.placeholder.parent().width()})}}),t('.wpb_column_container').sortable({forcePlaceholderSize:!0,forceHelperSize:!1,connectWith:'.wpb_column_container',placeholder:'vc_placeholder',items:'> div.wpb_sortable,> div.vc-non-draggable',helper:this.renderPlaceholder,distance:3,cancel:'.vc-non-draggable',scroll:!0,scrollSensitivity:70,cursor:'move',cursorAt:{top:20,left:16},tolerance:'intersect',start:function(){t('#visual_composer_content').addClass('vc_sorting-started'),t('.vc_not_inner_content').addClass('dragging_in')},stop:function(n,o){t('#visual_composer_content').removeClass('vc_sorting-started'),t('.dragging_in').removeClass('dragging_in');var l=o.item.data('element_type'),s=o.item.parent().closest('[data-element_type]').data('element_type')||'',r=!!_.isUndefined(vc.map[s].allowed_container_element)||vc.map[s].allowed_container_element;vc.check_relevance(s,l)&&s!=l||t(this).sortable('cancel'),_.isObject(vc.map[l])&&(_.isBoolean(vc.map[l].is_container)&&!0===vc.map[l].is_container||!_.isEmpty(vc.map[l].as_parent))&&!0!==r&&r!==o.item.data('element_type').replace(/_inner$/,'')&&t(this).sortable('cancel'),t('.vc_sorting-empty-container').removeClass('vc_sorting-empty-container')},update:this.updateElementsSorting,over:function(n,o){var l=o.item.data('element_type'),s=o.placeholder.closest('[data-element_type]').data('element_type'),r=!!_.isUndefined(vc.map[s].allowed_container_element)||vc.map[s].allowed_container_element;vc.check_relevance(s,l)&&s!=l||o.placeholder.addClass('vc_hidden-placeholder'),_.isObject(vc.map[l])&&(_.isBoolean(vc.map[l].is_container)&&!0===vc.map[l].is_container||!_.isEmpty(vc.map[l].as_parent))&&!0!==r&&r!==o.item.data('element_type').replace(/_inner$/,'')&&o.placeholder.addClass('vc_hidden-placeholder'),_.isNull(o.sender)||!o.sender.length||o.sender.find('> [data-element_type]:not(.ui-sortable-helper):visible').length||o.sender.addClass('vc_sorting-empty-container'),o.placeholder.css({maxWidth:o.placeholder.parent().width()})},out:function(n,o){o.placeholder.removeClass('vc_hidden-placeholder'),o.placeholder.css({maxWidth:o.placeholder.parent().width()})}}).disableSelection(),this},setNotEmpty:function(){t('#vc_no-content-helper').addClass('vc_not-empty')},setIsEmpty:function(){vc.views={},t('#vc_no-content-helper').removeClass('vc_not-empty')},checkEmpty:function(n){if(_.isObject(n)&&!1!==n.get('parent_id')&&n.get('parent_id')!=n.id){var o=this.views[n.get('parent_id')];if(!o)return;o.checkIsEmpty()}0===vc.shortcodes.length?this.setIsEmpty():this.setNotEmpty()},switchComposer:function(n){_.isObject(n)&&n.preventDefault(),'shown'===this.status?(this.accessPolicy.can('classic_editor')&&(!_.isUndefined(this.$switchButton)&&this.$switchButton.text(window.i18nLocale.main_button_title_backend_editor),!_.isUndefined(this.$buttonsContainer)&&this.$buttonsContainer.removeClass('vc_backend-status')),this.close(),this.status='closed'):(this.accessPolicy.can('classic_editor')&&(!_.isUndefined(this.$switchButton)&&this.$switchButton.text(window.i18nLocale.main_button_title_revert),!_.isUndefined(this.$buttonsContainer)&&this.$buttonsContainer.addClass('vc_backend-status')),this.show(),this.status='shown')},show:function(){this.$el.show(),this.$post.addClass('vc-disable-editor'),this.$vcStatus.val('true'),this.navOnScroll(),vc.storage.isContentChanged()&&(vc.app.setLoading(),vc.app.views={},_.defer(function(){vc.shortcodes.fetch({reset:!0}),vc.events.trigger('backendEditor.show')}))},setLoading:function(){this.setNotEmpty(),this.$loading_block.addClass('vc_ui-wp-spinner'),this.$metablock_content.addClass('vc_loading-shortcodes')},close:function(){this.$vcStatus.val('false'),this.$el.hide(),_.isObject(window.editorExpand)&&(_.delay(function(){window.scrollBy(0,-1)},17),_.delay(function(){window.scrollBy(0,1)},17)),this.$post.removeClass('vc-disable-editor'),_.defer(function(){vc.events.trigger('backendEditor.close')})},checkVcStatus:function(){!vc.accessPolicy.can('be_editor')||vc.accessPolicy.can('classic_editor')&&'true'!==this.$vcStatus.val()||this.switchComposer()},setNavTop:function(){this.navTop=this.$nav.length&&this.$nav.offset().top-28},save:function(){t('#wpb-save-post').text(window.i18nLocale.loading),t('#publish').click()},preview:function(){t('#post-preview').click()},navOnScroll:function(){this.$nav=t('#vc_navbar'),this.setNavTop(),this.processScroll(),t(window).unbind('scroll.composer').on('scroll.composer',this.processScroll)},processScroll:function(){return!0===this.disableFixedNav?void this.$nav.removeClass('vc_subnav-fixed'):void((!this.navTop||0>this.navTop)&&this.setNavTop(),this.scrollTop=t(window).scrollTop()+80,0<this.navTop&&this.scrollTop>=this.navTop&&!this.isFixed?(this.isFixed=1,this.$nav.addClass('vc_subnav-fixed')):this.scrollTop<=this.navTop&&this.isFixed&&(this.isFixed=0,this.$nav.removeClass('vc_subnav-fixed')))},buildRelevance:function(){vc.shortcode_relevance={},_.map(vc.map,function(n){_.isObject(n.as_parent)&&_.isString(n.as_parent.only)&&(vc.shortcode_relevance['parent_only_'+n.base]=n.as_parent.only.replace(/\s/,'').split(',')),_.isObject(n.as_parent)&&_.isString(n.as_parent.except)&&(vc.shortcode_relevance['parent_except_'+n.base]=n.as_parent.except.replace(/\s/,'').split(',')),_.isObject(n.as_child)&&_.isString(n.as_child.only)&&(vc.shortcode_relevance['child_only_'+n.base]=n.as_child.only.replace(/\s/,'').split(',')),_.isObject(n.as_child)&&_.isString(n.as_child.except)&&(vc.shortcode_relevance['child_except_'+n.base]=n.as_child.except.replace(/\s/,'').split(','))}),vc.check_relevance=function(n,o){return(!_.isArray(vc.shortcode_relevance['parent_only_'+n])||_.contains(vc.shortcode_relevance['parent_only_'+n],o))&&(!_.isArray(vc.shortcode_relevance['parent_except_'+n])||!_.contains(vc.shortcode_relevance['parent_except_'+n],o))&&(!_.isArray(vc.shortcode_relevance['child_only_'+o])||_.contains(vc.shortcode_relevance['child_only_'+o],n))&&(!_.isArray(vc.shortcode_relevance['child_except_'+o])||!_.contains(vc.shortcode_relevance['child_except'+o],n))}}}),t(function(){var n;n=t('#wpb_visual_composer'),n.is('div')&&(vc.app=new vc.visualComposerView({el:n}),vc.accessPolicy.can('be_editor')?vc.app.checkVcStatus():vc.app.$el.remove(),vc.events.on('vc:backend_editor:show',function(){vc.app.show(),vc.app.status='shown'}),vc.events.on('vc:backend_editor:switch',function(){vc.app.switchComposer()}))})}(window.jQuery),function(t){var n=vc.shortcodes;window.VcRowView=vc.shortcode_view.extend({change_columns_layout:!1,events:{'click > .vc_controls [data-vc-control="delete"]':'deleteShortcode','click > .vc_controls .set_columns':'setColumns','click > .vc_controls [data-vc-control="add"]':'addElement','click > .vc_controls [data-vc-control="edit"]':'editElement','click > .vc_controls [data-vc-control="clone"]':'clone','click > .vc_controls [data-vc-control="move"]':'moveElement','click > .vc_controls [data-vc-control="toggle"]':'toggleElement','click > .wpb_element_wrapper .vc_controls':'openClosedRow'},convertRowColumns:function(o){var l=o.toString().split(/_/),s=n.where({parent_id:this.model.id}),r=[],d=[],u='';return _.each(l,function(g,h){var k=_.map(g.toString().split(''),function(C){return parseInt(C,10)}),f,w;u=3<k.length?k[0]+''+k[1]+'/'+k[2]+k[3]:2<k.length?k[0]+'/'+k[1]+k[2]:k[0]+'/'+k[1],d.push(u),f=_.extend(_.isUndefined(s[h])?{}:s[h].get('params'),{width:u}),vc.storage.lock(),w=n.create({shortcode:this.getChildTag(),params:f,parent_id:this.model.id}),_.isObject(s[h])&&_.each(n.where({parent_id:s[h].id}),function(C){vc.storage.lock(),C.save({parent_id:w.id}),vc.storage.lock(),C.trigger('change_parent_id')}),r.push(w)},this),l.length<s.length&&_.each(s.slice(l.length),function(g){_.each(n.where({parent_id:g.id}),function(h){vc.storage.lock(),h.save({parent_id:_.last(r).id}),vc.storage.lock(),h.trigger('change_parent_id')})}),_.each(s,function(g){vc.storage.lock(),g.destroy()},this),this.model.save(),this.setActiveLayoutButton(''+o),d},changeShortcodeParams:function(o){window.VcRowView.__super__.changeShortcodeParams.call(this,o),this.buildDesignHelpers(),this.setRowClasses()},setRowClasses:function(){var o=this.model.getParam('disable_element'),l='vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg';this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(o)||(this.$el.addClass(l),this.disable_element_class=l)},designHelpersSelector:'> .vc_controls .column_toggle',buildDesignHelpers:function(){var o,l,s,r,d,u;o=this.model.getParam('css'),l=this.$el.find(this.designHelpersSelector),this.$el.find('> .vc_controls .vc_row_color').remove(),this.$el.find('> .vc_controls .vc_row_image').remove(),u=o.match(/background\-image:\s*url\(([^\)]+)\)/),u&&!_.isUndefined(u[1])&&(s=u[1]),u=o.match(/background\-color:\s*([^\s\;]+)\b/),u&&!_.isUndefined(u[1])&&(r=u[1]),u=o.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),u&&!_.isUndefined(u[1])&&(r=u[1],s=u[2]),d=this.model.getParam('el_id'),this.$el.find('> .vc_controls .vc_row-hash-id').remove(),_.isEmpty(d)||t('<span class="vc_row-hash-id"></span>').text('#'+d).insertAfter(l),s&&t('<span class="vc_row_image" style="background-image: url('+s+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(l),r&&t('<span class="vc_row_color" style="background-color: '+r+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(l)},addElement:function(o){o&&o.preventDefault(),n.create({shortcode:this.getChildTag(),params:{},parent_id:this.model.id}),this.setActiveLayoutButton(),this.$el.removeClass('vc_collapsed-row')},getChildTag:function(){return'vc_row_inner'===this.model.get('shortcode')?'vc_column_inner':'vc_column'},sortingSelector:'> [data-element_type=vc_column], > [data-element_type=vc_column_inner]',sortingSelectorCancel:'.vc-non-draggable-column',setSorting:function(){if(vc_user_access().partAccess('dragndrop')){var o=this;1<this.$content.find(this.sortingSelector).length?this.$content.removeClass('wpb-not-sortable').sortable({forcePlaceholderSize:!0,placeholder:'widgets-placeholder-column',tolerance:'pointer',cursor:'move',items:this.sortingSelector,cancel:this.sortingSelectorCancel,distance:0.5,start:function(l,s){t('#visual_composer_content').addClass('vc_sorting-started'),s.placeholder.width(s.item.width())},stop:function(){t('#visual_composer_content').removeClass('vc_sorting-started')},update:function(){var l=t(o.sortingSelector,o.$content);l.each(function(){var s=t(this).data('model'),r=t(this).index();s.set('order',r),l.length-1>r&&vc.storage.lock(),s.save()})},over:function(l,s){s.placeholder.css({maxWidth:s.placeholder.parent().width()}),s.placeholder.removeClass('vc_hidden-placeholder')},beforeStop:function(){}}):(this.$content.hasClass('ui-sortable')&&this.$content.sortable('destroy'),this.$content.addClass('wpb-not-sortable'))}},validateCellsList:function(o){var s=[],r=o.replace(/\s/g,'').split('+'),l;return 12===_.reduce(_.map(r,function(d){if(d.match(/^(vc_)?span\d?$/)){var u=vc_convert_column_span_size(d);return!1===u?1e3:(l=u.split(/\//),s.push(l[0]+''+l[1]),12*parseInt(l[0],10)/parseInt(l[1],10))}return d.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(l=d.split(/\//),s.push(l[0]+''+l[1]),12*parseInt(l[0],10)/parseInt(l[1],10)):1e4}),function(d,u){return u+=d},0)&&s.join('_')},setActiveLayoutButton:function(o){o||(o=_.map(vc.shortcodes.where({parent_id:this.model.get('id')}),function(s){var r=s.getParam('width');return r?r.replace(/\//,''):'11'}).join('_')),this.$el.find('> .vc_controls .vc_active').removeClass('vc_active');var l=this.$el.find('> .vc_ [data-cells-mask="'+vc_get_column_mask(o)+'"] [data-cells="'+o+'"], > .vc_controls [data-cells-mask="'+vc_get_column_mask(o)+'"][data-cells="'+o+'"]');l.length?l.addClass('vc_active'):this.$el.find('> .vc_controls [data-cells-mask=custom]').addClass('vc_active')},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelBackendEditor({el:t('#vc_ui-panel-row-layout')})),vc.row_layout_editor},setColumns:function(o){_.isObject(o)&&o.preventDefault();var l=t(o.currentTarget);if('custom'===l.data('cells'))this.layoutEditor().render(this.model).show();else{if(vc.is_mobile){var s=l.parent();s.hasClass('vc_visible')||(s.addClass('vc_visible'),t(document).off('click.vcRowColumnsControl').on('click.vcRowColumnsControl',function(){s.removeClass('vc_visible')}))}l.is('.vc_active')||(this.change_columns_layout=!0,_.defer(function(r,d){r.convertRowColumns(d)},this,l.data('cells')))}this.$el.removeClass('vc_collapsed-row')},sizeRows:function(){var o=45;t('> .wpb_vc_column, > .wpb_vc_column_inner',this.$content).each(function(){var l=t(this).find('> .wpb_element_wrapper > .wpb_column_container').css({minHeight:0}).height();l>o&&(o=l)}).each(function(){t(this).find('> .wpb_element_wrapper > .wpb_column_container').css({minHeight:o})})},ready:function(o){return window.VcRowView.__super__.ready.call(this,o),this},checkIsEmpty:function(){window.VcRowView.__super__.checkIsEmpty.call(this),this.setSorting()},changedContent:function(){return this.change_columns_layout?this:void this.setActiveLayoutButton()},moveElement:function(o){o.preventDefault()},toggleElement:function(o){o&&o.preventDefault(),this.$el.toggleClass('vc_collapsed-row')},openClosedRow:function(){this.$el.removeClass('vc_collapsed-row')},remove:function(){this.$content&&this.$content.data('uiSortable')&&this.$content.sortable('destroy'),this.$content&&this.$content.data('uiDroppable')&&this.$content.droppable('destroy'),delete vc.app.views[this.model.id],window.VcRowView.__super__.remove.call(this)}}),window.VcColumnView=vc.shortcode_view.extend({events:{'click > .vc_controls [data-vc-control="delete"]':'deleteShortcode','click > .vc_controls [data-vc-control="add"]':'addElement','click > .vc_controls [data-vc-control="edit"]':'editElement','click > .vc_controls [data-vc-control="clone"]':'clone','click > .wpb_element_wrapper > .vc_empty-container':'addToEmpty'},current_column_width:!1,initialize:function(o){window.VcColumnView.__super__.initialize.call(this,o),_.bindAll(this,'setDropable','dropButton')},ready:function(o){return window.VcColumnView.__super__.ready.call(this,o),this},render:function(){return window.VcColumnView.__super__.render.call(this),this.current_column_width=this.model.get('params').width||'1/1',this.$el.attr('data-width',this.current_column_width),this.setEmpty(),this},changeShortcodeParams:function(o){window.VcColumnView.__super__.changeShortcodeParams.call(this,o),this.setColumnClasses(),this.buildDesignHelpers()},designHelpersSelector:'> .vc_controls .column_add',buildDesignHelpers:function(){var r=this.model.getParam('css'),d=this.$el.find(this.designHelpersSelector).get(0),o,l,s;this.$el.find('> .vc_controls .vc_column_color').remove(),this.$el.find('> .vc_controls .vc_column_image').remove(),o=r.match(/background\-image:\s*url\(([^\)]+)\)/),o&&!_.isUndefined(o[1])&&(l=o[1]),o=r.match(/background\-color:\s*([^\s\;]+)\b/),o&&!_.isUndefined(o[1])&&(s=o[1]),o=r.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),o&&!_.isUndefined(o[1])&&(s=o[1],l=o[2]),l&&t('<span class="vc_column_image" style="background-image: url('+l+');" title="'+i18nLocale.column_background_image+'"></span>').insertBefore(d),s&&t('<span class="vc_column_color" style="background-color: '+s+'" title="'+i18nLocale.column_background_color+'"></span>').insertBefore(d)},setColumnClasses:function(){var l=this.model.getParam('offset')||'',s=this.model.getParam('width')||'1/1',r=this.convertSize(s),o;this.current_offset_class&&this.$el.removeClass(this.current_offset_class),this.current_column_width!==s&&(o=this.convertSize(this.current_column_width),this.$el.attr('data-width',s).removeClass(o).addClass(r),this.current_column_width=s),l.match(/vc_col\-sm\-\d+/)&&this.$el.removeClass(r),_.isEmpty(l)||this.$el.addClass(l),this.current_offset_class=l},addToEmpty:function(o){o.preventDefault(),t(o.target).hasClass('vc_empty-container')&&this.addElement(o)},setDropable:function(){return this.$content.droppable({greedy:!0,accept:'vc_column_inner'===this.model.get('shortcode')?'.dropable_el':'.dropable_el,.dropable_row',hoverClass:'wpb_ui-state-active',drop:this.dropButton}),this},dropButton:function(o,l){l.draggable.is('#wpb-add-new-element')?vc.add_element_block_view({model:{position_to_add:'end'}}).show(this):l.draggable.is('#wpb-add-new-row')&&this.createRow()},setEmpty:function(){this.$el.addClass('vc_empty-column'),'edit'!==vc_user_access().getState('shortcodes')&&this.$content.addClass('vc_empty-container')},unsetEmpty:function(){this.$el.removeClass('vc_empty-column'),this.$content.removeClass('vc_empty-container')},checkIsEmpty:function(){n.where({parent_id:this.model.id}).length?this.unsetEmpty():this.setEmpty(),window.VcColumnView.__super__.checkIsEmpty.call(this)},createRow:function(){var o,l,s;return o={},l={width:'1/1'},s=n.create({shortcode:'vc_row_inner',params:o,parent_id:this.model.id}),n.create({shortcode:'vc_column_inner',params:l,parent_id:s.id}),s},convertSize:function(o){var l=o?o.split('/'):[1,1],s=_.range(1,13),r=!_.isUndefined(l[0])&&0<=_.indexOf(s,parseInt(l[0],10))&&parseInt(l[0],10),d=!_.isUndefined(l[1])&&0<=_.indexOf(s,parseInt(l[1],10))&&parseInt(l[1],10);return!1!==r&&!1!==d?'vc_col-sm-'+12*r/d:'vc_col-sm-12'},deleteShortcode:function(o){var s=this.model.get('parent_id'),l;return(_.isObject(o)&&o.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section))&&void(this.model.destroy(),s&&!vc.shortcodes.where({parent_id:s}).length?(l=vc.shortcodes.get(s),_.contains(['vc_column','vc_column_inner'],l.get('shortcode'))||l.destroy()):s&&(l=vc.shortcodes.get(s))&&l.view&&l.view.setActiveLayoutButton&&l.view.setActiveLayoutButton())},remove:function(){this.$content&&this.$content.data('uiSortable')&&this.$content.sortable('destroy'),this.$content&&this.$content.data('uiDroppable')&&this.$content.droppable('destroy'),delete vc.app.views[this.model.id],window.VcColumnView.__super__.remove.call(this)}}),window.VcSectionView=VcColumnView.extend({designHelpersSelector:'> .vc_controls-row .vc_column-edit',setColumnClasses:function(){var o=this.model.getParam('disable_element'),l='vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg';this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(o)||(this.$el.addClass(l),this.disable_element_class=l)},buildDesignHelpers:function(){var o,l,s,r,d,u;o=this.model.getParam('css'),l=this.$el.find(this.designHelpersSelector),this.$el.find('> .vc_controls-row .vc_row_color').remove(),this.$el.find('> .vc_controls-row .vc_row_image').remove(),u=o.match(/background\-image:\s*url\(([^\)]+)\)/),u&&!_.isUndefined(u[1])&&(s=u[1]),u=o.match(/background\-color:\s*([^\s\;]+)\b/),u&&!_.isUndefined(u[1])&&(r=u[1]),u=o.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),u&&!_.isUndefined(u[1])&&(r=u[1],s=u[2]),d=this.model.getParam('el_id'),this.$el.find('> .vc_controls-row .vc_row-hash-id').remove(),_.isEmpty(d)||t('<span class="vc_row-hash-id"></span>').text('#'+d).insertAfter(l),s&&t('<span class="vc_row_image" style="background-image: url('+s+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(l),r&&t('<span class="vc_row_color" style="background-color: '+r+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(l)},checkIsEmpty:function(){window.VcSectionView.__super__.checkIsEmpty.call(this),this.setSorting()},setSorting:function(){if(vc_user_access().partAccess('dragndrop')){var o=this;this.$content.sortable({forcePlaceholderSize:!0,placeholder:'widgets-placeholder',connectWith:'.wpb_main_sortable,.wpb_vc_section .vc_section_container',cursor:'move',items:'> .wpb_vc_row',handle:'.vc_column-move',cancel:'.vc-non-draggable-row',distance:0.5,scroll:!0,scrollSensitivity:70,tolerance:'intersect',update:function(l,s){var r=t('> div.wpb_sortable,> div.vc-non-draggable',o.$content);r.each(function(){var d=t(this).data('model'),u=t(this).index();if(d.set('order',u),r.length-1>u&&vc.storage.lock(),!_.isNull(s.sender)){var g=s.item.parent().closest('[data-model-id]'),h=g.data('model'),f=d.get('parent_id');vc.storage.lock(),d.save({parent_id:h.id}),f&&vc.app.views[f].checkIsEmpty(),vc.app.views[h.id].checkIsEmpty()}d.save()})},stop:function(l,s){t('#visual_composer_content').removeClass('vc_sorting-started'),t('.dragging_in').removeClass('dragging_in');var r=s.item.data('element_type'),d=s.item.parent().closest('[data-element_type]').data('element_type');vc.check_relevance(d,r)&&d!=r||t(this).sortable('cancel'),t('.vc_sorting-empty-container').removeClass('vc_sorting-empty-container')},over:function(l,s){var r=s.item.data('element_type'),d=s.placeholder.closest('[data-element_type]').data('element_type')||'',u=!!_.isUndefined(vc.map[d].allowed_container_element)||vc.map[d].allowed_container_element;return vc.check_relevance(d,r)&&d!=r?_.isObject(vc.map[r])&&(_.isBoolean(vc.map[r].is_container)&&!0===vc.map[r].is_container||!_.isEmpty(vc.map[r].as_parent))&&!0!==u&&u!==s.item.data('element_type').replace(/_inner$/,'')?(s.placeholder.addClass('vc_hidden-placeholder'),!1):(_.isNull(s.sender)||!s.sender.length||s.sender.find('> [data-element_type]:not(.ui-sortable-helper):visible').length||s.sender.addClass('vc_sorting-empty-container'),void s.placeholder.css({maxWidth:s.placeholder.parent().width()})):(s.placeholder.addClass('vc_hidden-placeholder'),!1)},out:function(l,s){s.placeholder.removeClass('vc_hidden-placeholder'),s.placeholder.css({maxWidth:s.placeholder.parent().width()}),_.isNull(s.sender)||!s.sender.length||s.sender.find('> [data-element_type]:not(.ui-sortable-helper):visible').length||s.sender.addClass('vc_sorting-empty-container')}})}}}),window.VcAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{'click .add_tab':'addTab','click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete':'deleteShortcode','click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit':'editElement','click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone':'clone'},render:function(){return window.VcAccordionView.__super__.render.call(this),vc_user_access().shortcodeAll('vc_accordion_tab')?(vc_user_access().partAccess('dragndrop')&&this.$content.sortable({axis:'y',handle:'h3',stop:function(o,l){l.item.prev().triggerHandler('focusout'),t(this).find('> .wpb_sortable').each(function(){t(this).data('model').save({order:t(this).index()})})}}),this):(this.$el.find('.tab_controls').hide(),this)},changeShortcodeParams:function(o){var l,s;window.VcAccordionView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),s=_.isString(l.collapsible)&&'yes'===l.collapsible,this.$content.hasClass('ui-accordion')&&this.$content.accordion('option','collapsible',s)},changedContent:function(o){this.$content.hasClass('ui-accordion')&&this.$content.accordion('destroy');var l=_.isString(this.model.get('params').collapsible)&&'yes'===this.model.get('params').collapsible;this.$content.accordion({header:'h3',navigation:!1,autoHeight:!0,heightStyle:'content',collapsible:l,active:!1===this.adding_new_tab&&!0!==o.model.get('cloned')?0:o.$el.index()}),this.adding_new_tab=!1},addTab:function(o){return(o.preventDefault(),!!vc_user_access().shortcodeAll('vc_accordion_tab'))&&void(this.adding_new_tab=!0,vc.shortcodes.create({shortcode:'vc_accordion_tab',params:{title:window.i18nLocale.section},parent_id:this.model.id}))},_loadDefaults:function(){window.VcAccordionView.__super__._loadDefaults.call(this)}}),window.VcAccordionTabView=window.VcColumnView.extend({events:{'click > [data-element_type] > .vc_controls .vc_control-btn-delete':'deleteShortcode','click > [data-element_type] >  .vc_controls .vc_control-btn-prepend':'addElement','click > [data-element_type] >  .vc_controls .vc_control-btn-edit':'editElement','click > [data-element_type] > .vc_controls .vc_control-btn-clone':'clone','click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container':'addToEmpty'},setContent:function(){this.$content=this.$el.find('> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children')},changeShortcodeParams:function(o){var l;window.VcAccordionTabView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),_.isObject(l)&&_.isString(l.title)&&this.$el.find('> h3 .tab-label').text(l.title)},setEmpty:function(){t('> [data-element_type]',this.$el).addClass('vc_empty-column'),'edit'!==vc_user_access().getState('shortcodes')&&this.$content.addClass('vc_empty-container')},unsetEmpty:function(){t('> [data-element_type]',this.$el).removeClass('vc_empty-column'),this.$content.removeClass('vc_empty-container')}}),window.VcMessageView=vc.shortcode_view.extend({changeShortcodeParams:function(o){var l,s;window.VcMessageView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),s=this.$el.find('> .wpb_element_wrapper').removeClass(_.values(this.params.color.value).join(' ')),_.isObject(l)&&_.isString(l.color)&&s.addClass(l.color)}}),window.VcMessageView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(o){var l,s,r,d,u;switch(window.VcMessageView_Backend.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),s=this.$el.find('> .wpb_element_wrapper'),r=['vc_message_box'],_.isUndefined(l.message_box_style)&&(l.message_box_style='classic'),_.isUndefined(l.message_box_color)&&(l.message_box_color='alert-info'),l.style?'3d'===l.style?(l.message_box_style='3d',l.style='rounded'):'outlined'===l.style?(l.message_box_style='outline',l.style='rounded'):'square_outlined'===l.style&&(l.message_box_style='outline',l.style='square'):l.style='rounded',r.push('vc_message_box-'+l.style),l.message_box_style&&r.push('vc_message_box-'+l.message_box_style),s.attr('class','wpb_element_wrapper'),s.find('.vc_message_box-icon').remove(),d=_.isUndefined(l['icon_'+l.icon_type])?'fa fa-info-circle':l['icon_'+l.icon_type],u=l.color,l.color){case'info':d='fa fa-info-circle';break;case'alert-info':d='vc_pixel_icon vc_pixel_icon-info';break;case'success':d='fa fa-check';break;case'alert-success':d='vc_pixel_icon vc_pixel_icon-tick';break;case'warning':d='fa fa-exclamation-triangle';break;case'alert-warning':d='vc_pixel_icon vc_pixel_icon-alert';break;case'danger':d='fa fa-times';break;case'alert-danger':d='vc_pixel_icon vc_pixel_icon-explanation';break;case'alert-custom':default:u=l.message_box_color;}r.push('vc_color-'+u),s.addClass(r.join(' ')),s.prepend(t('<div class="vc_message_box-icon"><i class="'+d+'"></i></div>'))}}),window.VcTextSeparatorView=vc.shortcode_view.extend({changeShortcodeParams:function(o){var l,s;window.VcTextSeparatorView.__super__.changeShortcodeParams.call(this,o),l=o.get('params');var r=this.$el.find('> .wpb_element_wrapper');_.isObject(l)&&_.isString(l.title_align)&&r.removeClass(_.values(this.params.title_align.value).join(' ')).addClass(l.title_align),_.isObject(l)&&_.isString(l.add_icon)&&'true'===l.add_icon&&(s=t('<i class="'+l['i_icon_'+l.i_type]+'" ></i>'),s.prependTo(r.find('[name=title]')),s.after(' '))}}),window.VcCallToActionView=vc.shortcode_view.extend({changeShortcodeParams:function(o){var l;window.VcCallToActionView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),_.isObject(l)&&_.isString(l.position)&&this.$el.find('> .wpb_element_wrapper').removeClass(_.values(this.params.position.value).join(' ')).addClass(l.position)}}),window.VcCallToActionView3=vc.shortcode_view.extend({changeShortcodeParams:function(o){var l,s,r;window.VcCallToActionView3.__super__.changeShortcodeParams.call(this,o),l=_.extend({add_icon:'',i_type:''},o.get('params')),r=this.$el.find('.vc_admin_label.admin_label_i_type'),_.isEmpty(l.add_icon)?r.addClass('hidden-label').hide():_.isEmpty(l.i_type)||_.isEmpty(l['i_icon_'+l.i_type])||(s=vc_toTitleCase(l.i_type)+' - <i class="'+l['i_icon_'+l.i_type]+'"></i>',r.html('<label>'+r.find('label').text()+'</label>: '+s),r.show().removeClass('hidden-label'))}}),window.VcToggleView=vc.shortcode_view.extend({events:function(){return _.extend({'click .vc_toggle_title':'toggle','click .toggle_title':'toggle'},window.VcToggleView.__super__.events)},toggle:function(o){o&&o.preventDefault(),t(o.currentTarget).toggleClass('vc_toggle_title_active'),t('.vc_toggle_content',this.$el).slideToggle(500)},changeShortcodeParams:function(o){var l;window.VcToggleView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),_.isObject(l)&&_.isString(l.open)&&'true'===l.open&&t('.vc_toggle_title',this.$el).addClass('vc_toggle_title_active').next().show()}}),window.VcButtonView=vc.shortcode_view.extend({events:function(){return _.extend({'click button':'buttonClick'},window.VcToggleView.__super__.events)},buttonClick:function(o){o.preventDefault()},changeShortcodeParams:function(o){var l;if(window.VcButtonView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),_.isObject(l)){var s;s=l.color+' '+l.size+' '+l.icon,this.$el.find('.wpb_element_wrapper').removeClass(s),this.$el.find('button.title').attr({class:'title textfield wpb_button '+s}),'none'!==l.icon&&0===this.$el.find('button i.icon').length?this.$el.find('button.title').append('<i class="icon"></i>'):this.$el.find('button.title i.icon').remove()}}}),window.VcButton2View=vc.shortcode_view.extend({events:function(){return _.extend({'click button':'buttonClick'},window.VcToggleView.__super__.events)},buttonClick:function(o){o.preventDefault()},changeShortcodeParams:function(o){var l;if(window.VcButton2View.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),_.isObject(l)){var s;s=(l.color?'vc_btn_'+l.color:'')+' '+(l.color?'vc_btn-'+l.color:'')+' '+(l.size?'vc_btn-'+l.size:'')+' '+(l.size?'vc_btn_'+l.size:'')+' '+(l.style?'vc_btn_'+l.style:''),this.$el.find('.wpb_element_wrapper').removeClass(s),this.$el.find('button.title').attr({class:'title textfield vc_btn  '+s})}}}),window.VcButton3View=vc.shortcode_view.extend({buttonTemplate:!1,buttonTemplateCompiled:!1,$wrapper:!1,events:function(){return _.extend({'click .vc_btn3':'buttonClick'},window.VcToggleView.__super__.events)},buttonClick:function(o){o.preventDefault()},changeShortcodeParams:function(o){var l;if(window.VcButton3View.__super__.changeShortcodeParams.call(this,o),l=_.extend({},o.get('params')),this.buttonTemplate||(this.buttonTemplate=this.$el.find('.vc_btn3-container').html(),this.buttonTemplateCompiled=vc.template(this.buttonTemplate,vc.templateOptions.custom)),this.$wrapper||(this.$wrapper=this.$el.find('.wpb_element_wrapper')),_.isObject(l)){l.title&&_.isEmpty(l.title.trim())&&(l.title='<span class="vc_btn3-placeholder">&nbsp;</span>'),'custom'===l.style?(l.color=void 0,_.isEmpty(l.custom_background)&&_.isEmpty(l.custom_text)&&(l.color='grey')):'outline-custom'===l.style&&(l.color=void 0,_.isEmpty(l.outline_custom_color)&&_.isEmpty(l.outline_custom_hover_background)&&_.isEmpty(l.outline_custom_hover_text)&&(l.style='outline',l.color='grey'));var s=t(this.buttonTemplateCompiled({params:l}));'custom'===l.style?('undefined'!==l.custom_background&&s.css('background-color',l.custom_background),'undefined'!==l.custom_text&&s.css('color',l.custom_text)):'outline-custom'===l.style&&s.css({'background-color':'transparent','border-color':l.outline_custom_color,color:l.outline_custom_color}).hover(function(){t(this).css({'background-color':l.outline_custom_hover_background,'border-color':l.outline_custom_hover_background,color:l.outline_custom_hover_text})},function(){t(this).css({'background-color':'transparent','border-color':l.outline_custom_color,color:l.outline_custom_color})}),this.$wrapper.find('.vc_btn3-container').html(s)}}}),window.VcTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{'click .add_tab':'addTab','click > .vc_controls .vc_control-btn-delete':'deleteShortcode','click > .vc_controls .vc_control-btn-edit':'editElement','click > .vc_controls .vc_control-btn-clone':'clone'},initialize:function(o){window.VcTabsView.__super__.initialize.call(this,o),_.bindAll(this,'stopSorting')},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find('.wpb_tabs_holder'),this.createAddTabButton(),this},ready:function(o){window.VcTabsView.__super__.ready.call(this,o)},createAddTabButton:function(){var o=Date.now()+'-'+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+o+'" class="new_element_button"></div>'),this.$add_button=t('<li class="add_tab_block"><a href="#new-tab-'+o+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find('.tabs_controls')),vc_user_access().shortcodeAll('vc_tab')||this.$add_button.hide()},addTab:function(o){if(o.preventDefault(),!vc_user_access().shortcodeAll('vc_tab'))return!1;this.new_tab_adding=!0;var l=window.i18nLocale.tab,s=this.$tabs.find('[data-element_type=vc_tab]').length,r=Date.now()+'-'+s+'-'+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:'vc_tab',params:{title:l,tab_id:r},parent_id:this.model.id}),!1},stopSorting:function(){var s;this.$tabs.find('ul.tabs_controls li:not(.add_tab_block)').each(function(){t(this).find('a').attr('href').replace('#',''),s=vc.shortcodes.get(t('[id='+t(this).attr('aria-controls')+']').data('model-id')),vc.storage.lock(),s.save({order:t(this).index()})}),s&&s.save()},changedContent:function(o){var l=o.model.get('params');if(this.$tabs.hasClass('ui-tabs')||(this.$tabs.tabs({select:function(d,u){return!t(u.tab).hasClass('add_tab')}}),this.$tabs.find('.ui-tabs-nav').prependTo(this.$tabs),vc_user_access().shortcodeAll('vc_tab')&&this.$tabs.find('.ui-tabs-nav').sortable({axis:'vc_tour'===this.$tabs.closest('[data-element_type]').data('element_type')?'y':'x',update:this.stopSorting,items:'> li:not(.add_tab_block)'})),!0===o.model.get('cloned')){var s=(o.model.get('cloned_from'),t('.tabs_controls > .add_tab_block',this.$content)),r=t('<li><a href=\'#tab-'+l.tab_id+'\'>'+l.title+'</a></li>').insertBefore(s);this.$tabs.tabs('refresh'),this.$tabs.tabs('option','active',r.index())}else t('<li><a href=\'#tab-'+l.tab_id+'\'>'+l.title+'</a></li>').insertBefore(this.$add_button),this.$tabs.tabs('refresh'),this.$tabs.tabs('option','active',this.new_tab_adding?t('.ui-tabs-nav li',this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(o,l,s){var r,d,u,g;return r=_.isBoolean(s)&&!0===s?o.get('order'):parseFloat(o.get('order'))+vc.clone_index,u=_.extend({},o.get('params')),g=o.get('shortcode'),'vc_tab'===g&&_.extend(u,{tab_id:Date.now()+'-'+this.$tabs.find('[data-element-type=vc_tab]').length+'-'+Math.floor(11*Math.random())}),d=n.create({shortcode:g,id:vc_guid(),parent_id:l,order:r,cloned:'vc_tab'!==g,cloned_from:o.toJSON(),params:u}),_.each(n.where({parent_id:o.id}),function(h){this.cloneModel(h,d.get('id'),!0)},this),d}}),window.VcTabView=window.VcColumnView.extend({events:{'click > .vc_controls .vc_control-btn-delete':'deleteShortcode','click > .vc_controls .vc_control-btn-prepend':'addElement','click > .vc_controls .vc_control-btn-edit':'editElement','click > .vc_controls .vc_control-btn-clone':'clone','click > .wpb_element_wrapper > .vc_empty-container':'addToEmpty'},render:function(){var o=this.model.get('params');return window.VcTabView.__super__.render.call(this),o.tab_id||(o.tab_id=Date.now()+'-'+Math.floor(11*Math.random()),this.model.save('params',o)),this.id='tab-'+o.tab_id,this.$el.attr('id',this.id),this},ready:function(o){return window.VcTabView.__super__.ready.call(this,o),this.$tabs=this.$el.closest('.wpb_tabs_holder'),this.model.get('params'),this},changeShortcodeParams:function(o){var l;window.VcTabView.__super__.changeShortcodeParams.call(this,o),l=o.get('params'),_.isObject(l)&&_.isString(l.title)&&_.isString(l.tab_id)&&t('.ui-tabs-nav [href="#tab-'+l.tab_id+'"]').text(l.title)},deleteShortcode:function(o){_.isObject(o)&&o.preventDefault();var l=confirm(window.i18nLocale.press_ok_to_delete_section),s=this.model.get('parent_id');if(!0!==l)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:s}).length)return vc.shortcodes.get(s).destroy(),!1;var r=this.model.get('params'),d=t('[href="#tab-'+r.tab_id+'"]',this.$tabs).parent().index();t('[href="#tab-'+r.tab_id+'"]').parent().remove();var u=this.$tabs.find('.ui-tabs-nav li:not(.add_tab_block)').length;0<u&&this.$tabs.tabs('refresh'),d<u?this.$tabs.tabs('option','active',d):0<u&&this.$tabs.tabs('option','active',u-1)},cloneModel:function(o,l,s){var r,d,u,g;return r=_.isBoolean(s)&&!0===s?o.get('order'):parseFloat(o.get('order'))+vc.clone_index,u=_.extend({},o.get('params')),g=o.get('shortcode'),'vc_tab'===g&&_.extend(u,{tab_id:Date.now()+'-'+this.$tabs.find('[data-element_type=vc_tab]').length+'-'+Math.floor(11*Math.random())}),d=n.create({shortcode:g,parent_id:l,order:r,cloned:!0,cloned_from:o.toJSON(),params:u}),_.each(n.where({parent_id:o.id}),function(h){this.cloneModel(h,d.get('id'),!0)},this),d}}),window.VcIconElementView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(o){var l,s,r,d;l=o.get('shortcode'),s=o.get('params'),r=vc.map[l],_.isArray(r.params)&&_.each(r.params,function(u){if(!_.isUndefined(u.admin_label)&&u.admin_label){var g,h,f,w;g=u.param_name,h=s[g],f=this.$el.find('> .wpb_element_wrapper'),w=f.children('.admin_label_'+g),w.length&&(''===h||_.isUndefined(h)?w.hide().addClass('hidden-label'):('type'===g&&(_.isUndefined(s['icon_'+h])||(h=vc_toTitleCase(h)+' - <i class=\''+s['icon_'+h]+'\'></i>')),w.html('<label>'+w.find('label').text()+'</label>: '+h),w.show().removeClass('hidden-label')))}},this),d=vc.app.views[this.model.get('parent_id')],!1!==o.get('parent_id')&&_.isObject(d)&&d.checkIsEmpty()}}),window.VcBackendTtaViewInterface=vc.shortcode_view.extend({sortableSelector:!1,$sortable:!1,$navigation:!1,defaultSectionTitle:window.i18nLocale.tab,sortableUpdateModelIdSelector:'data-vc-target-model-id',activeClass:'vc_active',sortingPlaceholder:'vc_placeholder',events:{'click > .vc_controls .vc_control-btn-delete':'deleteShortcode','click > .vc_controls .vc_control-btn-edit':'editElement','click > .vc_controls .vc_control-btn-clone':'clone','click > .vc_controls .vc_control-btn-prepend':'clickPrependSection','click .vc_tta-section-append':'clickAppendSection'},initialize:function(o){window.VcBackendTtaViewInterface.__super__.initialize.call(this,o),_.bindAll(this,'updateSorting')},render:function(){return window.VcBackendTtaViewInterface.__super__.render.call(this),this.$el.addClass('vc_tta-container vc_tta-o-non-responsive'),this},setContent:function(){this.$content=this.$el.find('> .wpb_element_wrapper .vc_tta-panels')},clickAppendSection:function(o){o.preventDefault(),this.addSection()},clickPrependSection:function(o){o.preventDefault(),this.addSection(!0)},addSection:function(o){var l,s;return l=this.defaultSectionTitle,s={shortcode:'vc_tta_section',params:{title:l},parent_id:this.model.get('id'),order:_.isBoolean(o)&&o?vc.add_element_block_view.getFirstPositionIndex():vc.shortcodes.getNextOrder(),prepend:o},vc.shortcodes.create(s)},findSection:function(o){return this.$content.children('[data-model-id="'+o+'"]')},getIndex:function(o){return o.index()},buildSortable:function(o){return'edit'!==vc_user_access().getState('shortcodes')&&vc_user_access().shortcodeAll('vc_tta_section')&&o.sortable({forcePlaceholderSize:!0,placeholder:this.sortingPlaceholder,helper:this.renderSortingPlaceholder,scroll:!0,cursor:'move',cursorAt:{top:20,left:16},start:function(){},over:function(){},stop:function(l,s){s.item.attr('style','')},update:this.updateSorting,items:this.sortableSelector})},updateSorting:function(){var s;return!!vc_user_access().shortcodeAll('vc_tta_section')&&void(s=this,this.$sortable.find(this.sortableSelector).each(function(){var r,d,u;u=t(this),d=u.attr(s.sortableUpdateModelIdSelector),r=vc.shortcodes.get(d),vc.storage.lock(),r.save({order:s.getIndex(u)})}),vc.storage.unlock(),vc.storage.save())},makeFirstSectionActive:function(){this.$content.children(':first-child').addClass(this.activeClass)},checkForActiveSection:function(){var o;o=this.$content.children('.'+this.activeClass),o.length||this.makeFirstSectionActive()},changeActiveSection:function(o){this.$content.children('.vc_tta-panel.'+this.activeClass).removeClass(this.activeClass),this.findSection(o).addClass(this.activeClass)},changedContent:function(o){var l;return l=window.VcBackendTtaViewInterface.__super__.changedContent.call(this,o),this.checkForActiveSection(),this.buildSortable(this.$sortable),l},notifySectionChanged:function(o){var l,s;l=o.get('view'),_.isObject(l)&&(s=o.getParam('title'),_.isString(s)&&s.length||(s=this.defaultSectionTitle),l.$el.find('.vc_tta-panel-title a .vc_tta-title-text').text(s))},notifySectionRendered:function(){},getNextTab:function(o){var l,s,r;return r=this.$navigation.children(),l=r.length-2,s=o.index(),s===l?r.eq(s-1):r.eq(s+1)},renderSortingPlaceholder:function(o,l){return vc.app.renderPlaceholder(o,l)}}),window.VcBackendTtaTabsView=window.VcBackendTtaViewInterface.extend({sortableSelector:'> [data-vc-tab]',sortableSelectorCancel:'.vc-non-draggable-container',sortablePlaceholderClass:'vc_placeholder-tta-tab',navigationSectionTemplate:null,navigationSectionTemplateParsed:null,$navigationSectionAdd:null,sortingPlaceholder:'vc_placeholder-tab vc_tta-tab',render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$el.find('> .wpb_element_wrapper .vc_tta-tabs-list'),this.$sortable=this.$navigation,this.$navigationSectionAdd=this.$navigation.children('.vc_tta-tab:first-child'),this.setNavigationSectionTemplate(this.$navigationSectionAdd.prop('outerHTML')),vc_user_access().shortcodeAll('vc_tta_section')?this.$navigationSectionAdd.addClass('vc_tta-section-append').removeAttr('data-vc-target-model-id').removeAttr('data-vc-tab').find('[data-vc-target]').html('<i class="vc_tta-controls-icon vc_tta-controls-icon-plus"></i>').removeAttr('data-vc-tabs').removeAttr('data-vc-target').removeAttr('data-vc-target-model-id').removeAttr('data-vc-toggle'):this.$navigationSectionAdd.hide(),this},setNavigationSectionTemplate:function(o){this.navigationSectionTemplate=o,this.navigationSectionTemplateParsed=vc.template(this.navigationSectionTemplate,vc.templateOptions.custom)},getNavigationSectionTemplate:function(){return this.navigationSectionTemplate},getParsedNavigationSectionTemplate:function(o){return this.navigationSectionTemplateParsed(o)},changeNavigationSectionTitle:function(o,l){this.findNavigationTab(o).find('[data-vc-target]').text(l)},changeActiveSection:function(o){window.VcBackendTtaTabsView.__super__.changeActiveSection.call(this,o),this.$navigation.children('.'+this.activeClass).removeClass(this.activeClass),this.findNavigationTab(o).addClass(this.activeClass)},notifySectionRendered:function(o){var l,s,r,d;window.VcBackendTtaTabsView.__super__.notifySectionRendered.call(this,o),s=o.getParam('title'),l=t(this.getParsedNavigationSectionTemplate({model_id:o.get('id'),section_title:_.isString(s)&&0<s.length?s:this.defaultSectionTitle})),o.get('cloned')?(d=o.get('cloned_from'),_.isObject(d)&&(r=this.$navigation.children('[data-vc-target-model-id="'+d.id+'"]'),r.length?l.insertAfter(r):l.insertBefore(this.$navigation.children('.vc_tta-section-append')))):o.get('prepend')?l.insertBefore(this.$navigation.children(':first-child')):l.insertBefore(this.$navigation.children(':last-child'))},notifySectionChanged:function(o){var l;window.VcBackendTtaTabsView.__super__.notifySectionChanged.call(this,o),l=o.getParam('title'),_.isString(l)&&l.length||(l=this.defaultSectionTitle),this.changeNavigationSectionTitle(o.get('id'),l),o.view.$el.find('> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name').removeClass('vc_element-move'),o.view.$el.find('> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name .vc-c-icon-dragndrop').hide()},makeFirstSectionActive:function(){var o;o=this.$navigation.children(':first-child:not(.vc_tta-section-append)').addClass(this.activeClass),o.length&&this.findSection(o.data('vc-target-model-id')).addClass(this.activeClass)},findNavigationTab:function(o){return this.$navigation.children('[data-vc-target-model-id="'+o+'"]')},removeSection:function(o){var l,s,r;l=this.findNavigationTab(o.get('id')),r=l.hasClass(this.activeClass),r&&(s=this.getNextTab(l),s.addClass(this.activeClass),this.changeActiveSection(s.data('vc-target-model-id'))),l.remove()},renderSortingPlaceholder:function(o,l){var s,r,d;return s=l,r=l.width()+1,d=l.height(),s.width(r),s.height(d),s}}),window.VcBackendTtaAccordionView=VcBackendTtaViewInterface.extend({sortableSelector:'> .vc_tta-panel:not(.vc_tta-section-append)',sortableSelectorCancel:'.vc-non-draggable',sortableUpdateModelIdSelector:'data-model-id',defaultSectionTitle:window.i18nLocale.section,render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$content,this.$sortable=this.$content,vc_user_access().shortcodeAll('vc_tta_section')||this.$content.find('.vc_tta-section-append').hide(),this},removeSection:function(o){var l,s,r;l=this.findSection(o.get('id')),(r=l.hasClass(this.activeClass))&&(s=this.getNextTab(l),s.addClass(this.activeClass))},addShortcode:function(o){var l;l=_.last(vc.shortcodes.filter(function(s){return s.get('parent_id')===this.get('parent_id')&&parseFloat(s.get('order'))<parseFloat(this.get('order'))},o.model)),l?o.render().$el.insertAfter('[data-model-id='+l.id+']'):this.$content.prepend(o.render().el)}}),window.VcBackendTtaTourView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaPageableView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaSectionView=window.VcColumnView.extend({parentObj:null,events:{'click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete':'deleteShortcode','click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend':'addElement','click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit':'editElement','click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone':'clone','click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container':'addToEmpty'},setContent:function(){this.$content=this.$el.find('> .wpb_element_wrapper > .vc_tta-panel-body > .vc_container_for_children')},render:function(){var o;return window.VcBackendTtaSectionView.__super__.render.call(this),o=vc.shortcodes.get(this.model.get('parent_id')),_.isObject(o)&&!_.isUndefined(o.view)&&(this.parentObj=o),this.$el.addClass('vc_tta-panel'),this.$el.attr('style',''),this.$el.attr('data-vc-toggle','tab'),this.replaceTemplateVars(),this},replaceTemplateVars:function(){var o,l;o=this.model.getParam('title'),_.isEmpty(o)&&(o=this.parentObj&&this.parentObj.defaultSectionTitle&&this.parentObj.defaultSectionTitle.length?this.parentObj.defaultSectionTitle:window.i18nLocale.section),l=this.$el.find('.vc_tta-panel-heading');var s=vc.template(l.html(),vc.templateOptions.custom);l.html(s({model_id:this.model.get('id'),section_title:o}))},getIndex:function(){return this.$el.index()},ready:function(){this.updateParentNavigation(),window.VcBackendTtaSectionView.__super__.ready.call(this)},updateParentNavigation:function(){_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionRendered&&this.parentObj.view.notifySectionRendered(this.model)},deleteShortcode:function(o){return _.isObject(o)&&o.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(1===vc.shortcodes.where({parent_id:this.model.get('parent_id')}).length?(this.model.destroy(),this.parentObj&&this.parentObj.destroy()):(this.parentObj&&this.parentObj.view&&this.parentObj.view.removeSection&&this.parentObj.view.removeSection(this.model),this.model.destroy()),!0)},changeShortcodeParams:function(o){window.VcBackendTtaSectionView.__super__.changeShortcodeParams.call(this,o),_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionChanged&&this.parentObj.view.notifySectionChanged(o)}}),vc.addTemplateFilter(function(o){var l=VCS4()+'-'+VCS4();return o.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+l+'"')})}(window.jQuery),function(t,n){'use strict';function o(w,k){var C=w.models?w.pluck('id'):w;t.ajax({dataType:'json',type:'POST',url:window.ajaxurl,data:{action:'vc_media_editor_add_image',filters:window.vc_selectedFilters,ids:C,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(S){var T,P,E,j;if('function'==typeof k){for(T=[],E=[],j=0;j<S.data.ids.length;j++)P=w[S.data.ids[j]],P||(P=d.model.Attachment.get(S.data.ids[j]),E.push(P.fetch())),T.push(P);t.when.apply(t,E).done(function(){k(T)})}}).fail(function(S){t('.media-modal-close').click(),r=[],window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,'error'),window.console&&window.console.error&&window.console.error(S)}).always(function(){t('.media-modal').removeClass('processing-media')})}function l(w){var k,C,S;if(S=t('.media-frame:visible [data-vc-preview-image-filter='+w+']'),S.length){if(k=t('.media-frame:visible .attachment-info .thumbnail-image').eq(-1),C=k.find('img'),k.addClass('loading'),C.data('original-src')||C.data('original-src',C.attr('src')),!S.val().length)return C.attr('src',C.data('original-src')),void k.removeClass('loading');t.ajax({type:'POST',dataType:'json',url:window.ajaxurl,data:{action:'vc_media_editor_preview_image',filter:S.val(),attachment_id:w,preferred_size:window.getUserSetting('imgsize','medium'),_vcnonce:window.vcAdminNonce}}).done(function(T){T.success&&T.data.src.length&&C.attr('src',T.data.src)}).fail(function(T,P,E){window.console&&window.console.error&&window.console.error('Filter preview failed:',P,E)}).always(function(){k.removeClass('loading')})}}var r=[],d=wp.media,u=d.featuredImage.set,g=d.editor.send.attachment,h=i18nLocale,f={},s;s=n.extend(d.view.AttachmentCompat.prototype.render),d.view.AttachmentCompat.prototype.render=function(){var k=this,w;return w=this.model.get('id'),s.call(this),n.defer(function(){var C,S,T,P,E;C=k.controller.$el.find('.attachment-info'),E=k.controller.$el.find('[data-vc-preview-image-filter]'),C.length&&E.length&&(P=E.parent().find('.vc-filter-label').text(),S='<label class="setting vc-image-filter-setting">',S+='<span class="name">'+P+'</span>',S+=E[0].outerHTML,S+='</label>',C.before(S),E.parents('tr').remove()),void 0!==window.vc_selectedFilters&&void 0!==window.vc_selectedFilters[w]&&(T=t('.media-frame:visible [data-vc-preview-image-filter='+w+']'),T.length&&T.val(window.vc_selectedFilters[w]).change()),l(w)}),this},d.editor.send.attachment=function(w,k){function S(T,P){r&&r[0]!==P?setTimeout(function(){S(T,P)},50):(r.shift(),d.editor.insert(T))}r.push(k.id),o([k.id],function(T){var P=T.slice(0).pop().attributes;g(w,P).done(function(E){S(E,P.id)})})},d.featuredImage.set=function(w){-1===w?u(w):t.ajax({type:'POST',url:window.ajaxurl,data:{action:'vc_media_editor_add_image',filters:window.vc_selectedFilters,ids:[w],_vcnonce:window.vcAdminNonce}}).done(function(C){var S;!0===C.success&&C.data.ids.length?(S=C.data.ids.pop(),u(S)):u(w)}).fail(function(){u(w)})},d.controller.VcSingleImage=d.controller.FeaturedImage.extend({defaults:n.defaults({id:'vc_single-image',filterable:'uploaded',multiple:!1,toolbar:'vc_single-image',title:h.set_image,priority:60,syncSelection:!1},d.controller.Library.prototype.defaults),updateSelection:function(){var k=this.get('selection'),C=d.vc_editor.getData(),w;this.get('library'),void 0!==C&&''!==C&&-1!==C&&(w=n.map(C.toString().split(/,/),function(S){var T=d.model.Attachment.get(S);return T.fetch(),T})),k.reset(w)}}),d.controller.VcGallery=d.controller.VcSingleImage.extend({defaults:n.defaults({id:'vc_gallery',title:h.add_images,toolbar:'main-insert',filterable:'uploaded',library:d.query({type:'image'}),multiple:'add',editable:!0,priority:60,syncSelection:!1},d.controller.Library.prototype.defaults)}),d.VcSingleImage={getData:function(){return this.$hidden_ids.val()},set:function(w){var k=vc.template(t('#vc_settings-image-block').html(),vc.templateOptions.custom);return this.$img_ul.html(k(w)),this.$clear_button.show(),this.$hidden_ids.val(w.id).trigger('change'),!1},frame:function(w){return window.vc_selectedFilters={},this.element=w,this.$button=t(this.element),this.$block=this.$button.closest('.edit_form_line'),this.$hidden_ids=this.$block.find('.gallery_widget_attached_images_ids'),this.$img_ul=this.$block.find('.gallery_widget_attached_images_list'),this.$clear_button=this.$img_ul.next(),this._frame?this._frame:(this._frame=d({state:'vc_single-image',states:[new d.controller.VcSingleImage]}),this._frame.on('toolbar:create:vc_single-image',function(k){this.createSelectToolbar(k,{text:h.set_image,close:!1})},this._frame),this._frame.state('vc_single-image').on('select',this.select),this._frame)},select:function(){var w=this.get('selection');vc.events.trigger('click:media_editor:add_image',w,'single')}},d.view.MediaFrame.VcGallery=d.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new d.controller.VcGallery])},bindHandlers:function(){d.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on('toolbar:create:main-insert',this.createToolbar,this);n.each({content:{embed:'embedContent','edit-selection':'editSelectionContent'},toolbar:{'main-insert':'mainInsertToolbar'}},function(k,C){n.each(k,function(S,T){this.on(C+':render:'+T,this[S],this)},this)},this)},mainInsertToolbar:function(w){var k=this;this.selectionStatusToolbar(w),w.set('insert',{style:'primary',priority:80,text:h.add_images,requires:{selection:!0},click:function(){var C=k.state(),S=C.get('selection');vc.events.trigger('click:media_editor:add_image',S,'gallery'),C.trigger('insert',S).reset()}})}}),d.vc_editor=n.clone(d.editor),n.extend(d.vc_editor,{$vc_editor_element:null,getData:function(){return d.vc_editor.$vc_editor_element.closest('.edit_form_line').find('.gallery_widget_attached_images_ids').val()},insert:function(w){var k=d.vc_editor.$vc_editor_element,C=k.closest('.edit_form_line'),S=C.find('.gallery_widget_attached_images_ids'),T=C.find('.gallery_widget_attached_images_list'),P='',E=vc.template(t('#vc_settings-image-block').html(),vc.templateOptions.custom);n.each(w,function(j){P+=E(j)}),S.val(n.map(w,function(j){return j.id}).join(',')).trigger('change'),T.html(P)},open:function(w){var k;return w=this.id(w),k=this.get(w),k||(k=this.add(w)),window.vc_selectedFilters={},k.open()},add:function(w,k){var C=this.get(w);return C||(f[w]?f[w]:C=f[w]=new d.view.MediaFrame.VcGallery(n.defaults(k||{},{state:'vc_gallery',title:h.add_images,library:{type:'image'},multiple:!0})))},init:function(){t('body').unbind('click.vcGalleryWidget').on('click.vcGalleryWidget','.gallery_widget_add_images',function(w){w.preventDefault();var k=t(this);return(d.vc_editor.$vc_editor_element=t(this),'true'===k.attr('use-single'))?void d.VcSingleImage.frame(this).open('vc_editor'):void(k.blur(),d.vc_editor.open('visual-composer'))})}}),n.bindAll(d.vc_editor,'open'),t(document).ready(function(){d.vc_editor.init()}),vc.events.on('click:media_editor:add_image',function(w,k){t('.media-modal').addClass('processing-media'),o(n.extend({},w),function(S){var T,P;switch(T=n.map(S,function(E){return E.attributes}),w.reset(T),P=n.map(w.models,function(E){return E.attributes}),void 0===k&&(k=''),k){case'gallery':d.vc_editor.insert(P);break;case'single':d.VcSingleImage.set(P[0]);}t('.media-modal').removeClass('processing-media'),t('.media-modal-close').click()})}),t('body').on('change','[data-vc-preview-image-filter]',function(){var w;w=t(this).data('vcPreviewImageFilter'),void 0===window.vc_selectedFilters&&(window.vc_selectedFilters={}),window.vc_selectedFilters[w]=t(this).val(),l(w)})}(window.jQuery,window._);var vcPointerMessage;!function(t){'use strict';vcPointerMessage=function(n,o,l){this.target=n,this.$pointer=null,this.texts=l,this.pointerOptions=o,this.init()},vcPointerMessage.prototype={init:function(){_.bindAll(this,'openedEvent','reposition')},show:function(){this.$pointer=t(this.target),this.$pointer.data('vcPointerMessage',this),this.pointerOptions.opened=this.openedEvent,this.$pointer.addClass('vc-with-vc-pointer').pointer(this.pointerOptions).pointer('open'),t(window).on('resize.vcPointer',this.reposition)},domButtonsWrapper:function(){return t('<div class="vc_wp-pointer-controls" />')},domCloseBtn:function(){return t('<a class="vc_pointer-close close">'+this.texts.finish+'</a>')},domNextBtn:function(){return t('<button class="button button-primary button-large vc_wp-pointers-next">'+this.texts.next+'<i class="vc_pointer-icon"></i></button>')},domPrevBtn:function(){return t('<button class="button button-primary button-large vc_wp-pointers-prev"><i class="vc_pointer-icon"></i>'+this.texts.prev+'</button> ')},openedEvent:function(n,o){var l=o.pointer.offset();l&&l.top&&t('body').scrollTop(80<l.top?l.top-80:0)},reposition:function(){this.$pointer.pointer('reposition')},close:function(){this.$pointer&&this.$pointer.removeClass('vc-with-vc-pointer').pointer('close'),t(window).off('resize.vcPointer')}}}(window.jQuery);var vcPointersController;!function(t){'use strict';vcPointersController=function(n,o){this.pointers=n&&n.messages||[],this._texts=o,this.pointerId=n&&n.pointer_id?n.pointer_id:'',this.pointerData={},this._index=0,this.messagesDismissed=!1,this.init()},vcPointersController.prototype={init:function(){_.bindAll(this,'show','clickEventClose','clickEventNext','clickEventPrev','buttonsEvent'),this.build()},getPointer:function(n){return this.pointerData=this.pointers[n]&&this.pointers[n].target?this.pointers[n]:null,this.pointerData&&this.pointerData.options?new vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts):null},buildOptions:function(n){return n.buttons=n.buttonsEvent&&_.isFunction(window[n.buttonsEvent])?_.bind(window[n.buttonsEvent],this):this.buttonsEvent,n.vcPointerController=this,n},build:function(){return(this.pointer=this.getPointer(this._index),vc.events.once('backendEditor.close',this.close,this),!!this.pointer)&&void this.setShowEventHandler()},show:function(){this.pointer.show(),this.setCloseEventHandler(),vc.events.trigger('vcPointer:show')},setShowEventHandler:function(){var n;this.pointerData.showCallback&&window[this.pointerData.showCallback]?window[this.pointerData.showCallback].call(this):this.pointerData.showEvent?this.pointerData.showEvent.match(/\s/)?(n=this.pointerData.closeEvent.split(/\s+(.+)?/),1<n.length&&t(n[1]).one(n[0],this.show)):vc.events.once(this.pointerData.showEvent,this.show):this.show()},setCloseEventHandler:function(){var n;this.pointerData.closeCallback&&window[this.pointerData.closeCallback]?window[this.pointerData.closeCallback].call(this):this.pointerData.closeEvent?this.pointerData.closeEvent.match(/\s/)?(n=this.pointerData.closeEvent.split(/\s+(.+)?/),t(n[1]||this.$pointer).one(n[1]&&n[0]?n[0]:'click',this.clickEventNext)):vc.events.once(this.pointerData.closeEvent,this.nextOnEvent,this):this.pointer.$pointer&&0<this.pointer.$pointer.length&&t(this.pointer.$pointer).one('click',this.clickEventNext)},nextOnEvent:function(){this.close(),this.next()},next:function(){this._index++,this.build()},prev:function(){this._index--,this.build()},close:function(){this.pointer&&(this.pointer.close(),this.pointerData=null,this.pointer=null,vc.events.trigger('vcPointer:close',this))},buttonsEvent:function(){var n,o,l,s;return n=this.pointer.domCloseBtn(),o=this.pointer.domNextBtn(),l=this.pointer.domPrevBtn(),n.bind('click.vcPointer',this.clickEventClose),s=this.pointer.domButtonsWrapper().append(n),0<this._index&&(l.bind('click.vcPointer',this.clickEventPrev),s.addClass('vc_wp-pointer-controls-prev').append(l)),this._index+1<this.pointers.length&&(o.bind('click.vcPointer',this.clickEventNext),s.addClass('vc_wp-pointer-controls-next').append(o)),s},clickEventClose:function(){this.close(),this.dismissMessages()},clickEventNext:function(){this.close(),this.next()},clickEventPrev:function(){this.close(),this.prev()},dismissMessages:function(){return!this.messagesDismissed&&void(t.post(window.ajaxurl,{pointer:this.pointerId,action:'dismiss-wp-pointer'}),this.messagesDismissed=!0)}}}(window.jQuery),function(t){'use strict';vc.events.on('app.render',function(){window.vcPointer&&window.vcPointer.pointers&&window.vcPointer.pointers.length&&_.each(vcPointer.pointers,function(n){new vcPointersController(n,vcPointer.texts)},this)}),vc.events.on('vcPointer:show',function(){vc.app.disableFixedNav=!0}),vc.events.on('vcPointer:close',function(){vc.app.disableFixedNav=!1}),window.vcPointersEditorsTourEvents=function(){var n;return n=this.pointer.domCloseBtn(),n.bind('click.vcPointer',this.clickEventClose),this.dismissMessages(),n},window.vcPointersShowOnContentElementControls=function(){this.pointer&&t(this.pointer.target).length?(t(this.pointer.target).parent().addClass('vc-with-vc-pointer-controls'),this.show(),t('#wpb_visual_composer').one('click',function(){t('.vc-with-vc-pointer-controls').removeClass('vc-with-vc-pointer-controls')})):vc.events.once('shortcodes:add',vcPointersShowOnContentElementControls,this)},window.vcPointersSetInIFrame=function(){this.pointerData&&vc.frame_window.jQuery(this.pointerData.target).length?(this.pointer=new vc.frame_window.vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts),this.show(),this.pointer.$pointer.closest('.vc_controls').addClass('vc-with-vc-pointer-controls')):vc.events.once('shortcodeView:ready',vcPointersSetInIFrame,this)},window.vcPointersCloseInIFrame=function(){var n,o;n=this,o=vc.frame_window.jQuery,o('body').one('click',function(){o('.vc-with-vc-pointer-controls').removeClass('vc-with-vc-pointer-controls'),n.nextOnEvent()})}}(window.jQuery);